(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ge={},Vr=[],Cn=()=>{},Rm=()=>!1,ul=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Du=t=>t.startsWith("onUpdate:"),gt=Object.assign,Ou=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},x1=Object.prototype.hasOwnProperty,qe=(t,e)=>x1.call(t,e),ye=Array.isArray,Dr=t=>Ao(t)==="[object Map]",dl=t=>Ao(t)==="[object Set]",$h=t=>Ao(t)==="[object Date]",Re=t=>typeof t=="function",rt=t=>typeof t=="string",fn=t=>typeof t=="symbol",Qe=t=>t!==null&&typeof t=="object",km=t=>(Qe(t)||Re(t))&&Re(t.then)&&Re(t.catch),Pm=Object.prototype.toString,Ao=t=>Pm.call(t),M1=t=>Ao(t).slice(8,-1),Vm=t=>Ao(t)==="[object Object]",Nu=t=>rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fi=Vu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},L1=/-(\w)/g,an=hl(t=>t.replace(L1,(e,n)=>n?n.toUpperCase():"")),$1=/\B([A-Z])/g,Bs=hl(t=>t.replace($1,"-$1").toLowerCase()),fl=hl(t=>t.charAt(0).toUpperCase()+t.slice(1)),dc=hl(t=>t?`on${fl(t)}`:""),Ts=(t,e)=>!Object.is(t,e),ma=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Dm=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Da=t=>{const e=parseFloat(t);return isNaN(e)?t:e},F1=t=>{const e=rt(t)?Number(t):NaN;return isNaN(e)?t:e};let Fh;const pl=()=>Fh||(Fh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yn(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=rt(s)?q1(s):yn(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(rt(t)||Qe(t))return t}const U1=/;(?![^(]*\))/g,B1=/:([^]+)/,j1=/\/\*[^]*?\*\//g;function q1(t){const e={};return t.replace(j1,"").split(U1).forEach(n=>{if(n){const s=n.split(B1);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ve(t){let e="";if(rt(t))e=t;else if(ye(t))for(let n=0;n<t.length;n++){const s=Ve(t[n]);s&&(e+=s+" ")}else if(Qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const H1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",z1=Vu(H1);function Om(t){return!!t||t===""}function W1(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Br(t[s],e[s]);return n}function Br(t,e){if(t===e)return!0;let n=$h(t),s=$h(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=fn(t),s=fn(e),n||s)return t===e;if(n=ye(t),s=ye(e),n||s)return n&&s?W1(t,e):!1;if(n=Qe(t),s=Qe(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Br(t[o],e[o]))return!1}}return String(t)===String(e)}function K1(t,e){return t.findIndex(n=>Br(n,e))}const Nm=t=>!!(t&&t.__v_isRef===!0),F=t=>rt(t)?t:t==null?"":ye(t)||Qe(t)&&(t.toString===Pm||!Re(t.toString))?Nm(t)?F(t.value):JSON.stringify(t,xm,2):String(t),xm=(t,e)=>Nm(e)?xm(t,e.value):Dr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[hc(s,i)+" =>"]=r,n),{})}:dl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>hc(n))}:fn(e)?hc(e):Qe(e)&&!ye(e)&&!Vm(e)?String(e):e,hc=(t,e="")=>{var n;return fn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xt;class Mm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xt,!e&&xt&&(this.index=(xt.scopes||(xt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=xt;try{return xt=this,e()}finally{xt=n}}}on(){++this._on===1&&(this.prevScope=xt,xt=this)}off(){this._on>0&&--this._on===0&&(xt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Lm(t){return new Mm(t)}function $m(){return xt}function G1(t,e=!1){xt&&xt.cleanups.push(t)}let Ye;const fc=new WeakSet;class Fm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xt&&xt.active&&xt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,fc.has(this)&&(fc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Uh(this),jm(this);const e=Ye,n=dn;Ye=this,dn=!0;try{return this.fn()}finally{qm(this),Ye=e,dn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Lu(e);this.deps=this.depsTail=void 0,Uh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?fc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Uc(this)&&this.run()}get dirty(){return Uc(this)}}let Um=0,Ui,Bi;function Bm(t,e=!1){if(t.flags|=8,e){t.next=Bi,Bi=t;return}t.next=Ui,Ui=t}function xu(){Um++}function Mu(){if(--Um>0)return;if(Bi){let e=Bi;for(Bi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ui;){let e=Ui;for(Ui=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function jm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function qm(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Lu(s),Q1(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Uc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Hm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===no)||(t.globalVersion=no,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Uc(t))))return;t.flags|=2;const e=t.dep,n=Ye,s=dn;Ye=t,dn=!0;try{jm(t);const r=t.fn(t._value);(e.version===0||Ts(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Ye=n,dn=s,qm(t),t.flags&=-3}}function Lu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Lu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Q1(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let dn=!0;const zm=[];function Kn(){zm.push(dn),dn=!1}function Gn(){const t=zm.pop();dn=t===void 0?!0:t}function Uh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ye;Ye=void 0;try{e()}finally{Ye=n}}}let no=0;class J1{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $u{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ye||!dn||Ye===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ye)n=this.activeLink=new J1(Ye,this),Ye.deps?(n.prevDep=Ye.depsTail,Ye.depsTail.nextDep=n,Ye.depsTail=n):Ye.deps=Ye.depsTail=n,Wm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Ye.depsTail,n.nextDep=void 0,Ye.depsTail.nextDep=n,Ye.depsTail=n,Ye.deps===n&&(Ye.deps=s)}return n}trigger(e){this.version++,no++,this.notify(e)}notify(e){xu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Mu()}}}function Wm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Wm(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Oa=new WeakMap,rr=Symbol(""),Bc=Symbol(""),so=Symbol("");function Lt(t,e,n){if(dn&&Ye){let s=Oa.get(t);s||Oa.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new $u),r.map=s,r.key=n),r.track()}}function jn(t,e,n,s,r,i){const o=Oa.get(t);if(!o){no++;return}const l=c=>{c&&c.trigger()};if(xu(),e==="clear")o.forEach(l);else{const c=ye(t),u=c&&Nu(n);if(c&&n==="length"){const h=Number(s);o.forEach((p,m)=>{(m==="length"||m===so||!fn(m)&&m>=h)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(so)),e){case"add":c?u&&l(o.get("length")):(l(o.get(rr)),Dr(t)&&l(o.get(Bc)));break;case"delete":c||(l(o.get(rr)),Dr(t)&&l(o.get(Bc)));break;case"set":Dr(t)&&l(o.get(rr));break}}Mu()}function Y1(t,e){const n=Oa.get(t);return n&&n.get(e)}function Er(t){const e=$e(t);return e===t?e:(Lt(e,"iterate",so),on(t)?e:e.map(Ct))}function ml(t){return Lt(t=$e(t),"iterate",so),t}const X1={__proto__:null,[Symbol.iterator](){return pc(this,Symbol.iterator,Ct)},concat(...t){return Er(this).concat(...t.map(e=>ye(e)?Er(e):e))},entries(){return pc(this,"entries",t=>(t[1]=Ct(t[1]),t))},every(t,e){return $n(this,"every",t,e,void 0,arguments)},filter(t,e){return $n(this,"filter",t,e,n=>n.map(Ct),arguments)},find(t,e){return $n(this,"find",t,e,Ct,arguments)},findIndex(t,e){return $n(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return $n(this,"findLast",t,e,Ct,arguments)},findLastIndex(t,e){return $n(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return $n(this,"forEach",t,e,void 0,arguments)},includes(...t){return mc(this,"includes",t)},indexOf(...t){return mc(this,"indexOf",t)},join(t){return Er(this).join(t)},lastIndexOf(...t){return mc(this,"lastIndexOf",t)},map(t,e){return $n(this,"map",t,e,void 0,arguments)},pop(){return Ri(this,"pop")},push(...t){return Ri(this,"push",t)},reduce(t,...e){return Bh(this,"reduce",t,e)},reduceRight(t,...e){return Bh(this,"reduceRight",t,e)},shift(){return Ri(this,"shift")},some(t,e){return $n(this,"some",t,e,void 0,arguments)},splice(...t){return Ri(this,"splice",t)},toReversed(){return Er(this).toReversed()},toSorted(t){return Er(this).toSorted(t)},toSpliced(...t){return Er(this).toSpliced(...t)},unshift(...t){return Ri(this,"unshift",t)},values(){return pc(this,"values",Ct)}};function pc(t,e,n){const s=ml(t),r=s[e]();return s!==t&&!on(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const Z1=Array.prototype;function $n(t,e,n,s,r,i){const o=ml(t),l=o!==t&&!on(t),c=o[e];if(c!==Z1[e]){const p=c.apply(t,i);return l?Ct(p):p}let u=n;o!==t&&(l?u=function(p,m){return n.call(this,Ct(p),m,t)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,t)}));const h=c.call(o,u,s);return l&&r?r(h):h}function Bh(t,e,n,s){const r=ml(t);let i=n;return r!==t&&(on(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,Ct(l),c,t)}),r[e](i,...s)}function mc(t,e,n){const s=$e(t);Lt(s,"iterate",so);const r=s[e](...n);return(r===-1||r===!1)&&Bu(n[0])?(n[0]=$e(n[0]),s[e](...n)):r}function Ri(t,e,n=[]){Kn(),xu();const s=$e(t)[e].apply(t,n);return Mu(),Gn(),s}const eb=Vu("__proto__,__v_isRef,__isVue"),Km=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(fn));function tb(t){fn(t)||(t=String(t));const e=$e(this);return Lt(e,"has",t),e.hasOwnProperty(t)}class Gm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?db:Xm:i?Ym:Jm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ye(e);if(!r){let c;if(o&&(c=X1[n]))return c;if(n==="hasOwnProperty")return tb}const l=Reflect.get(e,n,lt(e)?e:s);return(fn(n)?Km.has(n):eb(n))||(r||Lt(e,"get",n),i)?l:lt(l)?o&&Nu(n)?l:l.value:Qe(l)?r?eg(l):Ds(l):l}}class Qm extends Gm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const c=Os(i);if(!on(s)&&!Os(s)&&(i=$e(i),s=$e(s)),!ye(e)&&lt(i)&&!lt(s))return c||(i.value=s),!0}const o=ye(e)&&Nu(n)?Number(n)<e.length:qe(e,n),l=Reflect.set(e,n,s,lt(e)?e:r);return e===$e(r)&&(o?Ts(s,i)&&jn(e,"set",n,s):jn(e,"add",n,s)),l}deleteProperty(e,n){const s=qe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&jn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!fn(n)||!Km.has(n))&&Lt(e,"has",n),s}ownKeys(e){return Lt(e,"iterate",ye(e)?"length":rr),Reflect.ownKeys(e)}}class nb extends Gm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const sb=new Qm,rb=new nb,ib=new Qm(!0);const jc=t=>t,Zo=t=>Reflect.getPrototypeOf(t);function ob(t,e,n){return function(...s){const r=this.__v_raw,i=$e(r),o=Dr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),h=n?jc:e?Na:Ct;return!e&&Lt(i,"iterate",c?Bc:rr),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:l?[h(p[0]),h(p[1])]:h(p),done:m}},[Symbol.iterator](){return this}}}}function ea(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ab(t,e){const n={get(r){const i=this.__v_raw,o=$e(i),l=$e(r);t||(Ts(r,l)&&Lt(o,"get",r),Lt(o,"get",l));const{has:c}=Zo(o),u=e?jc:t?Na:Ct;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Lt($e(r),"iterate",rr),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=$e(i),l=$e(r);return t||(Ts(r,l)&&Lt(o,"has",r),Lt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=$e(l),u=e?jc:t?Na:Ct;return!t&&Lt(c,"iterate",rr),l.forEach((h,p)=>r.call(i,u(h),u(p),o))}};return gt(n,t?{add:ea("add"),set:ea("set"),delete:ea("delete"),clear:ea("clear")}:{add(r){!e&&!on(r)&&!Os(r)&&(r=$e(r));const i=$e(this);return Zo(i).has.call(i,r)||(i.add(r),jn(i,"add",r,r)),this},set(r,i){!e&&!on(i)&&!Os(i)&&(i=$e(i));const o=$e(this),{has:l,get:c}=Zo(o);let u=l.call(o,r);u||(r=$e(r),u=l.call(o,r));const h=c.call(o,r);return o.set(r,i),u?Ts(i,h)&&jn(o,"set",r,i):jn(o,"add",r,i),this},delete(r){const i=$e(this),{has:o,get:l}=Zo(i);let c=o.call(i,r);c||(r=$e(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&jn(i,"delete",r,void 0),u},clear(){const r=$e(this),i=r.size!==0,o=r.clear();return i&&jn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=ob(r,t,e)}),n}function Fu(t,e){const n=ab(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(qe(n,r)&&r in s?n:s,r,i)}const lb={get:Fu(!1,!1)},cb={get:Fu(!1,!0)},ub={get:Fu(!0,!1)};const Jm=new WeakMap,Ym=new WeakMap,Xm=new WeakMap,db=new WeakMap;function hb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fb(t){return t.__v_skip||!Object.isExtensible(t)?0:hb(M1(t))}function Ds(t){return Os(t)?t:Uu(t,!1,sb,lb,Jm)}function Zm(t){return Uu(t,!1,ib,cb,Ym)}function eg(t){return Uu(t,!0,rb,ub,Xm)}function Uu(t,e,n,s,r){if(!Qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=fb(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function Is(t){return Os(t)?Is(t.__v_raw):!!(t&&t.__v_isReactive)}function Os(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function Bu(t){return t?!!t.__v_raw:!1}function $e(t){const e=t&&t.__v_raw;return e?$e(e):t}function ju(t){return!qe(t,"__v_skip")&&Object.isExtensible(t)&&Dm(t,"__v_skip",!0),t}const Ct=t=>Qe(t)?Ds(t):t,Na=t=>Qe(t)?eg(t):t;function lt(t){return t?t.__v_isRef===!0:!1}function oe(t){return tg(t,!1)}function pb(t){return tg(t,!0)}function tg(t,e){return lt(t)?t:new mb(t,e)}class mb{constructor(e,n){this.dep=new $u,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:$e(e),this._value=n?e:Ct(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||on(e)||Os(e);e=s?e:$e(e),Ts(e,n)&&(this._rawValue=e,this._value=s?e:Ct(e),this.dep.trigger())}}function Oe(t){return lt(t)?t.value:t}const gb={get:(t,e,n)=>e==="__v_raw"?t:Oe(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return lt(r)&&!lt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function ng(t){return Is(t)?t:new Proxy(t,gb)}function _b(t){const e=ye(t)?new Array(t.length):{};for(const n in t)e[n]=vb(t,n);return e}class yb{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Y1($e(this._object),this._key)}}function vb(t,e,n){const s=t[e];return lt(s)?s:new yb(t,e,n)}class bb{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new $u(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=no-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ye!==this)return Bm(this,!0),!0}get value(){const e=this.dep.track();return Hm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Eb(t,e,n=!1){let s,r;return Re(t)?s=t:(s=t.get,r=t.set),new bb(s,r,n)}const ta={},xa=new WeakMap;let er;function wb(t,e=!1,n=er){if(n){let s=xa.get(n);s||xa.set(n,s=[]),s.push(t)}}function Tb(t,e,n=Ge){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=H=>r?H:on(H)||r===!1||r===0?qn(H,1):qn(H);let h,p,m,_,w=!1,S=!1;if(lt(t)?(p=()=>t.value,w=on(t)):Is(t)?(p=()=>u(t),w=!0):ye(t)?(S=!0,w=t.some(H=>Is(H)||on(H)),p=()=>t.map(H=>{if(lt(H))return H.value;if(Is(H))return u(H);if(Re(H))return c?c(H,2):H()})):Re(t)?e?p=c?()=>c(t,2):t:p=()=>{if(m){Kn();try{m()}finally{Gn()}}const H=er;er=h;try{return c?c(t,3,[_]):t(_)}finally{er=H}}:p=Cn,e&&r){const H=p,J=r===!0?1/0:r;p=()=>qn(H(),J)}const P=$m(),N=()=>{h.stop(),P&&P.active&&Ou(P.effects,h)};if(i&&e){const H=e;e=(...J)=>{H(...J),N()}}let B=S?new Array(t.length).fill(ta):ta;const M=H=>{if(!(!(h.flags&1)||!h.dirty&&!H))if(e){const J=h.run();if(r||w||(S?J.some((ne,k)=>Ts(ne,B[k])):Ts(J,B))){m&&m();const ne=er;er=h;try{const k=[J,B===ta?void 0:S&&B[0]===ta?[]:B,_];B=J,c?c(e,3,k):e(...k)}finally{er=ne}}}else h.run()};return l&&l(M),h=new Fm(p),h.scheduler=o?()=>o(M,!1):M,_=H=>wb(H,!1,h),m=h.onStop=()=>{const H=xa.get(h);if(H){if(c)c(H,4);else for(const J of H)J();xa.delete(h)}},e?s?M(!0):B=h.run():o?o(M.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function qn(t,e=1/0,n){if(e<=0||!Qe(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,lt(t))qn(t.value,e,n);else if(ye(t))for(let s=0;s<t.length;s++)qn(t[s],e,n);else if(dl(t)||Dr(t))t.forEach(s=>{qn(s,e,n)});else if(Vm(t)){for(const s in t)qn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&qn(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function So(t,e,n,s){try{return s?t(...s):t()}catch(r){gl(r,e,n)}}function pn(t,e,n,s){if(Re(t)){const r=So(t,e,n,s);return r&&km(r)&&r.catch(i=>{gl(i,e,n)}),r}if(ye(t)){const r=[];for(let i=0;i<t.length;i++)r.push(pn(t[i],e,n,s));return r}}function gl(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ge;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](t,c,u)===!1)return}l=l.parent}if(i){Kn(),So(i,null,10,[t,c,u]),Gn();return}}Ib(t,n,r,s,o)}function Ib(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Wt=[];let In=-1;const Or=[];let fs=null,Ir=0;const sg=Promise.resolve();let Ma=null;function ti(t){const e=Ma||sg;return t?e.then(this?t.bind(this):t):e}function Ab(t){let e=In+1,n=Wt.length;for(;e<n;){const s=e+n>>>1,r=Wt[s],i=ro(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function qu(t){if(!(t.flags&1)){const e=ro(t),n=Wt[Wt.length-1];!n||!(t.flags&2)&&e>=ro(n)?Wt.push(t):Wt.splice(Ab(e),0,t),t.flags|=1,rg()}}function rg(){Ma||(Ma=sg.then(og))}function Sb(t){ye(t)?Or.push(...t):fs&&t.id===-1?fs.splice(Ir+1,0,t):t.flags&1||(Or.push(t),t.flags|=1),rg()}function jh(t,e,n=In+1){for(;n<Wt.length;n++){const s=Wt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Wt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ig(t){if(Or.length){const e=[...new Set(Or)].sort((n,s)=>ro(n)-ro(s));if(Or.length=0,fs){fs.push(...e);return}for(fs=e,Ir=0;Ir<fs.length;Ir++){const n=fs[Ir];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fs=null,Ir=0}}const ro=t=>t.id==null?t.flags&2?-1:1/0:t.id;function og(t){try{for(In=0;In<Wt.length;In++){const e=Wt[In];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),So(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;In<Wt.length;In++){const e=Wt[In];e&&(e.flags&=-2)}In=-1,Wt.length=0,ig(),Ma=null,(Wt.length||Or.length)&&og()}}let Pt=null,ag=null;function La(t){const e=Pt;return Pt=t,ag=t&&t.type.__scopeId||null,e}function de(t,e=Pt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&nf(-1);const i=La(e);let o;try{o=t(...r)}finally{La(i),s._d&&nf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ue(t,e){if(Pt===null)return t;const n=wl(Pt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Ge]=e[r];i&&(Re(i)&&(i={mounted:i,updated:i}),i.deep&&qn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Ys(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Kn(),pn(c,n,8,[t.el,l,t,e]),Gn())}}const lg=Symbol("_vte"),cg=t=>t.__isTeleport,ji=t=>t&&(t.disabled||t.disabled===""),qh=t=>t&&(t.defer||t.defer===""),Hh=t=>typeof SVGElement<"u"&&t instanceof SVGElement,zh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,qc=(t,e)=>{const n=t&&t.to;return rt(n)?e?e(n):null:n},ug={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,l,c,u){const{mc:h,pc:p,pbc:m,o:{insert:_,querySelector:w,createText:S,createComment:P}}=u,N=ji(e.props);let{shapeFlag:B,children:M,dynamicChildren:H}=e;if(t==null){const J=e.el=S(""),ne=e.anchor=S("");_(J,n,s),_(ne,n,s);const k=(v,C)=>{B&16&&(r&&r.isCE&&(r.ce._teleportTarget=v),h(M,v,C,r,i,o,l,c))},T=()=>{const v=e.target=qc(e.props,w),C=dg(v,e,S,_);v&&(o!=="svg"&&Hh(v)?o="svg":o!=="mathml"&&zh(v)&&(o="mathml"),N||(k(v,C),ga(e,!1)))};N&&(k(n,ne),ga(e,!0)),qh(e.props)?(e.el.__isMounted=!1,zt(()=>{T(),delete e.el.__isMounted},i)):T()}else{if(qh(e.props)&&t.el.__isMounted===!1){zt(()=>{ug.process(t,e,n,s,r,i,o,l,c,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const J=e.anchor=t.anchor,ne=e.target=t.target,k=e.targetAnchor=t.targetAnchor,T=ji(t.props),v=T?n:ne,C=T?J:k;if(o==="svg"||Hh(ne)?o="svg":(o==="mathml"||zh(ne))&&(o="mathml"),H?(m(t.dynamicChildren,H,v,r,i,o,l),Qu(t,e,!0)):c||p(t,e,v,C,r,i,o,l,!1),N)T?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):na(e,n,J,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=qc(e.props,w);R&&na(e,R,null,u,0)}else T&&na(e,ne,k,u,1);ga(e,N)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:p,props:m}=t;if(p&&(r(u),r(h)),i&&r(c),o&16){const _=i||!ji(m);for(let w=0;w<l.length;w++){const S=l[w];s(S,e,n,_,!!S.dynamicChildren)}}},move:na,hydrate:Cb};function na(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=t,p=i===2;if(p&&s(o,e,n),(!p||ji(h))&&c&16)for(let m=0;m<u.length;m++)r(u[m],e,n,2);p&&s(l,e,n)}function Cb(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},p){const m=e.target=qc(e.props,c);if(m){const _=ji(e.props),w=m._lpa||m.firstChild;if(e.shapeFlag&16)if(_)e.anchor=p(o(t),e,l(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let S=w;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||dg(m,e,h,u),p(w&&o(w),e,m,n,s,r,i)}ga(e,_)}return e.anchor&&o(e.anchor)}const _l=ug;function ga(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function dg(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[lg]=i,t&&(s(r,t),s(i,t)),i}const Bn=Symbol("_leaveCb"),sa=Symbol("_enterCb");function hg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ni(()=>{t.isMounted=!0}),zu(()=>{t.isUnmounting=!0}),t}const sn=[Function,Array],fg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:sn,onEnter:sn,onAfterEnter:sn,onEnterCancelled:sn,onBeforeLeave:sn,onLeave:sn,onAfterLeave:sn,onLeaveCancelled:sn,onBeforeAppear:sn,onAppear:sn,onAfterAppear:sn,onAppearCancelled:sn},pg=t=>{const e=t.subTree;return e.component?pg(e.component):e},Rb={name:"BaseTransition",props:fg,setup(t,{slots:e}){const n=Co(),s=hg();return()=>{const r=e.default&&Hu(e.default(),!0);if(!r||!r.length)return;const i=mg(r),o=$e(t),{mode:l}=o;if(s.isLeaving)return gc(i);const c=Wh(i);if(!c)return gc(i);let u=io(c,o,s,n,p=>u=p);c.type!==Ft&&or(c,u);let h=n.subTree&&Wh(n.subTree);if(h&&h.type!==Ft&&!nr(c,h)&&pg(n).type!==Ft){let p=io(h,o,s,n);if(or(h,p),l==="out-in"&&c.type!==Ft)return s.isLeaving=!0,p.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,h=void 0},gc(i);l==="in-out"&&c.type!==Ft?p.delayLeave=(m,_,w)=>{const S=gg(s,h);S[String(h.key)]=h,m[Bn]=()=>{_(),m[Bn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function mg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Ft){e=n;break}}return e}const kb=Rb;function gg(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function io(t,e,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:m,onLeave:_,onAfterLeave:w,onLeaveCancelled:S,onBeforeAppear:P,onAppear:N,onAfterAppear:B,onAppearCancelled:M}=e,H=String(t.key),J=gg(n,t),ne=(v,C)=>{v&&pn(v,s,9,C)},k=(v,C)=>{const R=C[1];ne(v,C),ye(v)?v.every(I=>I.length<=1)&&R():v.length<=1&&R()},T={mode:o,persisted:l,beforeEnter(v){let C=c;if(!n.isMounted)if(i)C=P||c;else return;v[Bn]&&v[Bn](!0);const R=J[H];R&&nr(t,R)&&R.el[Bn]&&R.el[Bn](),ne(C,[v])},enter(v){let C=u,R=h,I=p;if(!n.isMounted)if(i)C=N||u,R=B||h,I=M||p;else return;let y=!1;const G=v[sa]=be=>{y||(y=!0,be?ne(I,[v]):ne(R,[v]),T.delayedLeave&&T.delayedLeave(),v[sa]=void 0)};C?k(C,[v,G]):G()},leave(v,C){const R=String(t.key);if(v[sa]&&v[sa](!0),n.isUnmounting)return C();ne(m,[v]);let I=!1;const y=v[Bn]=G=>{I||(I=!0,C(),G?ne(S,[v]):ne(w,[v]),v[Bn]=void 0,J[R]===t&&delete J[R])};J[R]=t,_?k(_,[v,y]):y()},clone(v){const C=io(v,e,n,s,r);return r&&r(C),C}};return T}function gc(t){if(yl(t))return t=Ns(t),t.children=null,t}function Wh(t){if(!yl(t))return cg(t.type)&&t.children?mg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Re(n.default))return n.default()}}function or(t,e){t.shapeFlag&6&&t.component?(t.transition=e,or(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hu(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ce?(o.patchFlag&128&&r++,s=s.concat(Hu(o.children,e,l))):(e||o.type!==Ft)&&s.push(l!=null?Ns(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function _g(t,e){return Re(t)?gt({name:t.name},e,{setup:t}):t}function yg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function qi(t,e,n,s,r=!1){if(ye(t)){t.forEach((w,S)=>qi(w,e&&(ye(e)?e[S]:e),n,s,r));return}if(Nr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&qi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?wl(s.component):s.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===Ge?l.refs={}:l.refs,p=l.setupState,m=$e(p),_=p===Ge?Rm:w=>qe(m,w);if(u!=null&&u!==c){if(rt(u))h[u]=null,_(u)&&(p[u]=null);else if(lt(u)){u.value=null;const w=e;w.k&&(h[w.k]=null)}}if(Re(c))So(c,l,12,[o,h]);else{const w=rt(c),S=lt(c);if(w||S){const P=()=>{if(t.f){const N=w?_(c)?p[c]:h[c]:c.value;if(r)ye(N)&&Ou(N,i);else if(ye(N))N.includes(i)||N.push(i);else if(w)h[c]=[i],_(c)&&(p[c]=h[c]);else{const B=[i];c.value=B,t.k&&(h[t.k]=B)}}else w?(h[c]=o,_(c)&&(p[c]=o)):S&&(c.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,zt(P,n)):P()}}}pl().requestIdleCallback;pl().cancelIdleCallback;const Nr=t=>!!t.type.__asyncLoader,yl=t=>t.type.__isKeepAlive;function vg(t,e){Eg(t,"a",e)}function bg(t,e){Eg(t,"da",e)}function Eg(t,e,n=Ut){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(vl(e,s,n),n){let r=n.parent;for(;r&&r.parent;)yl(r.parent.vnode)&&Pb(s,e,n,r),r=r.parent}}function Pb(t,e,n,s){const r=vl(e,t,s,!0);Wu(()=>{Ou(s[e],r)},n)}function vl(t,e,n=Ut,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Kn();const l=Ro(n),c=pn(e,n,t,o);return l(),Gn(),c});return s?r.unshift(i):r.push(i),i}}const Zn=t=>(e,n=Ut)=>{(!lo||t==="sp")&&vl(t,(...s)=>e(...s),n)},Vb=Zn("bm"),ni=Zn("m"),Db=Zn("bu"),wg=Zn("u"),zu=Zn("bum"),Wu=Zn("um"),Ob=Zn("sp"),Nb=Zn("rtg"),xb=Zn("rtc");function Mb(t,e=Ut){vl("ec",t,e)}const Tg="components";function nn(t,e){return Ag(Tg,t,!0,e)||t}const Ig=Symbol.for("v-ndc");function Lb(t){return rt(t)?Ag(Tg,t,!1)||t:t||Ig}function Ag(t,e,n=!0,s=!1){const r=Pt||Ut;if(r){const i=r.type;{const l=SE(i,!1);if(l&&(l===e||l===an(e)||l===fl(an(e))))return i}const o=Kh(r[t]||i[t],e)||Kh(r.appContext[t],e);return!o&&s?i:o}}function Kh(t,e){return t&&(t[e]||t[an(e)]||t[fl(an(e))])}function We(t,e,n,s){let r;const i=n,o=ye(t);if(o||rt(t)){const l=o&&Is(t);let c=!1,u=!1;l&&(c=!on(t),u=Os(t),t=ml(t)),r=new Array(t.length);for(let h=0,p=t.length;h<p;h++)r[h]=e(c?u?Na(Ct(t[h])):Ct(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Qe(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];r[c]=e(t[h],h,c,i)}}else r=[];return r}function $b(t,e,n={},s,r){if(Pt.ce||Pt.parent&&Nr(Pt.parent)&&Pt.parent.ce)return D(),Xe(Ce,null,[se("slot",n,s)],64);let i=t[e];i&&i._c&&(i._d=!1),D();const o=i&&Sg(i(n)),l=n.key||o&&o.key,c=Xe(Ce,{key:(l&&!fn(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function Sg(t){return t.some(e=>ao(e)?!(e.type===Ft||e.type===Ce&&!Sg(e.children)):!0)?t:null}const Hc=t=>t?Hg(t)?wl(t):Hc(t.parent):null,Hi=gt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Hc(t.parent),$root:t=>Hc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Rg(t),$forceUpdate:t=>t.f||(t.f=()=>{qu(t.update)}),$nextTick:t=>t.n||(t.n=ti.bind(t.proxy)),$watch:t=>aE.bind(t)}),_c=(t,e)=>t!==Ge&&!t.__isScriptSetup&&qe(t,e),Fb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(_c(s,e))return o[e]=1,s[e];if(r!==Ge&&qe(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&qe(u,e))return o[e]=3,i[e];if(n!==Ge&&qe(n,e))return o[e]=4,n[e];zc&&(o[e]=0)}}const h=Hi[e];let p,m;if(h)return e==="$attrs"&&Lt(t.attrs,"get",""),h(t);if((p=l.__cssModules)&&(p=p[e]))return p;if(n!==Ge&&qe(n,e))return o[e]=4,n[e];if(m=c.config.globalProperties,qe(m,e))return m[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return _c(r,e)?(r[e]=n,!0):s!==Ge&&qe(s,e)?(s[e]=n,!0):qe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},l){let c,u;return!!(n[l]||t!==Ge&&l[0]!=="$"&&qe(t,l)||_c(e,l)||(c=i[0])&&qe(c,l)||qe(s,l)||qe(Hi,l)||qe(r.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:qe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gh(t){return ye(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let zc=!0;function Ub(t){const e=Rg(t),n=t.proxy,s=t.ctx;zc=!1,e.beforeCreate&&Qh(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:p,mounted:m,beforeUpdate:_,updated:w,activated:S,deactivated:P,beforeDestroy:N,beforeUnmount:B,destroyed:M,unmounted:H,render:J,renderTracked:ne,renderTriggered:k,errorCaptured:T,serverPrefetch:v,expose:C,inheritAttrs:R,components:I,directives:y,filters:G}=e;if(u&&Bb(u,s,null),o)for(const fe in o){const Ie=o[fe];Re(Ie)&&(s[fe]=Ie.bind(n))}if(r){const fe=r.call(n,n);Qe(fe)&&(t.data=Ds(fe))}if(zc=!0,i)for(const fe in i){const Ie=i[fe],st=Re(Ie)?Ie.bind(n,n):Re(Ie.get)?Ie.get.bind(n,n):Cn,Tt=!Re(Ie)&&Re(Ie.set)?Ie.set.bind(n):Cn,Se=Q({get:st,set:Tt});Object.defineProperty(s,fe,{enumerable:!0,configurable:!0,get:()=>Se.value,set:x=>Se.value=x})}if(l)for(const fe in l)Cg(l[fe],s,n,fe);if(c){const fe=Re(c)?c.call(n):c;Reflect.ownKeys(fe).forEach(Ie=>{_a(Ie,fe[Ie])})}h&&Qh(h,t,"c");function Te(fe,Ie){ye(Ie)?Ie.forEach(st=>fe(st.bind(n))):Ie&&fe(Ie.bind(n))}if(Te(Vb,p),Te(ni,m),Te(Db,_),Te(wg,w),Te(vg,S),Te(bg,P),Te(Mb,T),Te(xb,ne),Te(Nb,k),Te(zu,B),Te(Wu,H),Te(Ob,v),ye(C))if(C.length){const fe=t.exposed||(t.exposed={});C.forEach(Ie=>{Object.defineProperty(fe,Ie,{get:()=>n[Ie],set:st=>n[Ie]=st,enumerable:!0})})}else t.exposed||(t.exposed={});J&&t.render===Cn&&(t.render=J),R!=null&&(t.inheritAttrs=R),I&&(t.components=I),y&&(t.directives=y),v&&yg(t)}function Bb(t,e,n=Cn){ye(t)&&(t=Wc(t));for(const s in t){const r=t[s];let i;Qe(r)?"default"in r?i=tn(r.from||s,r.default,!0):i=tn(r.from||s):i=tn(r),lt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Qh(t,e,n){pn(ye(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Cg(t,e,n,s){let r=s.includes(".")?Fg(n,s):()=>n[s];if(rt(t)){const i=e[t];Re(i)&&hn(r,i)}else if(Re(t))hn(r,t.bind(n));else if(Qe(t))if(ye(t))t.forEach(i=>Cg(i,e,n,s));else{const i=Re(t.handler)?t.handler.bind(n):e[t.handler];Re(i)&&hn(r,i,t)}}function Rg(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>$a(c,u,o,!0)),$a(c,e,o)),Qe(e)&&i.set(e,c),c}function $a(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&$a(t,i,n,!0),r&&r.forEach(o=>$a(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=jb[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const jb={data:Jh,props:Yh,emits:Yh,methods:Di,computed:Di,beforeCreate:Ht,created:Ht,beforeMount:Ht,mounted:Ht,beforeUpdate:Ht,updated:Ht,beforeDestroy:Ht,beforeUnmount:Ht,destroyed:Ht,unmounted:Ht,activated:Ht,deactivated:Ht,errorCaptured:Ht,serverPrefetch:Ht,components:Di,directives:Di,watch:Hb,provide:Jh,inject:qb};function Jh(t,e){return e?t?function(){return gt(Re(t)?t.call(this,this):t,Re(e)?e.call(this,this):e)}:e:t}function qb(t,e){return Di(Wc(t),Wc(e))}function Wc(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ht(t,e){return t?[...new Set([].concat(t,e))]:e}function Di(t,e){return t?gt(Object.create(null),t,e):e}function Yh(t,e){return t?ye(t)&&ye(e)?[...new Set([...t,...e])]:gt(Object.create(null),Gh(t),Gh(e??{})):e}function Hb(t,e){if(!t)return e;if(!e)return t;const n=gt(Object.create(null),t);for(const s in e)n[s]=Ht(t[s],e[s]);return n}function kg(){return{app:null,config:{isNativeTag:Rm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zb=0;function Wb(t,e){return function(s,r=null){Re(s)||(s=gt({},s)),r!=null&&!Qe(r)&&(r=null);const i=kg(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:zb++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Wg,get config(){return i.config},set config(h){},use(h,...p){return o.has(h)||(h&&Re(h.install)?(o.add(h),h.install(u,...p)):Re(h)&&(o.add(h),h(u,...p))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,p){return p?(i.components[h]=p,u):i.components[h]},directive(h,p){return p?(i.directives[h]=p,u):i.directives[h]},mount(h,p,m){if(!c){const _=u._ceVNode||se(s,r);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,h,m),c=!0,u._container=h,h.__vue_app__=u,wl(_.component)}},onUnmount(h){l.push(h)},unmount(){c&&(pn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,p){return i.provides[h]=p,u},runWithContext(h){const p=ir;ir=u;try{return h()}finally{ir=p}}};return u}}let ir=null;function _a(t,e){if(Ut){let n=Ut.provides;const s=Ut.parent&&Ut.parent.provides;s===n&&(n=Ut.provides=Object.create(s)),n[t]=e}}function tn(t,e,n=!1){const s=Co();if(s||ir){let r=ir?ir._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Re(e)?e.call(s&&s.proxy):e}}function Kb(){return!!(Co()||ir)}const Pg={},Vg=()=>Object.create(Pg),Dg=t=>Object.getPrototypeOf(t)===Pg;function Gb(t,e,n,s=!1){const r={},i=Vg();t.propsDefaults=Object.create(null),Og(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Zm(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Qb(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=$e(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let m=h[p];if(bl(t.emitsOptions,m))continue;const _=e[m];if(c)if(qe(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const w=an(m);r[w]=Kc(c,l,w,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{Og(t,e,r,i)&&(u=!0);let h;for(const p in l)(!e||!qe(e,p)&&((h=Bs(p))===p||!qe(e,h)))&&(c?n&&(n[p]!==void 0||n[h]!==void 0)&&(r[p]=Kc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!qe(e,p))&&(delete i[p],u=!0)}u&&jn(t.attrs,"set","")}function Og(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Fi(c))continue;const u=e[c];let h;r&&qe(r,h=an(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:bl(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=$e(n),u=l||Ge;for(let h=0;h<i.length;h++){const p=i[h];n[p]=Kc(r,c,p,u[p],t,!qe(u,p))}}return o}function Kc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=qe(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Re(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=Ro(r);s=u[n]=c.call(null,e),h()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Bs(n))&&(s=!0))}return s}const Jb=new WeakMap;function Ng(t,e,n=!1){const s=n?Jb:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Re(t)){const h=p=>{c=!0;const[m,_]=Ng(p,e,!0);gt(o,m),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Qe(t)&&s.set(t,Vr),Vr;if(ye(i))for(let h=0;h<i.length;h++){const p=an(i[h]);Xh(p)&&(o[p]=Ge)}else if(i)for(const h in i){const p=an(h);if(Xh(p)){const m=i[h],_=o[p]=ye(m)||Re(m)?{type:m}:gt({},m),w=_.type;let S=!1,P=!0;if(ye(w))for(let N=0;N<w.length;++N){const B=w[N],M=Re(B)&&B.name;if(M==="Boolean"){S=!0;break}else M==="String"&&(P=!1)}else S=Re(w)&&w.name==="Boolean";_[0]=S,_[1]=P,(S||qe(_,"default"))&&l.push(p)}}const u=[o,l];return Qe(t)&&s.set(t,u),u}function Xh(t){return t[0]!=="$"&&!Fi(t)}const Ku=t=>t==="_"||t==="_ctx"||t==="$stable",Gu=t=>ye(t)?t.map(Sn):[Sn(t)],Yb=(t,e,n)=>{if(e._n)return e;const s=de((...r)=>Gu(e(...r)),n);return s._c=!1,s},xg=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Ku(r))continue;const i=t[r];if(Re(i))e[r]=Yb(r,i,s);else if(i!=null){const o=Gu(i);e[r]=()=>o}}},Mg=(t,e)=>{const n=Gu(e);t.slots.default=()=>n},Lg=(t,e,n)=>{for(const s in e)(n||!Ku(s))&&(t[s]=e[s])},Xb=(t,e,n)=>{const s=t.slots=Vg();if(t.vnode.shapeFlag&32){const r=e._;r?(Lg(s,e,n),n&&Dm(s,"_",r,!0)):xg(e,s)}else e&&Mg(t,e)},Zb=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ge;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Lg(r,e,n):(i=!e.$stable,xg(e,r)),o=e}else e&&(Mg(t,e),o={default:1});if(i)for(const l in r)!Ku(l)&&o[l]==null&&delete r[l]},zt=pE;function eE(t){return tE(t)}function tE(t,e){const n=pl();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:p,nextSibling:m,setScopeId:_=Cn,insertStaticContent:w}=t,S=(E,A,V,j=null,q=null,z=null,ie=void 0,Z=null,Y=!!A.dynamicChildren)=>{if(E===A)return;E&&!nr(E,A)&&(j=O(E),x(E,q,z,!0),E=null),A.patchFlag===-2&&(Y=!1,A.dynamicChildren=null);const{type:X,ref:_e,shapeFlag:ae}=A;switch(X){case El:P(E,A,V,j);break;case Ft:N(E,A,V,j);break;case ya:E==null&&B(A,V,j,ie);break;case Ce:I(E,A,V,j,q,z,ie,Z,Y);break;default:ae&1?J(E,A,V,j,q,z,ie,Z,Y):ae&6?y(E,A,V,j,q,z,ie,Z,Y):(ae&64||ae&128)&&X.process(E,A,V,j,q,z,ie,Z,Y,he)}_e!=null&&q?qi(_e,E&&E.ref,z,A||E,!A):_e==null&&E&&E.ref!=null&&qi(E.ref,null,z,E,!0)},P=(E,A,V,j)=>{if(E==null)s(A.el=l(A.children),V,j);else{const q=A.el=E.el;A.children!==E.children&&u(q,A.children)}},N=(E,A,V,j)=>{E==null?s(A.el=c(A.children||""),V,j):A.el=E.el},B=(E,A,V,j)=>{[E.el,E.anchor]=w(E.children,A,V,j,E.el,E.anchor)},M=({el:E,anchor:A},V,j)=>{let q;for(;E&&E!==A;)q=m(E),s(E,V,j),E=q;s(A,V,j)},H=({el:E,anchor:A})=>{let V;for(;E&&E!==A;)V=m(E),r(E),E=V;r(A)},J=(E,A,V,j,q,z,ie,Z,Y)=>{A.type==="svg"?ie="svg":A.type==="math"&&(ie="mathml"),E==null?ne(A,V,j,q,z,ie,Z,Y):v(E,A,q,z,ie,Z,Y)},ne=(E,A,V,j,q,z,ie,Z)=>{let Y,X;const{props:_e,shapeFlag:ae,transition:ge,dirs:ve}=E;if(Y=E.el=o(E.type,z,_e&&_e.is,_e),ae&8?h(Y,E.children):ae&16&&T(E.children,Y,null,j,q,yc(E,z),ie,Z),ve&&Ys(E,null,j,"created"),k(Y,E,E.scopeId,ie,j),_e){for(const ze in _e)ze!=="value"&&!Fi(ze)&&i(Y,ze,null,_e[ze],z,j);"value"in _e&&i(Y,"value",null,_e.value,z),(X=_e.onVnodeBeforeMount)&&wn(X,j,E)}ve&&Ys(E,null,j,"beforeMount");const De=nE(q,ge);De&&ge.beforeEnter(Y),s(Y,A,V),((X=_e&&_e.onVnodeMounted)||De||ve)&&zt(()=>{X&&wn(X,j,E),De&&ge.enter(Y),ve&&Ys(E,null,j,"mounted")},q)},k=(E,A,V,j,q)=>{if(V&&_(E,V),j)for(let z=0;z<j.length;z++)_(E,j[z]);if(q){let z=q.subTree;if(A===z||Bg(z.type)&&(z.ssContent===A||z.ssFallback===A)){const ie=q.vnode;k(E,ie,ie.scopeId,ie.slotScopeIds,q.parent)}}},T=(E,A,V,j,q,z,ie,Z,Y=0)=>{for(let X=Y;X<E.length;X++){const _e=E[X]=Z?ps(E[X]):Sn(E[X]);S(null,_e,A,V,j,q,z,ie,Z)}},v=(E,A,V,j,q,z,ie)=>{const Z=A.el=E.el;let{patchFlag:Y,dynamicChildren:X,dirs:_e}=A;Y|=E.patchFlag&16;const ae=E.props||Ge,ge=A.props||Ge;let ve;if(V&&Xs(V,!1),(ve=ge.onVnodeBeforeUpdate)&&wn(ve,V,A,E),_e&&Ys(A,E,V,"beforeUpdate"),V&&Xs(V,!0),(ae.innerHTML&&ge.innerHTML==null||ae.textContent&&ge.textContent==null)&&h(Z,""),X?C(E.dynamicChildren,X,Z,V,j,yc(A,q),z):ie||Ie(E,A,Z,null,V,j,yc(A,q),z,!1),Y>0){if(Y&16)R(Z,ae,ge,V,q);else if(Y&2&&ae.class!==ge.class&&i(Z,"class",null,ge.class,q),Y&4&&i(Z,"style",ae.style,ge.style,q),Y&8){const De=A.dynamicProps;for(let ze=0;ze<De.length;ze++){const Fe=De[ze],Dt=ae[Fe],Ot=ge[Fe];(Ot!==Dt||Fe==="value")&&i(Z,Fe,Dt,Ot,q,V)}}Y&1&&E.children!==A.children&&h(Z,A.children)}else!ie&&X==null&&R(Z,ae,ge,V,q);((ve=ge.onVnodeUpdated)||_e)&&zt(()=>{ve&&wn(ve,V,A,E),_e&&Ys(A,E,V,"updated")},j)},C=(E,A,V,j,q,z,ie)=>{for(let Z=0;Z<A.length;Z++){const Y=E[Z],X=A[Z],_e=Y.el&&(Y.type===Ce||!nr(Y,X)||Y.shapeFlag&198)?p(Y.el):V;S(Y,X,_e,null,j,q,z,ie,!0)}},R=(E,A,V,j,q)=>{if(A!==V){if(A!==Ge)for(const z in A)!Fi(z)&&!(z in V)&&i(E,z,A[z],null,q,j);for(const z in V){if(Fi(z))continue;const ie=V[z],Z=A[z];ie!==Z&&z!=="value"&&i(E,z,Z,ie,q,j)}"value"in V&&i(E,"value",A.value,V.value,q)}},I=(E,A,V,j,q,z,ie,Z,Y)=>{const X=A.el=E?E.el:l(""),_e=A.anchor=E?E.anchor:l("");let{patchFlag:ae,dynamicChildren:ge,slotScopeIds:ve}=A;ve&&(Z=Z?Z.concat(ve):ve),E==null?(s(X,V,j),s(_e,V,j),T(A.children||[],V,_e,q,z,ie,Z,Y)):ae>0&&ae&64&&ge&&E.dynamicChildren?(C(E.dynamicChildren,ge,V,q,z,ie,Z),(A.key!=null||q&&A===q.subTree)&&Qu(E,A,!0)):Ie(E,A,V,_e,q,z,ie,Z,Y)},y=(E,A,V,j,q,z,ie,Z,Y)=>{A.slotScopeIds=Z,E==null?A.shapeFlag&512?q.ctx.activate(A,V,j,ie,Y):G(A,V,j,q,z,ie,Y):be(E,A,Y)},G=(E,A,V,j,q,z,ie)=>{const Z=E.component=EE(E,j,q);if(yl(E)&&(Z.ctx.renderer=he),wE(Z,!1,ie),Z.asyncDep){if(q&&q.registerDep(Z,Te,ie),!E.el){const Y=Z.subTree=se(Ft);N(null,Y,A,V),E.placeholder=Y.el}}else Te(Z,E,A,V,q,z,ie)},be=(E,A,V)=>{const j=A.component=E.component;if(hE(E,A,V))if(j.asyncDep&&!j.asyncResolved){fe(j,A,V);return}else j.next=A,j.update();else A.el=E.el,j.vnode=A},Te=(E,A,V,j,q,z,ie)=>{const Z=()=>{if(E.isMounted){let{next:ae,bu:ge,u:ve,parent:De,vnode:ze}=E;{const Yt=$g(E);if(Yt){ae&&(ae.el=ze.el,fe(E,ae,ie)),Yt.asyncDep.then(()=>{E.isUnmounted||Z()});return}}let Fe=ae,Dt;Xs(E,!1),ae?(ae.el=ze.el,fe(E,ae,ie)):ae=ze,ge&&ma(ge),(Dt=ae.props&&ae.props.onVnodeBeforeUpdate)&&wn(Dt,De,ae,ze),Xs(E,!0);const Ot=ef(E),Jt=E.subTree;E.subTree=Ot,S(Jt,Ot,p(Jt.el),O(Jt),E,q,z),ae.el=Ot.el,Fe===null&&fE(E,Ot.el),ve&&zt(ve,q),(Dt=ae.props&&ae.props.onVnodeUpdated)&&zt(()=>wn(Dt,De,ae,ze),q)}else{let ae;const{el:ge,props:ve}=A,{bm:De,m:ze,parent:Fe,root:Dt,type:Ot}=E,Jt=Nr(A);Xs(E,!1),De&&ma(De),!Jt&&(ae=ve&&ve.onVnodeBeforeMount)&&wn(ae,Fe,A),Xs(E,!0);{Dt.ce&&Dt.ce._def.shadowRoot!==!1&&Dt.ce._injectChildStyle(Ot);const Yt=E.subTree=ef(E);S(null,Yt,V,j,E,q,z),A.el=Yt.el}if(ze&&zt(ze,q),!Jt&&(ae=ve&&ve.onVnodeMounted)){const Yt=A;zt(()=>wn(ae,Fe,Yt),q)}(A.shapeFlag&256||Fe&&Nr(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&E.a&&zt(E.a,q),E.isMounted=!0,A=V=j=null}};E.scope.on();const Y=E.effect=new Fm(Z);E.scope.off();const X=E.update=Y.run.bind(Y),_e=E.job=Y.runIfDirty.bind(Y);_e.i=E,_e.id=E.uid,Y.scheduler=()=>qu(_e),Xs(E,!0),X()},fe=(E,A,V)=>{A.component=E;const j=E.vnode.props;E.vnode=A,E.next=null,Qb(E,A.props,j,V),Zb(E,A.children,V),Kn(),jh(E),Gn()},Ie=(E,A,V,j,q,z,ie,Z,Y=!1)=>{const X=E&&E.children,_e=E?E.shapeFlag:0,ae=A.children,{patchFlag:ge,shapeFlag:ve}=A;if(ge>0){if(ge&128){Tt(X,ae,V,j,q,z,ie,Z,Y);return}else if(ge&256){st(X,ae,V,j,q,z,ie,Z,Y);return}}ve&8?(_e&16&&et(X,q,z),ae!==X&&h(V,ae)):_e&16?ve&16?Tt(X,ae,V,j,q,z,ie,Z,Y):et(X,q,z,!0):(_e&8&&h(V,""),ve&16&&T(ae,V,j,q,z,ie,Z,Y))},st=(E,A,V,j,q,z,ie,Z,Y)=>{E=E||Vr,A=A||Vr;const X=E.length,_e=A.length,ae=Math.min(X,_e);let ge;for(ge=0;ge<ae;ge++){const ve=A[ge]=Y?ps(A[ge]):Sn(A[ge]);S(E[ge],ve,V,null,q,z,ie,Z,Y)}X>_e?et(E,q,z,!0,!1,ae):T(A,V,j,q,z,ie,Z,Y,ae)},Tt=(E,A,V,j,q,z,ie,Z,Y)=>{let X=0;const _e=A.length;let ae=E.length-1,ge=_e-1;for(;X<=ae&&X<=ge;){const ve=E[X],De=A[X]=Y?ps(A[X]):Sn(A[X]);if(nr(ve,De))S(ve,De,V,null,q,z,ie,Z,Y);else break;X++}for(;X<=ae&&X<=ge;){const ve=E[ae],De=A[ge]=Y?ps(A[ge]):Sn(A[ge]);if(nr(ve,De))S(ve,De,V,null,q,z,ie,Z,Y);else break;ae--,ge--}if(X>ae){if(X<=ge){const ve=ge+1,De=ve<_e?A[ve].el:j;for(;X<=ge;)S(null,A[X]=Y?ps(A[X]):Sn(A[X]),V,De,q,z,ie,Z,Y),X++}}else if(X>ge)for(;X<=ae;)x(E[X],q,z,!0),X++;else{const ve=X,De=X,ze=new Map;for(X=De;X<=ge;X++){const At=A[X]=Y?ps(A[X]):Sn(A[X]);At.key!=null&&ze.set(At.key,X)}let Fe,Dt=0;const Ot=ge-De+1;let Jt=!1,Yt=0;const ln=new Array(Ot);for(X=0;X<Ot;X++)ln[X]=0;for(X=ve;X<=ae;X++){const At=E[X];if(Dt>=Ot){x(At,q,z,!0);continue}let yt;if(At.key!=null)yt=ze.get(At.key);else for(Fe=De;Fe<=ge;Fe++)if(ln[Fe-De]===0&&nr(At,A[Fe])){yt=Fe;break}yt===void 0?x(At,q,z,!0):(ln[yt-De]=X+1,yt>=Yt?Yt=yt:Jt=!0,S(At,A[yt],V,null,q,z,ie,Z,Y),Dt++)}const _r=Jt?sE(ln):Vr;for(Fe=_r.length-1,X=Ot-1;X>=0;X--){const At=De+X,yt=A[At],fi=A[At+1],Ws=At+1<_e?fi.el||fi.placeholder:j;ln[X]===0?S(null,yt,V,Ws,q,z,ie,Z,Y):Jt&&(Fe<0||X!==_r[Fe]?Se(yt,V,Ws,2):Fe--)}}},Se=(E,A,V,j,q=null)=>{const{el:z,type:ie,transition:Z,children:Y,shapeFlag:X}=E;if(X&6){Se(E.component.subTree,A,V,j);return}if(X&128){E.suspense.move(A,V,j);return}if(X&64){ie.move(E,A,V,he);return}if(ie===Ce){s(z,A,V);for(let ae=0;ae<Y.length;ae++)Se(Y[ae],A,V,j);s(E.anchor,A,V);return}if(ie===ya){M(E,A,V);return}if(j!==2&&X&1&&Z)if(j===0)Z.beforeEnter(z),s(z,A,V),zt(()=>Z.enter(z),q);else{const{leave:ae,delayLeave:ge,afterLeave:ve}=Z,De=()=>{E.ctx.isUnmounted?r(z):s(z,A,V)},ze=()=>{z._isLeaving&&z[Bn](!0),ae(z,()=>{De(),ve&&ve()})};ge?ge(z,De,ze):ze()}else s(z,A,V)},x=(E,A,V,j=!1,q=!1)=>{const{type:z,props:ie,ref:Z,children:Y,dynamicChildren:X,shapeFlag:_e,patchFlag:ae,dirs:ge,cacheIndex:ve}=E;if(ae===-2&&(q=!1),Z!=null&&(Kn(),qi(Z,null,V,E,!0),Gn()),ve!=null&&(A.renderCache[ve]=void 0),_e&256){A.ctx.deactivate(E);return}const De=_e&1&&ge,ze=!Nr(E);let Fe;if(ze&&(Fe=ie&&ie.onVnodeBeforeUnmount)&&wn(Fe,A,E),_e&6)It(E.component,V,j);else{if(_e&128){E.suspense.unmount(V,j);return}De&&Ys(E,null,A,"beforeUnmount"),_e&64?E.type.remove(E,A,V,he,j):X&&!X.hasOnce&&(z!==Ce||ae>0&&ae&64)?et(X,A,V,!1,!0):(z===Ce&&ae&384||!q&&_e&16)&&et(Y,A,V),j&&_t(E)}(ze&&(Fe=ie&&ie.onVnodeUnmounted)||De)&&zt(()=>{Fe&&wn(Fe,A,E),De&&Ys(E,null,A,"unmounted")},V)},_t=E=>{const{type:A,el:V,anchor:j,transition:q}=E;if(A===Ce){ht(V,j);return}if(A===ya){H(E);return}const z=()=>{r(V),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(E.shapeFlag&1&&q&&!q.persisted){const{leave:ie,delayLeave:Z}=q,Y=()=>ie(V,z);Z?Z(E.el,z,Y):Y()}else z()},ht=(E,A)=>{let V;for(;E!==A;)V=m(E),r(E),E=V;r(A)},It=(E,A,V)=>{const{bum:j,scope:q,job:z,subTree:ie,um:Z,m:Y,a:X}=E;Zh(Y),Zh(X),j&&ma(j),q.stop(),z&&(z.flags|=8,x(ie,E,A,V)),Z&&zt(Z,A),zt(()=>{E.isUnmounted=!0},A)},et=(E,A,V,j=!1,q=!1,z=0)=>{for(let ie=z;ie<E.length;ie++)x(E[ie],A,V,j,q)},O=E=>{if(E.shapeFlag&6)return O(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const A=m(E.anchor||E.el),V=A&&A[lg];return V?m(V):A};let ee=!1;const te=(E,A,V)=>{E==null?A._vnode&&x(A._vnode,null,null,!0):S(A._vnode||null,E,A,null,null,null,V),A._vnode=E,ee||(ee=!0,jh(),ig(),ee=!1)},he={p:S,um:x,m:Se,r:_t,mt:G,mc:T,pc:Ie,pbc:C,n:O,o:t};return{render:te,hydrate:void 0,createApp:Wb(te)}}function yc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Xs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Qu(t,e,n=!1){const s=t.children,r=e.children;if(ye(s)&&ye(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=ps(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Qu(o,l)),l.type===El&&l.patchFlag!==-1&&(l.el=o.el),l.type===Ft&&!l.el&&(l.el=o.el)}}function sE(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function $g(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:$g(e)}function Zh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rE=Symbol.for("v-scx"),iE=()=>tn(rE);function oE(t,e){return Ju(t,null,e)}function hn(t,e,n){return Ju(t,e,n)}function Ju(t,e,n=Ge){const{immediate:s,deep:r,flush:i,once:o}=n,l=gt({},n),c=e&&s||!e&&i!=="post";let u;if(lo){if(i==="sync"){const _=iE();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=Cn,_.resume=Cn,_.pause=Cn,_}}const h=Ut;l.call=(_,w,S)=>pn(_,h,w,S);let p=!1;i==="post"?l.scheduler=_=>{zt(_,h&&h.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(_,w)=>{w?_():qu(_)}),l.augmentJob=_=>{e&&(_.flags|=4),p&&(_.flags|=2,h&&(_.id=h.uid,_.i=h))};const m=Tb(t,e,l);return lo&&(u?u.push(m):c&&m()),m}function aE(t,e,n){const s=this.proxy,r=rt(t)?t.includes(".")?Fg(s,t):()=>s[t]:t.bind(s,s);let i;Re(e)?i=e:(i=e.handler,n=e);const o=Ro(this),l=Ju(r,i.bind(s),n);return o(),l}function Fg(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const lE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${an(e)}Modifiers`]||t[`${Bs(e)}Modifiers`];function cE(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ge;let r=n;const i=e.startsWith("update:"),o=i&&lE(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>rt(h)?h.trim():h)),o.number&&(r=n.map(Da)));let l,c=s[l=dc(e)]||s[l=dc(an(e))];!c&&i&&(c=s[l=dc(Bs(e))]),c&&pn(c,t,6,r);const u=s[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,pn(u,t,6,r)}}function Ug(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Re(t)){const c=u=>{const h=Ug(u,e,!0);h&&(l=!0,gt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Qe(t)&&s.set(t,null),null):(ye(i)?i.forEach(c=>o[c]=null):gt(o,i),Qe(t)&&s.set(t,o),o)}function bl(t,e){return!t||!ul(e)?!1:(e=e.slice(2).replace(/Once$/,""),qe(t,e[0].toLowerCase()+e.slice(1))||qe(t,Bs(e))||qe(t,e))}function ef(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:p,data:m,setupState:_,ctx:w,inheritAttrs:S}=t,P=La(t);let N,B;try{if(n.shapeFlag&4){const H=r||s,J=H;N=Sn(u.call(J,H,h,p,_,m,w)),B=l}else{const H=e;N=Sn(H.length>1?H(p,{attrs:l,slots:o,emit:c}):H(p,null)),B=e.props?l:uE(l)}}catch(H){zi.length=0,gl(H,t,1),N=se(Ft)}let M=N;if(B&&S!==!1){const H=Object.keys(B),{shapeFlag:J}=M;H.length&&J&7&&(i&&H.some(Du)&&(B=dE(B,i)),M=Ns(M,B,!1,!0))}return n.dirs&&(M=Ns(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&or(M,n.transition),N=M,La(P),N}const uE=t=>{let e;for(const n in t)(n==="class"||n==="style"||ul(n))&&((e||(e={}))[n]=t[n]);return e},dE=(t,e)=>{const n={};for(const s in t)(!Du(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function hE(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?tf(s,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const m=h[p];if(o[m]!==s[m]&&!bl(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?tf(s,o,u):!0:!!o;return!1}function tf(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!bl(n,i))return!0}return!1}function fE({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Bg=t=>t.__isSuspense;function pE(t,e){e&&e.pendingBranch?ye(t)?e.effects.push(...t):e.effects.push(t):Sb(t)}const Ce=Symbol.for("v-fgt"),El=Symbol.for("v-txt"),Ft=Symbol.for("v-cmt"),ya=Symbol.for("v-stc"),zi=[];let Zt=null;function D(t=!1){zi.push(Zt=t?null:[])}function mE(){zi.pop(),Zt=zi[zi.length-1]||null}let oo=1;function nf(t,e=!1){oo+=t,t<0&&Zt&&e&&(Zt.hasOnce=!0)}function jg(t){return t.dynamicChildren=oo>0?Zt||Vr:null,mE(),oo>0&&Zt&&Zt.push(t),t}function $(t,e,n,s,r,i){return jg(d(t,e,n,s,r,i,!0))}function Xe(t,e,n,s,r){return jg(se(t,e,n,s,r,!0))}function ao(t){return t?t.__v_isVNode===!0:!1}function nr(t,e){return t.type===e.type&&t.key===e.key}const qg=({key:t})=>t??null,va=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?rt(t)||lt(t)||Re(t)?{i:Pt,r:t,k:e,f:!!n}:t:null);function d(t,e=null,n=null,s=0,r=null,i=t===Ce?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qg(e),ref:e&&va(e),scopeId:ag,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Pt};return l?(Yu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=rt(n)?8:16),oo>0&&!o&&Zt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Zt.push(c),c}const se=gE;function gE(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Ig)&&(t=Ft),ao(t)){const l=Ns(t,e,!0);return n&&Yu(l,n),oo>0&&!i&&Zt&&(l.shapeFlag&6?Zt[Zt.indexOf(t)]=l:Zt.push(l)),l.patchFlag=-2,l}if(CE(t)&&(t=t.__vccOpts),e){e=_E(e);let{class:l,style:c}=e;l&&!rt(l)&&(e.class=Ve(l)),Qe(c)&&(Bu(c)&&!ye(c)&&(c=gt({},c)),e.style=yn(c))}const o=rt(t)?1:Bg(t)?128:cg(t)?64:Qe(t)?4:Re(t)?2:0;return d(t,e,n,s,r,o,i,!0)}function _E(t){return t?Bu(t)||Dg(t)?gt({},t):t:null}function Ns(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?yE(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&qg(u),ref:e&&e.ref?n&&i?ye(i)?i.concat(va(e)):[i,va(e)]:va(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ce?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ns(t.ssContent),ssFallback:t.ssFallback&&Ns(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&or(h,c.clone(h)),h}function ue(t=" ",e=0){return se(El,null,t,e)}function Kt(t,e){const n=se(ya,null,t);return n.staticCount=e,n}function pe(t="",e=!1){return e?(D(),Xe(Ft,null,t)):se(Ft,null,t)}function Sn(t){return t==null||typeof t=="boolean"?se(Ft):ye(t)?se(Ce,null,t.slice()):ao(t)?ps(t):se(El,null,String(t))}function ps(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ns(t)}function Yu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ye(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Yu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Dg(e)?e._ctx=Pt:r===3&&Pt&&(Pt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Re(e)?(e={default:e,_ctx:Pt},n=32):(e=String(e),s&64?(n=16,e=[ue(e)]):n=8);t.children=e,t.shapeFlag|=n}function yE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ve([e.class,s.class]));else if(r==="style")e.style=yn([e.style,s.style]);else if(ul(r)){const i=e[r],o=s[r];o&&i!==o&&!(ye(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function wn(t,e,n,s=null){pn(t,e,7,[n,s])}const vE=kg();let bE=0;function EE(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||vE,i={uid:bE++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ng(s,r),emitsOptions:Ug(s,r),emit:null,emitted:null,propsDefaults:Ge,inheritAttrs:s.inheritAttrs,ctx:Ge,data:Ge,props:Ge,attrs:Ge,slots:Ge,refs:Ge,setupState:Ge,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=cE.bind(null,i),t.ce&&t.ce(i),i}let Ut=null;const Co=()=>Ut||Pt;let Fa,Gc;{const t=pl(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Fa=e("__VUE_INSTANCE_SETTERS__",n=>Ut=n),Gc=e("__VUE_SSR_SETTERS__",n=>lo=n)}const Ro=t=>{const e=Ut;return Fa(t),t.scope.on(),()=>{t.scope.off(),Fa(e)}},sf=()=>{Ut&&Ut.scope.off(),Fa(null)};function Hg(t){return t.vnode.shapeFlag&4}let lo=!1;function wE(t,e=!1,n=!1){e&&Gc(e);const{props:s,children:r}=t.vnode,i=Hg(t);Gb(t,s,i,e),Xb(t,r,n||e);const o=i?TE(t,e):void 0;return e&&Gc(!1),o}function TE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Fb);const{setup:s}=n;if(s){Kn();const r=t.setupContext=s.length>1?AE(t):null,i=Ro(t),o=So(s,t,0,[t.props,r]),l=km(o);if(Gn(),i(),(l||t.sp)&&!Nr(t)&&yg(t),l){if(o.then(sf,sf),e)return o.then(c=>{rf(t,c)}).catch(c=>{gl(c,t,0)});t.asyncDep=o}else rf(t,o)}else zg(t)}function rf(t,e,n){Re(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Qe(e)&&(t.setupState=ng(e)),zg(t)}function zg(t,e,n){const s=t.type;t.render||(t.render=s.render||Cn);{const r=Ro(t);Kn();try{Ub(t)}finally{Gn(),r()}}}const IE={get(t,e){return Lt(t,"get",""),t[e]}};function AE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,IE),slots:t.slots,emit:t.emit,expose:e}}function wl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ng(ju(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Hi)return Hi[n](t)},has(e,n){return n in e||n in Hi}})):t.proxy}function SE(t,e=!0){return Re(t)?t.displayName||t.name:t.name||e&&t.__name}function CE(t){return Re(t)&&"__vccOpts"in t}const Q=(t,e)=>Eb(t,e,lo);function Xu(t,e,n){const s=arguments.length;return s===2?Qe(e)&&!ye(e)?ao(e)?se(t,null,[e]):se(t,e):se(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ao(n)&&(n=[n]),se(t,e,n))}const Wg="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qc;const of=typeof window<"u"&&window.trustedTypes;if(of)try{Qc=of.createPolicy("vue",{createHTML:t=>t})}catch{}const Kg=Qc?t=>Qc.createHTML(t):t=>t,RE="http://www.w3.org/2000/svg",kE="http://www.w3.org/1998/Math/MathML",Un=typeof document<"u"?document:null,af=Un&&Un.createElement("template"),PE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Un.createElementNS(RE,t):e==="mathml"?Un.createElementNS(kE,t):n?Un.createElement(t,{is:n}):Un.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Un.createTextNode(t),createComment:t=>Un.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Un.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{af.innerHTML=Kg(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=af.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},as="transition",ki="animation",jr=Symbol("_vtc"),Gg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Qg=gt({},fg,Gg),VE=t=>(t.displayName="Transition",t.props=Qg,t),Bt=VE((t,{slots:e})=>Xu(kb,Jg(t),e)),Zs=(t,e=[])=>{ye(t)?t.forEach(n=>n(...e)):t&&t(...e)},lf=t=>t?ye(t)?t.some(e=>e.length>1):t.length>1:!1;function Jg(t){const e={};for(const I in t)I in Gg||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,w=DE(r),S=w&&w[0],P=w&&w[1],{onBeforeEnter:N,onEnter:B,onEnterCancelled:M,onLeave:H,onLeaveCancelled:J,onBeforeAppear:ne=N,onAppear:k=B,onAppearCancelled:T=M}=e,v=(I,y,G,be)=>{I._enterCancelled=be,ds(I,y?h:l),ds(I,y?u:o),G&&G()},C=(I,y)=>{I._isLeaving=!1,ds(I,p),ds(I,_),ds(I,m),y&&y()},R=I=>(y,G)=>{const be=I?k:B,Te=()=>v(y,I,G);Zs(be,[y,Te]),cf(()=>{ds(y,I?c:i),Tn(y,I?h:l),lf(be)||uf(y,s,S,Te)})};return gt(e,{onBeforeEnter(I){Zs(N,[I]),Tn(I,i),Tn(I,o)},onBeforeAppear(I){Zs(ne,[I]),Tn(I,c),Tn(I,u)},onEnter:R(!1),onAppear:R(!0),onLeave(I,y){I._isLeaving=!0;const G=()=>C(I,y);Tn(I,p),I._enterCancelled?(Tn(I,m),Jc()):(Jc(),Tn(I,m)),cf(()=>{I._isLeaving&&(ds(I,p),Tn(I,_),lf(H)||uf(I,s,P,G))}),Zs(H,[I,G])},onEnterCancelled(I){v(I,!1,void 0,!0),Zs(M,[I])},onAppearCancelled(I){v(I,!0,void 0,!0),Zs(T,[I])},onLeaveCancelled(I){C(I),Zs(J,[I])}})}function DE(t){if(t==null)return null;if(Qe(t))return[vc(t.enter),vc(t.leave)];{const e=vc(t);return[e,e]}}function vc(t){return F1(t)}function Tn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[jr]||(t[jr]=new Set)).add(e)}function ds(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[jr];n&&(n.delete(e),n.size||(t[jr]=void 0))}function cf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let OE=0;function uf(t,e,n,s){const r=t._endId=++OE,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=Yg(t,e);if(!o)return s();const u=o+"end";let h=0;const p=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++h>=c&&p()};setTimeout(()=>{h<c&&p()},l+1),t.addEventListener(u,m)}function Yg(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${as}Delay`),i=s(`${as}Duration`),o=df(r,i),l=s(`${ki}Delay`),c=s(`${ki}Duration`),u=df(l,c);let h=null,p=0,m=0;e===as?o>0&&(h=as,p=o,m=i.length):e===ki?u>0&&(h=ki,p=u,m=c.length):(p=Math.max(o,u),h=p>0?o>u?as:ki:null,m=h?h===as?i.length:c.length:0);const _=h===as&&/\b(transform|all)(,|$)/.test(s(`${as}Property`).toString());return{type:h,timeout:p,propCount:m,hasTransform:_}}function df(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>hf(n)+hf(t[s])))}function hf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Jc(){return document.body.offsetHeight}function NE(t,e,n){const s=t[jr];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ua=Symbol("_vod"),Xg=Symbol("_vsh"),Oi={beforeMount(t,{value:e},{transition:n}){t[Ua]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Pi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Pi(t,!0),s.enter(t)):s.leave(t,()=>{Pi(t,!1)}):Pi(t,e))},beforeUnmount(t,{value:e}){Pi(t,e)}};function Pi(t,e){t.style.display=e?t[Ua]:"none",t[Xg]=!e}const xE=Symbol(""),ME=/(^|;)\s*display\s*:/;function LE(t,e,n){const s=t.style,r=rt(n);let i=!1;if(n&&!r){if(e)if(rt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&ba(s,l,"")}else for(const o in e)n[o]==null&&ba(s,o,"");for(const o in n)o==="display"&&(i=!0),ba(s,o,n[o])}else if(r){if(e!==n){const o=s[xE];o&&(n+=";"+o),s.cssText=n,i=ME.test(n)}}else e&&t.removeAttribute("style");Ua in t&&(t[Ua]=i?s.display:"",t[Xg]&&(s.display="none"))}const ff=/\s*!important$/;function ba(t,e,n){if(ye(n))n.forEach(s=>ba(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=$E(t,e);ff.test(n)?t.setProperty(Bs(s),n.replace(ff,""),"important"):t[s]=n}}const pf=["Webkit","Moz","ms"],bc={};function $E(t,e){const n=bc[e];if(n)return n;let s=an(e);if(s!=="filter"&&s in t)return bc[e]=s;s=fl(s);for(let r=0;r<pf.length;r++){const i=pf[r]+s;if(i in t)return bc[e]=i}return e}const mf="http://www.w3.org/1999/xlink";function gf(t,e,n,s,r,i=z1(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(mf,e.slice(6,e.length)):t.setAttributeNS(mf,e,n):n==null||i&&!Om(n)?t.removeAttribute(e):t.setAttribute(e,i?"":fn(n)?String(n):n)}function _f(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Kg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Om(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function _s(t,e,n,s){t.addEventListener(e,n,s)}function FE(t,e,n,s){t.removeEventListener(e,n,s)}const yf=Symbol("_vei");function UE(t,e,n,s,r=null){const i=t[yf]||(t[yf]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=BE(e);if(s){const u=i[e]=HE(s,r);_s(t,l,u,c)}else o&&(FE(t,l,o,c),i[e]=void 0)}}const vf=/(?:Once|Passive|Capture)$/;function BE(t){let e;if(vf.test(t)){e={};let s;for(;s=t.match(vf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bs(t.slice(2)),e]}let Ec=0;const jE=Promise.resolve(),qE=()=>Ec||(jE.then(()=>Ec=0),Ec=Date.now());function HE(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;pn(zE(s,n.value),e,5,[s])};return n.value=t,n.attached=qE(),n}function zE(t,e){if(ye(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const bf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,WE=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?NE(t,s,o):e==="style"?LE(t,n,s):ul(e)?Du(e)||UE(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):KE(t,e,s,o))?(_f(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&gf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!rt(s))?_f(t,an(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),gf(t,e,s,o))};function KE(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&bf(e)&&Re(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return bf(e)&&rt(n)?!1:e in t}const Zg=new WeakMap,e_=new WeakMap,Ba=Symbol("_moveCb"),Ef=Symbol("_enterCb"),GE=t=>(delete t.props.mode,t),QE=GE({name:"TransitionGroup",props:gt({},Qg,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Co(),s=hg();let r,i;return wg(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!ZE(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(JE),r.forEach(YE);const l=r.filter(XE);Jc(),l.forEach(c=>{const u=c.el,h=u.style;Tn(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const p=u[Ba]=m=>{m&&m.target!==u||(!m||/transform$/.test(m.propertyName))&&(u.removeEventListener("transitionend",p),u[Ba]=null,ds(u,o))};u.addEventListener("transitionend",p)}),r=[]}),()=>{const o=$e(t),l=Jg(o);let c=o.tag||Ce;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),or(h,io(h,l,s,n)),Zg.set(h,h.el.getBoundingClientRect()))}i=e.default?Hu(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&or(h,io(h,l,s,n))}return se(c,null,i)}}}),hr=QE;function JE(t){const e=t.el;e[Ba]&&e[Ba](),e[Ef]&&e[Ef]()}function YE(t){e_.set(t,t.el.getBoundingClientRect())}function XE(t){const e=Zg.get(t),n=e_.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function ZE(t,e,n){const s=t.cloneNode(),r=t[jr];r&&r.forEach(l=>{l.split(/\s+/).forEach(c=>c&&s.classList.remove(c))}),n.split(/\s+/).forEach(l=>l&&s.classList.add(l)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=Yg(s);return i.removeChild(s),o}const qr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ye(e)?n=>ma(e,n):e};function ew(t){t.target.composing=!0}function wf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Wn=Symbol("_assign"),Et={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Wn]=qr(r);const i=s||r.props&&r.props.type==="number";_s(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=Da(l)),t[Wn](l)}),n&&_s(t,"change",()=>{t.value=t.value.trim()}),e||(_s(t,"compositionstart",ew),_s(t,"compositionend",wf),_s(t,"change",wf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Wn]=qr(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Da(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},wr={created(t,{value:e},n){t.checked=Br(e,n.props.value),t[Wn]=qr(n),_s(t,"change",()=>{t[Wn](co(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Wn]=qr(s),e!==n&&(t.checked=Br(e,s.props.value))}},Zu={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=dl(e);_s(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Da(co(o)):co(o));t[Wn](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,ti(()=>{t._assigning=!1})}),t[Wn]=qr(s)},mounted(t,{value:e}){Tf(t,e)},beforeUpdate(t,e,n){t[Wn]=qr(n)},updated(t,{value:e}){t._assigning||Tf(t,e)}};function Tf(t,e){const n=t.multiple,s=ye(e);if(!(n&&!s&&!dl(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=co(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=K1(e,l)>-1}else o.selected=e.has(l);else if(Br(co(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function co(t){return"_value"in t?t._value:t.value}const tw=["ctrl","shift","alt","meta"],nw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>tw.some(n=>t[`${n}Key`]&&!e.includes(n))},Rn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=nw[e[o]];if(l&&l(r,e))return}return t(r,...i)})},sw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},uo=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=Bs(r.key);if(e.some(o=>o===i||sw[o]===i))return t(r)})},rw=gt({patchProp:WE},PE);let If;function iw(){return If||(If=eE(rw))}const ow=(...t)=>{const e=iw().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=lw(s);if(!r)return;const i=e._component;!Re(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,aw(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function aw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lw(t){return rt(t)?document.querySelector(t):t}function Yc(t,e={},n){for(const s in t){const r=t[s],i=n?`${n}:${s}`:s;typeof r=="object"&&r!==null?Yc(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const cw={run:t=>t()},uw=()=>cw,t_=typeof console.createTask<"u"?console.createTask:uw;function dw(t,e){const n=e.shift(),s=t_(n);return t.reduce((r,i)=>r.then(()=>s.run(()=>i(...e))),Promise.resolve())}function hw(t,e){const n=e.shift(),s=t_(n);return Promise.all(t.map(r=>s.run(()=>r(...e))))}function wc(t,e){for(const n of[...t])n(e)}class fw{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!s.allowDeprecated){let o=i.message;o||(o=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,r=(...i)=>(typeof s=="function"&&s(),s=void 0,r=void 0,n(...i));return s=this.hook(e,r),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const r of s)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Yc(e),s=Object.keys(n).map(r=>this.hook(r,n[r]));return()=>{for(const r of s.splice(0,s.length))r()}}removeHooks(e){const n=Yc(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(dw,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(hw,e,...n)}callHookWith(e,n,...s){const r=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&wc(this._before,r);const i=e(n in this._hooks?[...this._hooks[n]]:[],s);return i instanceof Promise?i.finally(()=>{this._after&&r&&wc(this._after,r)}):(this._after&&r&&wc(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function pw(){return new fw}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let n_;const Tl=t=>n_=t,s_=Symbol();function Xc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Wi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Wi||(Wi={}));function mw(){const t=Lm(!0),e=t.run(()=>oe({}));let n=[],s=[];const r=ju({install(i){Tl(r),r._a=i,i.provide(s_,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const r_=()=>{};function Af(t,e,n,s=r_){t.add(e);const r=()=>{t.delete(e)&&s()};return!n&&$m()&&G1(r),r}function Tr(t,...e){t.forEach(n=>{n(...e)})}const gw=t=>t(),Sf=Symbol(),Tc=Symbol();function Zc(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];Xc(r)&&Xc(s)&&t.hasOwnProperty(n)&&!lt(s)&&!Is(s)?t[n]=Zc(r,s):t[n]=s}return t}const _w=Symbol();function yw(t){return!Xc(t)||!Object.prototype.hasOwnProperty.call(t,_w)}const{assign:hs}=Object;function vw(t){return!!(lt(t)&&t.effect)}function bw(t,e,n,s){const{state:r,actions:i,getters:o}=e,l=n.state.value[t];let c;function u(){l||(n.state.value[t]=r?r():{});const h=_b(n.state.value[t]);return hs(h,i,Object.keys(o||{}).reduce((p,m)=>(p[m]=ju(Q(()=>{Tl(n);const _=n._s.get(t);return o[m].call(_,_)})),p),{}))}return c=i_(t,u,e,n,s,!0),c}function i_(t,e,n={},s,r,i){let o;const l=hs({actions:{}},n),c={deep:!0};let u,h,p=new Set,m=new Set,_;const w=s.state.value[t];!i&&!w&&(s.state.value[t]={}),oe({});let S;function P(T){let v;u=h=!1,typeof T=="function"?(T(s.state.value[t]),v={type:Wi.patchFunction,storeId:t,events:_}):(Zc(s.state.value[t],T),v={type:Wi.patchObject,payload:T,storeId:t,events:_});const C=S=Symbol();ti().then(()=>{S===C&&(u=!0)}),h=!0,Tr(p,v,s.state.value[t])}const N=i?function(){const{state:v}=n,C=v?v():{};this.$patch(R=>{hs(R,C)})}:r_;function B(){o.stop(),p.clear(),m.clear(),s._s.delete(t)}const M=(T,v="")=>{if(Sf in T)return T[Tc]=v,T;const C=function(){Tl(s);const R=Array.from(arguments),I=new Set,y=new Set;function G(fe){I.add(fe)}function be(fe){y.add(fe)}Tr(m,{args:R,name:C[Tc],store:J,after:G,onError:be});let Te;try{Te=T.apply(this&&this.$id===t?this:J,R)}catch(fe){throw Tr(y,fe),fe}return Te instanceof Promise?Te.then(fe=>(Tr(I,fe),fe)).catch(fe=>(Tr(y,fe),Promise.reject(fe))):(Tr(I,Te),Te)};return C[Sf]=!0,C[Tc]=v,C},H={_p:s,$id:t,$onAction:Af.bind(null,m),$patch:P,$reset:N,$subscribe(T,v={}){const C=Af(p,T,v.detached,()=>R()),R=o.run(()=>hn(()=>s.state.value[t],I=>{(v.flush==="sync"?h:u)&&T({storeId:t,type:Wi.direct,events:_},I)},hs({},c,v)));return C},$dispose:B},J=Ds(H);s._s.set(t,J);const k=(s._a&&s._a.runWithContext||gw)(()=>s._e.run(()=>(o=Lm()).run(()=>e({action:M}))));for(const T in k){const v=k[T];if(lt(v)&&!vw(v)||Is(v))i||(w&&yw(v)&&(lt(v)?v.value=w[T]:Zc(v,w[T])),s.state.value[t][T]=v);else if(typeof v=="function"){const C=M(v,T);k[T]=C,l.actions[T]=v}}return hs(J,k),hs($e(J),k),Object.defineProperty(J,"$state",{get:()=>s.state.value[t],set:T=>{P(v=>{hs(v,T)})}}),s._p.forEach(T=>{hs(J,o.run(()=>T({store:J,app:s._a,pinia:s,options:l})))}),w&&i&&n.hydrate&&n.hydrate(J.$state,w),u=!0,h=!0,J}/*! #__NO_SIDE_EFFECTS__ */function ed(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,l){const c=Kb();return o=o||(c?tn(s_,null):null),o&&Tl(o),o=n_,o._s.has(t)||(r?i_(t,e,s,o):bw(t,s,o)),o._s.get(t)}return i.$id=t,i}const Ew=new Set(["title","titleTemplate","script","style","noscript"]),Ea=new Set(["base","meta","link","style","script","noscript"]),ww=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),Tw=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),o_=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),Iw=typeof window<"u";function ja(t){let e=9;for(let n=0;n<t.length;)e=Math.imul(e^t.charCodeAt(n++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function eu(t){if(t._h)return t._h;if(t._d)return ja(t._d);let e=`${t.tag}:${t.textContent||t.innerHTML||""}:`;for(const n in t.props)e+=`${n}:${String(t.props[n])},`;return ja(e)}function Aw(t,e){return t instanceof Promise?t.then(e):e(t)}function tu(t,e,n,s){const r=s||l_(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},t==="templateParams"||t==="titleTemplate");if(r instanceof Promise)return r.then(o=>tu(t,e,n,o));const i={tag:t,props:r};for(const o of o_){const l=i.props[o]!==void 0?i.props[o]:n[o];l!==void 0&&((!(o==="innerHTML"||o==="textContent"||o==="children")||Ew.has(i.tag))&&(i[o==="children"?"innerHTML":o]=l),delete i.props[o])}return i.props.body&&(i.tagPosition="bodyClose",delete i.props.body),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(o=>({...i,props:{...i.props,content:o}})):i}function Sw(t,e){var s;const n=t==="class"?" ":";";return e&&typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,r])=>r).map(([r,i])=>t==="style"?`${r}:${i}`:r)),(s=String(Array.isArray(e)?e.join(n):e))==null?void 0:s.split(n).filter(r=>!!r.trim()).join(n)}function a_(t,e,n,s){for(let r=s;r<n.length;r+=1){const i=n[r];if(i==="class"||i==="style"){t[i]=Sw(i,t[i]);continue}if(t[i]instanceof Promise)return t[i].then(o=>(t[i]=o,a_(t,e,n,r)));if(!e&&!o_.has(i)){const o=String(t[i]),l=i.startsWith("data-");o==="true"||o===""?t[i]=l?"true":!0:t[i]||(l&&o==="false"?t[i]="false":delete t[i])}}}function l_(t,e=!1){const n=a_(t,e,Object.keys(t),0);return n instanceof Promise?n.then(()=>t):t}const Cw=10;function c_(t,e,n){for(let s=n;s<e.length;s+=1){const r=e[s];if(r instanceof Promise)return r.then(i=>(e[s]=i,c_(t,e,s)));Array.isArray(r)?t.push(...r):t.push(r)}}function Rw(t){const e=[],n=t.resolvedInput;for(const r in n){if(!Object.prototype.hasOwnProperty.call(n,r))continue;const i=n[r];if(!(i===void 0||!ww.has(r))){if(Array.isArray(i)){for(const o of i)e.push(tu(r,o,t));continue}e.push(tu(r,i,t))}}if(e.length===0)return[];const s=[];return Aw(c_(s,e,0),()=>s.map((r,i)=>(r._e=t._i,t.mode&&(r._m=t.mode),r._p=(t._i<<Cw)+i,r)))}const Cf=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),Rf={base:-10,title:10},kf={critical:-80,high:-10,low:20};function qa(t){const e=t.tagPriority;if(typeof e=="number")return e;let n=100;return t.tag==="meta"?t.props["http-equiv"]==="content-security-policy"?n=-30:t.props.charset?n=-20:t.props.name==="viewport"&&(n=-15):t.tag==="link"&&t.props.rel==="preconnect"?n=20:t.tag in Rf&&(n=Rf[t.tag]),e&&e in kf?n+kf[e]:n}const kw=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],Pw=["name","property","http-equiv"];function u_(t){const{props:e,tag:n}=t;if(Tw.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(e.id)return`${n}:id:${e.id}`;for(const s of Pw)if(e[s]!==void 0)return`${n}:${s}:${e[s]}`;return!1}const ms="%separator";function Vw(t,e,n=!1){var r;let s;if(e==="s"||e==="pageTitle")s=t.pageTitle;else if(e.includes(".")){const i=e.indexOf(".");s=(r=t[e.substring(0,i)])==null?void 0:r[e.substring(i+1)]}else s=t[e];if(s!==void 0)return n?(s||"").replace(/"/g,'\\"'):s||""}const Dw=new RegExp(`${ms}(?:\\s*${ms})*`,"g");function ra(t,e,n,s=!1){if(typeof t!="string"||!t.includes("%"))return t;let r=t;try{r=decodeURI(t)}catch{}const i=r.match(/%\w+(?:\.\w+)?/g);if(!i)return t;const o=t.includes(ms);return t=t.replace(/%\w+(?:\.\w+)?/g,l=>{if(l===ms||!i.includes(l))return l;const c=Vw(e,l.slice(1),s);return c!==void 0?c:l}).trim(),o&&(t.endsWith(ms)&&(t=t.slice(0,-ms.length)),t.startsWith(ms)&&(t=t.slice(ms.length)),t=t.replace(Dw,n).trim()),t}function Pf(t,e){return t==null?e||null:typeof t=="function"?t(e):t}async function Ow(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async r=>{var p;const i=(await t.resolveTags()).map(m=>({tag:m,id:Ea.has(m.tag)?eu(m):m.tag,shouldRender:!0}));let o=t._dom;if(!o){o={elMap:{htmlAttrs:n.documentElement,bodyAttrs:n.body}};const m=new Set;for(const _ of["body","head"]){const w=(p=n[_])==null?void 0:p.children;for(const S of w){const P=S.tagName.toLowerCase();if(!Ea.has(P))continue;const N={tag:P,props:await l_(S.getAttributeNames().reduce((J,ne)=>({...J,[ne]:S.getAttribute(ne)}),{})),innerHTML:S.innerHTML},B=u_(N);let M=B,H=1;for(;M&&m.has(M);)M=`${B}:${H++}`;M&&(N._d=M,m.add(M)),o.elMap[S.getAttribute("data-hid")||eu(N)]=S}}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};function l(m,_,w){const S=`${m}:${_}`;o.sideEffects[S]=w,delete o.pendingSideEffects[S]}function c({id:m,$el:_,tag:w}){const S=w.tag.endsWith("Attrs");if(o.elMap[m]=_,S||(w.textContent&&w.textContent!==_.textContent&&(_.textContent=w.textContent),w.innerHTML&&w.innerHTML!==_.innerHTML&&(_.innerHTML=w.innerHTML),l(m,"el",()=>{var P;(P=o.elMap[m])==null||P.remove(),delete o.elMap[m]})),w._eventHandlers)for(const P in w._eventHandlers)Object.prototype.hasOwnProperty.call(w._eventHandlers,P)&&_.getAttribute(`data-${P}`)!==""&&((w.tag==="bodyAttrs"?n.defaultView:_).addEventListener(P.substring(2),w._eventHandlers[P].bind(_)),_.setAttribute(`data-${P}`,""));for(const P in w.props){if(!Object.prototype.hasOwnProperty.call(w.props,P))continue;const N=w.props[P],B=`attr:${P}`;if(P==="class"){if(!N)continue;for(const M of N.split(" "))S&&l(m,`${B}:${M}`,()=>_.classList.remove(M)),!_.classList.contains(M)&&_.classList.add(M)}else if(P==="style"){if(!N)continue;for(const M of N.split(";")){const H=M.indexOf(":"),J=M.substring(0,H).trim(),ne=M.substring(H+1).trim();l(m,`${B}:${J}`,()=>{_.style.removeProperty(J)}),_.style.setProperty(J,ne)}}else _.getAttribute(P)!==N&&_.setAttribute(P,N===!0?"":String(N)),S&&l(m,B,()=>_.removeAttribute(P))}}const u=[],h={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const m of i){const{tag:_,shouldRender:w,id:S}=m;if(w){if(_.tag==="title"){n.title=_.textContent;continue}m.$el=m.$el||o.elMap[S],m.$el?c(m):Ea.has(_.tag)&&u.push(m)}}for(const m of u){const _=m.tag.tagPosition||"head";m.$el=n.createElement(m.tag.tag),c(m),h[_]=h[_]||n.createDocumentFragment(),h[_].appendChild(m.$el)}for(const m of i)await t.hooks.callHook("dom:renderTag",m,n,l);h.head&&n.head.appendChild(h.head),h.bodyOpen&&n.body.insertBefore(h.bodyOpen,n.body.firstChild),h.bodyClose&&n.body.appendChild(h.bodyClose);for(const m in o.pendingSideEffects)o.pendingSideEffects[m]();t._dom=o,await t.hooks.callHook("dom:rendered",{renders:i}),r()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function Nw(t,e={}){const n=e.delayFn||(s=>setTimeout(s,10));return t._domDebouncedUpdatePromise=t._domDebouncedUpdatePromise||new Promise(s=>n(()=>Ow(t,e).then(()=>{delete t._domDebouncedUpdatePromise,s()})))}function xw(t){return e=>{var s,r;const n=((r=(s=e.resolvedOptions.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:r.innerHTML)||!1;return n&&e.push(JSON.parse(n)),{mode:"client",hooks:{"entries:updated":i=>{Nw(i,t)}}}}}const Mw=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Lw={hooks:{"tag:normalise":({tag:t})=>{t.props.hid&&(t.key=t.props.hid,delete t.props.hid),t.props.vmid&&(t.key=t.props.vmid,delete t.props.vmid),t.props.key&&(t.key=t.props.key,delete t.props.key);const e=u_(t);e&&!e.startsWith("meta:og:")&&!e.startsWith("meta:twitter:")&&delete t.key;const n=e||(t.key?`${t.tag}:${t.key}`:!1);n&&(t._d=n)},"tags:resolve":t=>{const e=Object.create(null);for(const s of t.tags){const r=(s.key?`${s.tag}:${s.key}`:s._d)||eu(s),i=e[r];if(i){let l=s==null?void 0:s.tagDuplicateStrategy;if(!l&&Mw.has(s.tag)&&(l="merge"),l==="merge"){const c=i.props;c.style&&s.props.style&&(c.style[c.style.length-1]!==";"&&(c.style+=";"),s.props.style=`${c.style} ${s.props.style}`),c.class&&s.props.class?s.props.class=`${c.class} ${s.props.class}`:c.class&&(s.props.class=c.class),e[r].props={...c,...s.props};continue}else if(s._e===i._e){i._duped=i._duped||[],s._d=`${i._d}:${i._duped.length+1}`,i._duped.push(s);continue}else if(qa(s)>qa(i))continue}if(!(s.innerHTML||s.textContent||Object.keys(s.props).length!==0)&&Ea.has(s.tag)){delete e[r];continue}e[r]=s}const n=[];for(const s in e){const r=e[s],i=r._duped;n.push(r),i&&(delete r._duped,n.push(...i))}t.tags=n,t.tags=t.tags.filter(s=>!(s.tag==="meta"&&(s.props.name||s.props.property)&&!s.props.content))}}},$w=new Set(["script","link","bodyAttrs"]),Fw=t=>({hooks:{"tags:resolve":e=>{for(const n of e.tags){if(!$w.has(n.tag))continue;const s=n.props;for(const r in s){if(r[0]!=="o"||r[1]!=="n"||!Object.prototype.hasOwnProperty.call(s,r))continue;const i=s[r];typeof i=="function"&&(t.ssr&&Cf.has(r)?s[r]=`this.dataset.${r}fired = true`:delete s[r],n._eventHandlers=n._eventHandlers||{},n._eventHandlers[r]=i)}t.ssr&&n._eventHandlers&&(n.props.src||n.props.href)&&(n.key=n.key||ja(n.props.src||n.props.href))}},"dom:renderTag":({$el:e,tag:n})=>{var r,i;const s=e==null?void 0:e.dataset;if(s)for(const o in s){if(!o.endsWith("fired"))continue;const l=o.slice(0,-5);Cf.has(l)&&((i=(r=n._eventHandlers)==null?void 0:r[l])==null||i.call(e,new Event(l.substring(2))))}}}}),Uw=new Set(["link","style","script","noscript"]),Bw={hooks:{"tag:normalise":({tag:t})=>{t.key&&Uw.has(t.tag)&&(t.props["data-hid"]=t._h=ja(t.key))}}},jw={mode:"server",hooks:{"tags:beforeResolve":t=>{const e={};let n=!1;for(const s of t.tags)s._m!=="server"||s.tag!=="titleTemplate"&&s.tag!=="templateParams"&&s.tag!=="title"||(e[s.tag]=s.tag==="title"||s.tag==="titleTemplate"?s.textContent:s.props,n=!0);n&&t.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},qw={hooks:{"tags:resolve":t=>{var e;for(const n of t.tags)if(typeof n.tagPriority=="string")for(const{prefix:s,offset:r}of kw){if(!n.tagPriority.startsWith(s))continue;const i=n.tagPriority.substring(s.length),o=(e=t.tags.find(l=>l._d===i))==null?void 0:e._p;if(o!==void 0){n._p=o+r;break}}t.tags.sort((n,s)=>{const r=qa(n),i=qa(s);return r<i?-1:r>i?1:n._p-s._p})}}},Hw={meta:"content",link:"href",htmlAttrs:"lang"},zw=["innerHTML","textContent"],Ww=t=>({hooks:{"tags:resolve":e=>{var o;const{tags:n}=e;let s;for(let l=0;l<n.length;l+=1)n[l].tag==="templateParams"&&(s=e.tags.splice(l,1)[0].props,l-=1);const r=s||{},i=r.separator||"|";delete r.separator,r.pageTitle=ra(r.pageTitle||((o=n.find(l=>l.tag==="title"))==null?void 0:o.textContent)||"",r,i);for(const l of n){if(l.processTemplateParams===!1)continue;const c=Hw[l.tag];if(c&&typeof l.props[c]=="string")l.props[c]=ra(l.props[c],r,i);else if(l.processTemplateParams||l.tag==="titleTemplate"||l.tag==="title")for(const u of zw)typeof l[u]=="string"&&(l[u]=ra(l[u],r,i,l.tag==="script"&&l.props.type.endsWith("json")))}t._templateParams=r,t._separator=i},"tags:afterResolve":({tags:e})=>{let n;for(let s=0;s<e.length;s+=1){const r=e[s];r.tag==="title"&&r.processTemplateParams!==!1&&(n=r)}n!=null&&n.textContent&&(n.textContent=ra(n.textContent,t._templateParams,t._separator))}}}),Kw={hooks:{"tags:resolve":t=>{const{tags:e}=t;let n,s;for(let r=0;r<e.length;r+=1){const i=e[r];i.tag==="title"?n=i:i.tag==="titleTemplate"&&(s=i)}if(s&&n){const r=Pf(s.textContent,n.textContent);r!==null?n.textContent=r||n.textContent:t.tags.splice(t.tags.indexOf(n),1)}else if(s){const r=Pf(s.textContent);r!==null&&(s.textContent=r,s.tag="title",s=void 0)}s&&t.tags.splice(t.tags.indexOf(s),1)}}},Gw={hooks:{"tags:afterResolve":t=>{for(const e of t.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&(e.props.type==="application/ld+json"||e.props.type==="application/json")?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let d_;function Qw(t={}){const e=Jw(t);return e.use(xw()),d_=e}function Vf(t,e){return!t||t==="server"&&e||t==="client"&&!e}function Jw(t={}){const e=pw();e.addHooks(t.hooks||{}),t.document=t.document||(Iw?document:void 0);const n=!t.document,s=()=>{l.dirty=!0,e.callHook("entries:updated",l)};let r=0,i=[];const o=[],l={plugins:o,dirty:!1,resolvedOptions:t,hooks:e,headEntries(){return i},use(c){const u=typeof c=="function"?c(l):c;(!u.key||!o.some(h=>h.key===u.key))&&(o.push(u),Vf(u.mode,n)&&e.addHooks(u.hooks||{}))},push(c,u){u==null||delete u.head;const h={_i:r++,input:c,...u};return Vf(h.mode,n)&&(i.push(h),s()),{dispose(){i=i.filter(p=>p._i!==h._i),s()},patch(p){for(const m of i)m._i===h._i&&(m.input=h.input=p);s()}}},async resolveTags(){const c={tags:[],entries:[...i]};await e.callHook("entries:resolve",c);for(const u of c.entries){const h=u.resolvedInput||u.input;if(u.resolvedInput=await(u.transform?u.transform(h):h),u.resolvedInput)for(const p of await Rw(u)){const m={tag:p,entry:u,resolvedOptions:l.resolvedOptions};await e.callHook("tag:normalise",m),c.tags.push(m.tag)}}return await e.callHook("tags:beforeResolve",c),await e.callHook("tags:resolve",c),await e.callHook("tags:afterResolve",c),c.tags},ssr:n};return[Lw,jw,Fw,Bw,qw,Ww,Kw,Gw,...(t==null?void 0:t.plugins)||[]].forEach(c=>l.use(c)),l.hooks.callHook("init",l),l}function Yw(){return d_}const Xw=Wg[0]==="3";function Zw(t){return typeof t=="function"?t():Oe(t)}function Ha(t){if(t instanceof Promise||t instanceof Date||t instanceof RegExp)return t;const e=Zw(t);if(!t||!e)return e;if(Array.isArray(e))return e.map(n=>Ha(n));if(typeof e=="object"){const n={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(s==="titleTemplate"||s[0]==="o"&&s[1]==="n"){n[s]=Oe(e[s]);continue}n[s]=Ha(e[s])}return n}return e}const eT={hooks:{"entries:resolve":t=>{for(const e of t.entries)e.resolvedInput=Ha(e.input)}}},h_="usehead";function tT(t){return{install(n){Xw&&(n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(h_,t))}}.install}function nT(t={}){t.domDelayFn=t.domDelayFn||(n=>ti(()=>setTimeout(()=>n(),0)));const e=Qw(t);return e.use(eT),e.install=tT(e),e}const Df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Of="__unhead_injection_handler__";function sT(){return Of in Df?Df[Of]():tn(h_)||Yw()}function Ln(t,e={}){const n=e.head||sT();if(n)return n.ssr?n.push(t,e):rT(n,t,e)}function rT(t,e,n={}){const s=oe(!1),r=oe({});oE(()=>{r.value=s.value?{}:Ha(e)});const i=t.push(r.value,n);return hn(r,l=>{i.patch(l)}),Co()&&(zu(()=>{i.dispose()}),bg(()=>{s.value=!0}),vg(()=>{s.value=!1})),i}function iT(t){const e=t;return e.headTags=t.resolveTags,e.addEntry=t.push,e.addHeadObjs=t.push,e.addReactiveEntry=(n,s)=>{const r=Ln(n,s);return r!==void 0?r.dispose:()=>{}},e.removeHeadObjs=()=>{},e.updateDOM=()=>{t.hooks.callHook("entries:updated",t)},e.unhead=t,e}function oT(t,e){const n=nT({});return iT(n)}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ar=typeof document<"u";function f_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function aT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&f_(t.default)}const je=Object.assign;function Ic(t,e){const n={};for(const s in e){const r=e[s];n[s]=mn(r)?r.map(t):t(r)}return n}const Ki=()=>{},mn=Array.isArray,p_=/#/g,lT=/&/g,cT=/\//g,uT=/=/g,dT=/\?/g,m_=/\+/g,hT=/%5B/g,fT=/%5D/g,g_=/%5E/g,pT=/%60/g,__=/%7B/g,mT=/%7C/g,y_=/%7D/g,gT=/%20/g;function td(t){return encodeURI(""+t).replace(mT,"|").replace(hT,"[").replace(fT,"]")}function _T(t){return td(t).replace(__,"{").replace(y_,"}").replace(g_,"^")}function nu(t){return td(t).replace(m_,"%2B").replace(gT,"+").replace(p_,"%23").replace(lT,"%26").replace(pT,"`").replace(__,"{").replace(y_,"}").replace(g_,"^")}function yT(t){return nu(t).replace(uT,"%3D")}function vT(t){return td(t).replace(p_,"%23").replace(dT,"%3F")}function bT(t){return t==null?"":vT(t).replace(cT,"%2F")}function ho(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const ET=/\/$/,wT=t=>t.replace(ET,"");function Ac(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),r=t(i)),l>-1&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=ST(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:ho(o)}}function TT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Nf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function IT(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Hr(e.matched[s],n.matched[r])&&v_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Hr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function v_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!AT(t[n],e[n]))return!1;return!0}function AT(t,e){return mn(t)?xf(t,e):mn(e)?xf(e,t):t===e}function xf(t,e){return mn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function ST(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ls={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var fo;(function(t){t.pop="pop",t.push="push"})(fo||(fo={}));var Gi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Gi||(Gi={}));function CT(t){if(!t)if(Ar){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),wT(t)}const RT=/^[^#]+#/;function kT(t,e){return t.replace(RT,"#")+e}function PT(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Il=()=>({left:window.scrollX,top:window.scrollY});function VT(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=PT(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Mf(t,e){return(history.state?history.state.position-e:-1)+t}const su=new Map;function DT(t,e){su.set(t,e)}function OT(t){const e=su.get(t);return su.delete(t),e}let NT=()=>location.protocol+"//"+location.host;function b_(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let l=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(l);return c[0]!=="/"&&(c="/"+c),Nf(c,"")}return Nf(n,t)+s+r}function xT(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const _=b_(t,location),w=n.value,S=e.value;let P=0;if(m){if(n.value=_,e.value=m,o&&o===w){o=null;return}P=S?m.position-S.position:0}else s(_);r.forEach(N=>{N(n.value,w,{delta:P,type:fo.pop,direction:P?P>0?Gi.forward:Gi.back:Gi.unknown})})};function c(){o=n.value}function u(m){r.push(m);const _=()=>{const w=r.indexOf(m);w>-1&&r.splice(w,1)};return i.push(_),_}function h(){const{history:m}=window;m.state&&m.replaceState(je({},m.state,{scroll:Il()}),"")}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:p}}function Lf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Il():null}}function MT(t){const{history:e,location:n}=window,s={value:b_(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:NT()+t+c;try{e[h?"replaceState":"pushState"](u,"",m),r.value=u}catch(_){console.error(_),n[h?"replace":"assign"](m)}}function o(c,u){const h=je({},e.state,Lf(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,h,!0),s.value=c}function l(c,u){const h=je({},r.value,e.state,{forward:c,scroll:Il()});i(h.current,h,!0);const p=je({},Lf(s.value,c,null),{position:h.position+1},u);i(c,p,!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function LT(t){t=CT(t);const e=MT(t),n=xT(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=je({location:"",base:t,go:s,createHref:kT.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function $T(t){return typeof t=="string"||t&&typeof t=="object"}function E_(t){return typeof t=="string"||typeof t=="symbol"}const w_=Symbol("");var $f;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})($f||($f={}));function zr(t,e){return je(new Error,{type:t,[w_]:!0},e)}function Fn(t,e){return t instanceof Error&&w_ in t&&(e==null||!!(t.type&e))}const Ff="[^/]+?",FT={sensitive:!1,strict:!1,start:!0,end:!0},UT=/[.+*?^${}()[\]/\\]/g;function BT(t,e){const n=je({},FT,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let p=0;p<u.length;p++){const m=u[p];let _=40+(n.sensitive?.25:0);if(m.type===0)p||(r+="/"),r+=m.value.replace(UT,"\\$&"),_+=40;else if(m.type===1){const{value:w,repeatable:S,optional:P,regexp:N}=m;i.push({name:w,repeatable:S,optional:P});const B=N||Ff;if(B!==Ff){_+=10;try{new RegExp(`(${B})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${w}" (${B}): `+H.message)}}let M=S?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(M=P&&u.length<2?`(?:/${M})`:"/"+M),P&&(M+="?"),r+=M,_+=20,P&&(_+=-8),S&&(_+=-20),B===".*"&&(_+=-50)}h.push(_)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const h=u.match(o),p={};if(!h)return null;for(let m=1;m<h.length;m++){const _=h[m]||"",w=i[m-1];p[w.name]=_&&w.repeatable?_.split("/"):_}return p}function c(u){let h="",p=!1;for(const m of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const _ of m)if(_.type===0)h+=_.value;else if(_.type===1){const{value:w,repeatable:S,optional:P}=_,N=w in u?u[w]:"";if(mn(N)&&!S)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const B=mn(N)?N.join("/"):N;if(!B)if(P)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${w}"`);h+=B}}return h||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function jT(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function T_(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=jT(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Uf(s))return 1;if(Uf(r))return-1}return r.length-s.length}function Uf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const qT={type:0,value:""},HT=/[a-zA-Z0-9_]/;function zT(t){if(!t)return[[]];if(t==="/")return[[qT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",h="";function p(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(u&&p(),o()):c===":"?(p(),n=1):m();break;case 4:m(),n=s;break;case 1:c==="("?n=2:HT.test(c)?m():(p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),r}function WT(t,e,n){const s=BT(zT(t.path),n),r=je(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function KT(t,e){const n=[],s=new Map;e=Hf({strict:!1,end:!0,sensitive:!1},e);function r(p){return s.get(p)}function i(p,m,_){const w=!_,S=jf(p);S.aliasOf=_&&_.record;const P=Hf(e,p),N=[S];if("alias"in p){const H=typeof p.alias=="string"?[p.alias]:p.alias;for(const J of H)N.push(jf(je({},S,{components:_?_.record.components:S.components,path:J,aliasOf:_?_.record:S})))}let B,M;for(const H of N){const{path:J}=H;if(m&&J[0]!=="/"){const ne=m.record.path,k=ne[ne.length-1]==="/"?"":"/";H.path=m.record.path+(J&&k+J)}if(B=WT(H,m,P),_?_.alias.push(B):(M=M||B,M!==B&&M.alias.push(B),w&&p.name&&!qf(B)&&o(p.name)),I_(B)&&c(B),S.children){const ne=S.children;for(let k=0;k<ne.length;k++)i(ne[k],B,_&&_.children[k])}_=_||B}return M?()=>{o(M)}:Ki}function o(p){if(E_(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const m=JT(p,n);n.splice(m,0,p),p.record.name&&!qf(p)&&s.set(p.record.name,p)}function u(p,m){let _,w={},S,P;if("name"in p&&p.name){if(_=s.get(p.name),!_)throw zr(1,{location:p});P=_.record.name,w=je(Bf(m.params,_.keys.filter(M=>!M.optional).concat(_.parent?_.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),p.params&&Bf(p.params,_.keys.map(M=>M.name))),S=_.stringify(w)}else if(p.path!=null)S=p.path,_=n.find(M=>M.re.test(S)),_&&(w=_.parse(S),P=_.record.name);else{if(_=m.name?s.get(m.name):n.find(M=>M.re.test(m.path)),!_)throw zr(1,{location:p,currentLocation:m});P=_.record.name,w=je({},m.params,p.params),S=_.stringify(w)}const N=[];let B=_;for(;B;)N.unshift(B.record),B=B.parent;return{name:P,path:S,params:w,matched:N,meta:QT(N)}}t.forEach(p=>i(p));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:r}}function Bf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function jf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:GT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function GT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function qf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function QT(t){return t.reduce((e,n)=>je(e,n.meta),{})}function Hf(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function JT(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;T_(t,e[i])<0?s=i:n=i+1}const r=YT(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function YT(t){let e=t;for(;e=e.parent;)if(I_(e)&&T_(t,e)===0)return e}function I_({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function XT(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(m_," "),o=i.indexOf("="),l=ho(o<0?i:i.slice(0,o)),c=o<0?null:ho(i.slice(o+1));if(l in e){let u=e[l];mn(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function zf(t){let e="";for(let n in t){const s=t[n];if(n=yT(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(mn(s)?s.map(i=>i&&nu(i)):[s&&nu(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function ZT(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=mn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const eI=Symbol(""),Wf=Symbol(""),Al=Symbol(""),nd=Symbol(""),ru=Symbol("");function Vi(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function gs(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(zr(4,{from:n,to:e})):m instanceof Error?c(m):$T(m)?c(zr(2,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let p=Promise.resolve(h);t.length<3&&(p=p.then(u)),p.catch(m=>c(m))})}function Sc(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(f_(c)){const h=(c.__vccOpts||c)[e];h&&i.push(gs(h,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=aT(h)?h.default:h;o.mods[l]=h,o.components[l]=p;const _=(p.__vccOpts||p)[e];return _&&gs(_,n,s,o,l,r)()}))}}return i}function Kf(t){const e=tn(Al),n=tn(nd),s=Q(()=>{const c=Oe(t.to);return e.resolve(c)}),r=Q(()=>{const{matched:c}=s.value,{length:u}=c,h=c[u-1],p=n.matched;if(!h||!p.length)return-1;const m=p.findIndex(Hr.bind(null,h));if(m>-1)return m;const _=Gf(c[u-2]);return u>1&&Gf(h)===_&&p[p.length-1].path!==_?p.findIndex(Hr.bind(null,c[u-2])):m}),i=Q(()=>r.value>-1&&iI(n.params,s.value.params)),o=Q(()=>r.value>-1&&r.value===n.matched.length-1&&v_(n.params,s.value.params));function l(c={}){if(rI(c)){const u=e[Oe(t.replace)?"replace":"push"](Oe(t.to)).catch(Ki);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Q(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function tI(t){return t.length===1?t[0]:t}const nI=_g({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Kf,setup(t,{slots:e}){const n=Ds(Kf(t)),{options:s}=tn(Al),r=Q(()=>({[Qf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Qf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&tI(e.default(n));return t.custom?i:Xu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),sI=nI;function rI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function iI(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!mn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Gf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qf=(t,e,n)=>t??e??n,oI=_g({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=tn(ru),r=Q(()=>t.route||s.value),i=tn(Wf,0),o=Q(()=>{let u=Oe(i);const{matched:h}=r.value;let p;for(;(p=h[u])&&!p.components;)u++;return u}),l=Q(()=>r.value.matched[o.value]);_a(Wf,Q(()=>o.value+1)),_a(eI,l),_a(ru,r);const c=oe();return hn(()=>[c.value,l.value,t.name],([u,h,p],[m,_,w])=>{h&&(h.instances[p]=u,_&&_!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=_.leaveGuards),h.updateGuards.size||(h.updateGuards=_.updateGuards))),u&&h&&(!_||!Hr(h,_)||!m)&&(h.enterCallbacks[p]||[]).forEach(S=>S(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,p=l.value,m=p&&p.components[h];if(!m)return Jf(n.default,{Component:m,route:u});const _=p.props[h],w=_?_===!0?u.params:typeof _=="function"?_(u):_:null,P=Xu(m,je({},w,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(p.instances[h]=null)},ref:c}));return Jf(n.default,{Component:P,route:u})||P}}});function Jf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const aI=oI;function lI(t){const e=KT(t.routes,t),n=t.parseQuery||XT,s=t.stringifyQuery||zf,r=t.history,i=Vi(),o=Vi(),l=Vi(),c=pb(ls);let u=ls;Ar&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ic.bind(null,O=>""+O),p=Ic.bind(null,bT),m=Ic.bind(null,ho);function _(O,ee){let te,he;return E_(O)?(te=e.getRecordMatcher(O),he=ee):he=O,e.addRoute(he,te)}function w(O){const ee=e.getRecordMatcher(O);ee&&e.removeRoute(ee)}function S(){return e.getRoutes().map(O=>O.record)}function P(O){return!!e.getRecordMatcher(O)}function N(O,ee){if(ee=je({},ee||c.value),typeof O=="string"){const V=Ac(n,O,ee.path),j=e.resolve({path:V.path},ee),q=r.createHref(V.fullPath);return je(V,j,{params:m(j.params),hash:ho(V.hash),redirectedFrom:void 0,href:q})}let te;if(O.path!=null)te=je({},O,{path:Ac(n,O.path,ee.path).path});else{const V=je({},O.params);for(const j in V)V[j]==null&&delete V[j];te=je({},O,{params:p(V)}),ee.params=p(ee.params)}const he=e.resolve(te,ee),Be=O.hash||"";he.params=h(m(he.params));const E=TT(s,je({},O,{hash:_T(Be),path:he.path})),A=r.createHref(E);return je({fullPath:E,hash:Be,query:s===zf?ZT(O.query):O.query||{}},he,{redirectedFrom:void 0,href:A})}function B(O){return typeof O=="string"?Ac(n,O,c.value.path):je({},O)}function M(O,ee){if(u!==O)return zr(8,{from:ee,to:O})}function H(O){return k(O)}function J(O){return H(je(B(O),{replace:!0}))}function ne(O){const ee=O.matched[O.matched.length-1];if(ee&&ee.redirect){const{redirect:te}=ee;let he=typeof te=="function"?te(O):te;return typeof he=="string"&&(he=he.includes("?")||he.includes("#")?he=B(he):{path:he},he.params={}),je({query:O.query,hash:O.hash,params:he.path!=null?{}:O.params},he)}}function k(O,ee){const te=u=N(O),he=c.value,Be=O.state,E=O.force,A=O.replace===!0,V=ne(te);if(V)return k(je(B(V),{state:typeof V=="object"?je({},Be,V.state):Be,force:E,replace:A}),ee||te);const j=te;j.redirectedFrom=ee;let q;return!E&&IT(s,he,te)&&(q=zr(16,{to:j,from:he}),Se(he,he,!0,!1)),(q?Promise.resolve(q):C(j,he)).catch(z=>Fn(z)?Fn(z,2)?z:Tt(z):Ie(z,j,he)).then(z=>{if(z){if(Fn(z,2))return k(je({replace:A},B(z.to),{state:typeof z.to=="object"?je({},Be,z.to.state):Be,force:E}),ee||j)}else z=I(j,he,!0,A,Be);return R(j,he,z),z})}function T(O,ee){const te=M(O,ee);return te?Promise.reject(te):Promise.resolve()}function v(O){const ee=ht.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(O):O()}function C(O,ee){let te;const[he,Be,E]=cI(O,ee);te=Sc(he.reverse(),"beforeRouteLeave",O,ee);for(const V of he)V.leaveGuards.forEach(j=>{te.push(gs(j,O,ee))});const A=T.bind(null,O,ee);return te.push(A),et(te).then(()=>{te=[];for(const V of i.list())te.push(gs(V,O,ee));return te.push(A),et(te)}).then(()=>{te=Sc(Be,"beforeRouteUpdate",O,ee);for(const V of Be)V.updateGuards.forEach(j=>{te.push(gs(j,O,ee))});return te.push(A),et(te)}).then(()=>{te=[];for(const V of E)if(V.beforeEnter)if(mn(V.beforeEnter))for(const j of V.beforeEnter)te.push(gs(j,O,ee));else te.push(gs(V.beforeEnter,O,ee));return te.push(A),et(te)}).then(()=>(O.matched.forEach(V=>V.enterCallbacks={}),te=Sc(E,"beforeRouteEnter",O,ee,v),te.push(A),et(te))).then(()=>{te=[];for(const V of o.list())te.push(gs(V,O,ee));return te.push(A),et(te)}).catch(V=>Fn(V,8)?V:Promise.reject(V))}function R(O,ee,te){l.list().forEach(he=>v(()=>he(O,ee,te)))}function I(O,ee,te,he,Be){const E=M(O,ee);if(E)return E;const A=ee===ls,V=Ar?history.state:{};te&&(he||A?r.replace(O.fullPath,je({scroll:A&&V&&V.scroll},Be)):r.push(O.fullPath,Be)),c.value=O,Se(O,ee,te,A),Tt()}let y;function G(){y||(y=r.listen((O,ee,te)=>{if(!It.listening)return;const he=N(O),Be=ne(he);if(Be){k(je(Be,{replace:!0,force:!0}),he).catch(Ki);return}u=he;const E=c.value;Ar&&DT(Mf(E.fullPath,te.delta),Il()),C(he,E).catch(A=>Fn(A,12)?A:Fn(A,2)?(k(je(B(A.to),{force:!0}),he).then(V=>{Fn(V,20)&&!te.delta&&te.type===fo.pop&&r.go(-1,!1)}).catch(Ki),Promise.reject()):(te.delta&&r.go(-te.delta,!1),Ie(A,he,E))).then(A=>{A=A||I(he,E,!1),A&&(te.delta&&!Fn(A,8)?r.go(-te.delta,!1):te.type===fo.pop&&Fn(A,20)&&r.go(-1,!1)),R(he,E,A)}).catch(Ki)}))}let be=Vi(),Te=Vi(),fe;function Ie(O,ee,te){Tt(O);const he=Te.list();return he.length?he.forEach(Be=>Be(O,ee,te)):console.error(O),Promise.reject(O)}function st(){return fe&&c.value!==ls?Promise.resolve():new Promise((O,ee)=>{be.add([O,ee])})}function Tt(O){return fe||(fe=!O,G(),be.list().forEach(([ee,te])=>O?te(O):ee()),be.reset()),O}function Se(O,ee,te,he){const{scrollBehavior:Be}=t;if(!Ar||!Be)return Promise.resolve();const E=!te&&OT(Mf(O.fullPath,0))||(he||!te)&&history.state&&history.state.scroll||null;return ti().then(()=>Be(O,ee,E)).then(A=>A&&VT(A)).catch(A=>Ie(A,O,ee))}const x=O=>r.go(O);let _t;const ht=new Set,It={currentRoute:c,listening:!0,addRoute:_,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:S,resolve:N,options:t,push:H,replace:J,go:x,back:()=>x(-1),forward:()=>x(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Te.add,isReady:st,install(O){const ee=this;O.component("RouterLink",sI),O.component("RouterView",aI),O.config.globalProperties.$router=ee,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>Oe(c)}),Ar&&!_t&&c.value===ls&&(_t=!0,H(r.location).catch(Be=>{}));const te={};for(const Be in ls)Object.defineProperty(te,Be,{get:()=>c.value[Be],enumerable:!0});O.provide(Al,ee),O.provide(nd,Zm(te)),O.provide(ru,c);const he=O.unmount;ht.add(O),O.unmount=function(){ht.delete(O),ht.size<1&&(u=ls,y&&y(),y=null,c.value=ls,_t=!1,fe=!1),he()}}};function et(O){return O.reduce((ee,te)=>ee.then(()=>v(te)),Promise.resolve())}return It}function cI(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>Hr(u,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>Hr(u,c))||r.push(c))}return[n,s,r]}function A_(){return tn(Al)}function S_(t){return tn(nd)}const js=ed("ui",()=>{const t=oe(!1),e=oe(!1),n=oe(!1),s=oe(null),r=oe([]),i=oe(!1),o=oe(!1);function l(){t.value=!t.value,t.value&&(e.value=!1)}function c(){t.value=!0,e.value=!1}function u(){t.value=!1}function h(){e.value=!e.value,e.value&&(t.value=!1)}function p(){e.value=!0,t.value=!1}function m(){e.value=!1}function _(C){s.value=C,n.value=!0}function w(){n.value=!1,s.value=null}function S(C){const R=Date.now(),I={id:R,type:C.type||"info",message:C.message,duration:C.duration||4e3};return r.value.push(I),I.duration>0&&setTimeout(()=>{P(R)},I.duration),R}function P(C){const R=r.value.findIndex(I=>I.id===C);R>-1&&r.value.splice(R,1)}function N(){r.value=[]}function B(C,R=4e3){return S({type:"success",message:C,duration:R})}function M(C,R=5e3){return S({type:"error",message:C,duration:R})}function H(C,R=4e3){return S({type:"warning",message:C,duration:R})}function J(C,R=4e3){return S({type:"info",message:C,duration:R})}function ne(){i.value=!i.value}function k(C){i.value=C}function T(C){o.value=C}function v(){t.value=!1,e.value=!1,n.value=!1}return{isMobileMenuOpen:t,isCartDrawerOpen:e,isModalOpen:n,modalContent:s,notifications:r,isDarkMode:i,isGlobalLoading:o,toggleMobileMenu:l,openMobileMenu:c,closeMobileMenu:u,toggleCartDrawer:h,openCartDrawer:p,closeCartDrawer:m,openModal:_,closeModal:w,addNotification:S,removeNotification:P,clearAllNotifications:N,showSuccess:B,showError:M,showWarning:H,showInfo:J,toggleDarkMode:ne,setDarkMode:k,setGlobalLoading:T,closeAll:v}}),cs=oe(!1);function C_(){const t=()=>{cs.value=!cs.value,n()},e=r=>{cs.value=r,n()},n=()=>{cs.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},s=()=>{const r=localStorage.getItem("theme");r?cs.value=r==="dark":cs.value=window.matchMedia("(prefers-color-scheme: dark)").matches,n()};return ni(()=>{s(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",r=>{localStorage.getItem("theme")||(cs.value=r.matches,n())})}),{isDark:cs,toggleDarkMode:t,setDarkMode:e}}const Je=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},uI=["onClick"],dI={class:"toast-icon"},hI={class:"toast-message"},fI=["onClick"],pI={__name:"NotificationToast",setup(t){const e=js(),n=Q(()=>e.notifications),s=i=>e.removeNotification(i),r={success:"",error:"",warning:"",info:""};return(i,o)=>(D(),Xe(_l,{to:"body"},[se(hr,{name:"toast",tag:"div",class:"toast-container"},{default:de(()=>[(D(!0),$(Ce,null,We(n.value,l=>(D(),$("div",{key:l.id,class:Ve(["toast",`toast-${l.type}`]),onClick:c=>s(l.id)},[d("span",dI,F(r[l.type]),1),d("span",hI,F(l.message),1),d("button",{class:"toast-close",onClick:Rn(c=>s(l.id),["stop"])},"",8,fI),d("div",{class:"toast-progress",style:yn({animationDuration:`${l.duration}ms`})},null,4)],10,uI))),128))]),_:1})]))}},R_=Je(pI,[["__scopeId","data-v-695fa0bd"]]),mI=["aria-label"],gI={__name:"DarkModeToggle",setup(t){const{isDark:e,toggleDarkMode:n}=C_();return(s,r)=>(D(),$("button",{class:"dark-mode-toggle",onClick:r[0]||(r[0]=(...i)=>Oe(n)&&Oe(n)(...i)),"aria-label":Oe(e)?" ":" "},[d("span",{class:Ve(["toggle-track",{dark:Oe(e)}])},[r[1]||(r[1]=d("span",{class:"toggle-icon sun"},"",-1)),r[2]||(r[2]=d("span",{class:"toggle-icon moon"},"",-1)),d("span",{class:Ve(["toggle-thumb",{dark:Oe(e)}])},null,2)],2)],8,mI))}},Yf=Je(gI,[["__scopeId","data-v-5315c5ee"]]),_I={class:"footer"},yI={class:"footer-content"},vI={class:"container"},bI={class:"footer-grid"},EI={class:"footer-section"},wI={class:"footer-nav"},TI={class:"newsletter-section"},II={class:"newsletter-content"},AI=["disabled"],SI={class:"footer-bottom"},CI={class:"copyright"},RI={__name:"AppFooter",setup(t){const e=js(),n=oe(""),s=oe(!1),r=Q(()=>new Date().getFullYear()),i=async()=>{n.value&&(s.value=!0,await new Promise(o=>setTimeout(o,1e3)),e.showSuccess("!    "),n.value="",s.value=!1)};return(o,l)=>{const c=nn("router-link");return D(),$("footer",_I,[l[12]||(l[12]=d("div",{class:"footer-wave"},[d("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none"},[d("path",{d:"M0,60 C300,120 900,0 1200,60 L1200,120 L0,120 Z"})])],-1)),d("div",yI,[d("div",vI,[d("div",bI,[l[8]||(l[8]=Kt('<div class="footer-section brand-section" data-v-5bbed570><div class="brand" data-v-5bbed570><span class="brand-logo" data-v-5bbed570></span><span class="brand-name" data-v-5bbed570></span></div><p class="brand-description" data-v-5bbed570>     .        .</p><div class="social-links" data-v-5bbed570><a href="https://www.facebook.com/Margalitut/" target="_blank" class="social-link facebook" aria-label="" data-v-5bbed570><span class="social-icon" data-v-5bbed570></span></a><a href="https://wa.me/972528460331" target="_blank" class="social-link whatsapp" aria-label="" data-v-5bbed570><span class="social-icon" data-v-5bbed570></span></a></div></div>',1)),d("div",EI,[l[7]||(l[7]=d("h4",null," ",-1)),d("nav",wI,[se(c,{to:"/"},{default:de(()=>[...l[1]||(l[1]=[ue(" ",-1)])]),_:1}),se(c,{to:"/menu"},{default:de(()=>[...l[2]||(l[2]=[ue("",-1)])]),_:1}),se(c,{to:"/gallery"},{default:de(()=>[...l[3]||(l[3]=[ue("",-1)])]),_:1}),se(c,{to:"/about"},{default:de(()=>[...l[4]||(l[4]=[ue("",-1)])]),_:1}),se(c,{to:"/my-orders"},{default:de(()=>[...l[5]||(l[5]=[ue(" ",-1)])]),_:1}),se(c,{to:"/quote"},{default:de(()=>[...l[6]||(l[6]=[ue(" ",-1)])]),_:1})])]),l[9]||(l[9]=Kt('<div class="footer-section" data-v-5bbed570><h4 class="section-title" data-v-5bbed570> </h4><div class="contact-list" data-v-5bbed570><a href="tel:0528460331" class="contact-item" data-v-5bbed570><span class="contact-icon" data-v-5bbed570></span><span data-v-5bbed570>052-846-0331</span></a><a href="mailto:margalitot@email.com" class="contact-item" data-v-5bbed570><span class="contact-icon" data-v-5bbed570></span><span data-v-5bbed570>margalitot@email.com</span></a><div class="contact-item" data-v-5bbed570><span class="contact-icon" data-v-5bbed570></span><span data-v-5bbed570> , </span></div></div></div><div class="footer-section" data-v-5bbed570><h4 class="section-title" data-v-5bbed570> </h4><div class="hours-list" data-v-5bbed570><div class="hours-item" data-v-5bbed570><span class="day" data-v-5bbed570> - </span><span class="time" data-v-5bbed570>09:00 - 19:00</span></div><div class="hours-item" data-v-5bbed570><span class="day" data-v-5bbed570></span><span class="time" data-v-5bbed570>09:00 - 14:00</span></div><div class="hours-item closed" data-v-5bbed570><span class="day" data-v-5bbed570></span><span class="time" data-v-5bbed570></span></div></div><div class="kosher-badge" data-v-5bbed570><span class="badge-icon" data-v-5bbed570></span><span class="badge-text" data-v-5bbed570>   </span></div></div>',2))]),d("div",TI,[d("div",II,[l[10]||(l[10]=d("div",{class:"newsletter-text"},[d("h4",null," !"),d("p",null,"      ")],-1)),d("form",{class:"newsletter-form",onSubmit:Rn(i,["prevent"])},[Ue(d("input",{type:"email","onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u),placeholder:" ",class:"newsletter-input",required:""},null,512),[[Et,n.value]]),d("button",{type:"submit",class:"newsletter-btn",disabled:s.value},F(s.value?"...":""),9,AI)],32)])]),d("div",SI,[d("div",CI," "+F(r.value)+" .   .",1),l[11]||(l[11]=Kt('<div class="bottom-links" data-v-5bbed570><a href="#" class="bottom-link" data-v-5bbed570> </a><span class="separator" data-v-5bbed570></span><a href="#" class="bottom-link" data-v-5bbed570> </a><span class="separator" data-v-5bbed570></span><a href="#" class="bottom-link" data-v-5bbed570></a></div><div class="made-with" data-v-5bbed570>   </div>',2))])])])])}}},kI=Je(RI,[["__scopeId","data-v-5bbed570"]]),si=ed("menu",()=>{const t=oe([{id:"yeast-cakes",name:" ",icon:"",description:"   ",color:"#F4A460"},{id:"mixed-cakes",name:" ",icon:"",description:"   ",color:"#DDA0DD"},{id:"cookies",name:"",icon:"",description:"  ",color:"#D2691E"},{id:"breads",name:"",icon:"",description:"  ",color:"#DEB887"},{id:"sugar-free",name:" ",icon:"",description:"   ",color:"#90EE90"},{id:"gluten-free",name:" ",icon:"",description:"  ",color:"#F0E68C"},{id:"vegan",name:"",icon:"",description:"     ",color:"#98FB98"},{id:"ice-cream",name:"",icon:"",description:"   ",color:"#FFB6C1"},{id:"dairy-meals",name:" ",icon:"",description:"   ",color:"#FFA07A",hasSubcategories:!0},{id:"baking-workshops",name:" ",icon:"",color:"#d34a6e",description:"    ",isExternal:!1}]),e=oe([{id:"pizzas",name:"",icon:""},{id:"quiches",name:"",icon:""},{id:"salads",name:"",icon:""},{id:"pastas",name:"",icon:""},{id:"soups",name:"",icon:""}]),n=oe([{id:1,name:"  ",category:"yeast-cakes",price:85,image:"",description:"     ",popular:!0},{id:2,name:"  ",category:"yeast-cakes",price:80,image:"",description:"     "},{id:3,name:"  ",category:"yeast-cakes",price:90,image:"",description:"    ",popular:!0},{id:4,name:"  ",category:"yeast-cakes",price:75,image:"",description:"    "},{id:5,name:"  ",category:"yeast-cakes",price:85,image:"",description:"     "},{id:10,name:"  ",category:"mixed-cakes",price:95,image:"",description:"    ",popular:!0},{id:11,name:"  ",category:"mixed-cakes",price:110,image:"",description:"     ",popular:!0},{id:12,name:" ",category:"mixed-cakes",price:85,image:"",description:"     "},{id:13,name:" ",category:"mixed-cakes",price:80,image:"",description:"    "},{id:14,name:" ",category:"mixed-cakes",price:75,image:"",description:"    "},{id:15,name:" ",category:"mixed-cakes",price:80,image:"",description:"    "},{id:20,name:"  '",category:"cookies",price:45,image:"",description:"   ' ",popular:!0},{id:21,name:" ",category:"cookies",price:40,image:"",description:"   "},{id:22,name:" ",category:"cookies",price:50,image:"",description:"  "},{id:23,name:"  ",category:"cookies",price:45,image:"",description:"    "},{id:24,name:" ",category:"cookies",price:50,image:"",description:"   ",popular:!0},{id:25,name:"",category:"cookies",price:60,image:"",description:"  "},{id:30,name:" ",category:"breads",price:35,image:"",description:"   ",popular:!0},{id:31,name:" ",category:"breads",price:30,image:"",description:"  "},{id:32,name:" ",category:"breads",price:35,image:"",description:"   "},{id:33,name:"'",category:"breads",price:40,image:"",description:"'    "},{id:34,name:"",category:"breads",price:25,image:"",description:"  (6 ')"},{id:40,name:"   ",category:"sugar-free",price:90,image:"",description:"   ",popular:!0},{id:41,name:"    ",category:"sugar-free",price:50,image:"",description:"   "},{id:42,name:"   ",category:"sugar-free",price:55,image:"",description:"   "},{id:43,name:"   ",category:"sugar-free",price:100,image:"",description:"   "},{id:50,name:"   ",category:"gluten-free",price:100,image:"",description:"    ",popular:!0},{id:51,name:"   ",category:"gluten-free",price:55,image:"",description:"  "},{id:52,name:"  ",category:"gluten-free",price:45,image:"",description:"   "},{id:53,name:"   ",category:"gluten-free",price:110,image:"",description:"     "},{id:60,name:"  ",category:"vegan",price:95,image:"",description:"    ",popular:!0},{id:61,name:" ",category:"vegan",price:50,image:"",description:"  ' "},{id:62,name:" ",category:"vegan",price:55,image:"",description:"  "},{id:63,name:"  ",category:"vegan",price:80,image:"",description:"   "},{id:64,name:" ",category:"vegan",price:35,image:"",description:"    "},{id:70,name:" ",category:"ice-cream",price:40,image:"",description:"   ",popular:!0},{id:71,name:"  ",category:"ice-cream",price:45,image:"",description:"   "},{id:72,name:" ",category:"ice-cream",price:40,image:"",description:"    ",popular:!0},{id:73,name:" ",category:"ice-cream",price:50,image:"",description:"  "},{id:74,name:" ",category:"ice-cream",price:45,image:"",description:"  "},{id:75,name:" ",category:"ice-cream",price:40,image:"",description:"  "},{id:80,name:" ",category:"dairy-meals",subcategory:"pizzas",price:55,image:"",description:"    ",popular:!0},{id:81,name:" ",category:"dairy-meals",subcategory:"pizzas",price:65,image:"",description:"  4  "},{id:82,name:"  ",category:"dairy-meals",subcategory:"pizzas",price:60,image:"",description:"    "},{id:83,name:" ",category:"dairy-meals",subcategory:"pizzas",price:65,image:"",description:"    "},{id:90,name:" ",category:"dairy-meals",subcategory:"quiches",price:70,image:"",description:"   ",popular:!0},{id:91,name:" ",category:"dairy-meals",subcategory:"quiches",price:65,image:"",description:"   "},{id:92,name:" ",category:"dairy-meals",subcategory:"quiches",price:65,image:"",description:"   "},{id:93,name:" ",category:"dairy-meals",subcategory:"quiches",price:65,image:"",description:"  "},{id:100,name:" ",category:"dairy-meals",subcategory:"salads",price:45,image:"",description:"   ",popular:!0},{id:101,name:" ",category:"dairy-meals",subcategory:"salads",price:50,image:"",description:"    "},{id:102,name:" ",category:"dairy-meals",subcategory:"salads",price:50,image:"",description:",  "},{id:103,name:" ",category:"dairy-meals",subcategory:"salads",price:55,image:"",description:"     "},{id:110,name:" ",category:"dairy-meals",subcategory:"pastas",price:55,image:"",description:"   ",popular:!0},{id:111,name:" ",category:"dairy-meals",subcategory:"pastas",price:50,image:"",description:"   "},{id:112,name:" ",category:"dairy-meals",subcategory:"pastas",price:55,image:"",description:"   "},{id:113,name:"",category:"dairy-meals",subcategory:"pastas",price:65,image:"",description:"  "},{id:120,name:" ",category:"dairy-meals",subcategory:"soups",price:35,image:"",description:"    "},{id:121,name:" ",category:"dairy-meals",subcategory:"soups",price:35,image:"",description:"  "},{id:122,name:" ",category:"dairy-meals",subcategory:"soups",price:40,image:"",description:"   "},{id:123,name:" ",category:"dairy-meals",subcategory:"soups",price:35,image:"",description:"   "}]),s=Q(()=>p=>n.value.filter(m=>m.category===p)),r=Q(()=>p=>n.value.filter(m=>m.subcategory===p)),i=Q(()=>(p,m=4)=>{const _=n.value.filter(P=>P.category===p),w=_.filter(P=>P.popular),S=_.filter(P=>!P.popular);return[...w,...S].slice(0,m)}),o=Q(()=>n.value.filter(p=>p.popular)),l=Q(()=>t.value.map(p=>({...p,products:i.value(p.id,5)})));function c(p){if(!p||p.trim()==="")return[];const m=p.trim().toLowerCase();return n.value.filter(_=>_.category==="baking-workshops"?!1:_.name.toLowerCase().includes(m)||_.description&&_.description.toLowerCase().includes(m)).map(_=>{const w=t.value.find(S=>S.id===_.category);return{..._,categoryId:_.category,categoryName:(w==null?void 0:w.name)||""}})}function u(p){return t.value.find(m=>m.id===p)}function h(p){const m=n.value.find(_=>_.id===p);return m?{...m,categoryId:m.category}:null}return{categories:t,products:n,dairySubcategories:e,getProductsByCategory:s,getProductsBySubcategory:r,getPopularByCategory:i,popularProducts:o,getCategoryPreview:l,searchProducts:c,getCategoryById:u,getProductById:h}}),PI={class:"search-container"},VI={class:"search-box"},DI={key:0,class:"search-results"},OI={class:"results-header"},NI={class:"results-list"},xI={class:"result-image"},MI={class:"result-info"},LI={class:"result-name"},$I={class:"result-category"},FI={class:"result-price"},UI={key:0,class:"search-results no-results"},BI={__name:"SearchBar",setup(t){const e=si(),n=oe(!1),s=oe(""),r=oe(null),i=Q(()=>s.value.trim()?e.searchProducts(s.value):[]);function o(m){const _=e.getCategoryById(m);return(_==null?void 0:_.name)||""}async function l(){var m;n.value=!0,await ti(),(m=r.value)==null||m.focus()}function c(){n.value=!1,s.value=""}function u(){var m;s.value="",(m=r.value)==null||m.focus()}function h(){}function p(){i.value.length>0&&(i.value[0],c())}return(m,_)=>{const w=nn("router-link");return D(),$("div",{class:Ve(["search-wrapper",{expanded:n.value}])},[d("div",PI,[n.value?pe("",!0):(D(),$("button",{key:0,class:"search-toggle",onClick:l},[..._[1]||(_[1]=[d("span",{class:"search-icon"},"",-1)])])),Ue(d("div",VI,[_[2]||(_[2]=d("span",{class:"search-icon"},"",-1)),Ue(d("input",{ref_key:"searchInput",ref:r,type:"text","onUpdate:modelValue":_[0]||(_[0]=S=>s.value=S),placeholder:" ...",class:"search-input",onInput:h,onKeyup:[uo(c,["escape"]),uo(p,["enter"])]},null,544),[[Et,s.value]]),s.value?(D(),$("button",{key:0,class:"clear-btn",onClick:u},"")):pe("",!0),d("button",{class:"close-btn",onClick:c},"")],512),[[Oi,n.value]])]),se(Bt,{name:"dropdown"},{default:de(()=>[n.value&&s.value&&i.value.length>0?(D(),$("div",DI,[d("div",OI,[d("span",null,F(i.value.length)+" ",1)]),d("div",NI,[(D(!0),$(Ce,null,We(i.value.slice(0,8),S=>(D(),Xe(w,{key:S.id,to:`/menu/${S.categoryId}?highlight=${S.id}`,class:"result-item",onClick:c},{default:de(()=>[d("span",xI,F(S.image),1),d("div",MI,[d("span",LI,F(S.name),1),d("span",$I,F(o(S.categoryId)),1)]),d("span",FI,""+F(S.price),1)]),_:2},1032,["to"]))),128))]),i.value.length>8?(D(),Xe(w,{key:0,to:"/menu",class:"view-all-btn",onClick:c},{default:de(()=>[ue("   "+F(i.value.length)+"  ",1)]),_:1})):pe("",!0)])):pe("",!0)]),_:1}),se(Bt,{name:"dropdown"},{default:de(()=>[n.value&&s.value&&i.value.length===0?(D(),$("div",UI,[_[4]||(_[4]=d("span",{class:"no-results-icon"},"",-1)),d("p",null,'    "'+F(s.value)+'"',1),se(w,{to:"/menu",class:"browse-link",onClick:c},{default:de(()=>[..._[3]||(_[3]=[ue("    ",-1)])]),_:1})])):pe("",!0)]),_:1}),se(Bt,{name:"fade"},{default:de(()=>[n.value?(D(),$("div",{key:0,class:"search-overlay",onClick:c})):pe("",!0)]),_:1})],2)}}},jI=Je(BI,[["__scopeId","data-v-110e9bcf"]]),qI=()=>{};var Xf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},P_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,_=u&63;c||(_=64,o||(m=64)),s.push(n[h],n[p],n[m],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||p==null)throw new zI;const m=i<<2|l>>4;if(s.push(m),u!==64){const _=l<<4&240|u>>2;if(s.push(_),p!==64){const w=u<<6&192|p;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WI=function(t){const e=k_(t);return P_.encodeByteArray(e,!0)},za=function(t){return WI(t).replace(/\./g,"")},V_=function(t){try{return P_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=()=>KI().__FIREBASE_DEFAULTS__,QI=()=>{if(typeof process>"u"||typeof Xf>"u")return;const t=Xf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&V_(t[1]);return e&&JSON.parse(e)},Sl=()=>{try{return qI()||GI()||QI()||JI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D_=t=>{var e,n;return(n=(e=Sl())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},YI=t=>{const e=D_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},O_=()=>{var t;return(t=Sl())==null?void 0:t.config},N_=t=>{var e;return(e=Sl())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function x_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[za(JSON.stringify(n)),za(JSON.stringify(o)),""].join(".")}const Qi={};function e0(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qi))Qi[e]?t.emulator.push(e):t.prod.push(e);return t}function t0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zf=!1;function M_(t,e){if(typeof window>"u"||typeof document>"u"||!ri(window.location.host)||Qi[t]===e||Qi[t]||Zf)return;Qi[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=e0().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Zf=!0,o()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=t0(s),_=n("text"),w=document.getElementById(_)||document.createElement("span"),S=n("learnmore"),P=document.getElementById(S)||document.createElement("a"),N=n("preprendIcon"),B=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const M=m.element;l(M),h(P,S);const H=u();c(B,N),M.append(B,w,P,H),document.body.appendChild(M)}i?(w.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function s0(){var e;const t=(e=Sl())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function o0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function a0(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function l0(){return!s0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function c0(){try{return typeof indexedDB=="object"}catch{return!1}}function u0(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="FirebaseError";class es extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=d0,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ko.prototype.create)}}class ko{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?h0(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new es(r,l,s)}}function h0(t,e){return t.replace(f0,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const f0=/\{\$([^}]+)}/g;function p0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ar(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(ep(i)&&ep(o)){if(!ar(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function ep(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ni(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function xi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function m0(t,e){const n=new g0(t,e);return n.subscribe.bind(n)}class g0{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");_0(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Cc),r.error===void 0&&(r.error=Cc),r.complete===void 0&&(r.complete=Cc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _0(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class lr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new XI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b0(e))try{this.getOrInitializeService({instanceIdentifier:tr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tr){return this.instances.has(e)}getOptions(e=tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:v0(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=tr){return this.component?this.component.multipleInstances?e:tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function v0(t){return t===tr?void 0:t}function b0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new y0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const w0={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},T0=Ne.INFO,I0={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},A0=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=I0[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sd{constructor(e){this.name=e,this._logLevel=T0,this._logHandler=A0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const S0=(t,e)=>e.some(n=>t instanceof n);let tp,np;function C0(){return tp||(tp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R0(){return np||(np=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L_=new WeakMap,iu=new WeakMap,$_=new WeakMap,Rc=new WeakMap,rd=new WeakMap;function k0(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(As(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&L_.set(n,t)}).catch(()=>{}),rd.set(e,t),e}function P0(t){if(iu.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});iu.set(t,e)}let ou={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function V0(t){ou=t(ou)}function D0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(kc(this),e,...n);return $_.set(s,e.sort?e.sort():[e]),As(s)}:R0().includes(t)?function(...e){return t.apply(kc(this),e),As(L_.get(this))}:function(...e){return As(t.apply(kc(this),e))}}function O0(t){return typeof t=="function"?D0(t):(t instanceof IDBTransaction&&P0(t),S0(t,C0())?new Proxy(t,ou):t)}function As(t){if(t instanceof IDBRequest)return k0(t);if(Rc.has(t))return Rc.get(t);const e=O0(t);return e!==t&&(Rc.set(t,e),rd.set(e,t)),e}const kc=t=>rd.get(t);function N0(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=As(o);return s&&o.addEventListener("upgradeneeded",c=>{s(As(o.result),c.oldVersion,c.newVersion,As(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const x0=["get","getKey","getAll","getAllKeys","count"],M0=["put","add","delete","clear"],Pc=new Map;function sp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pc.get(e))return Pc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=M0.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||x0.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return Pc.set(e,i),i}V0(t=>({...t,get:(e,n,s)=>sp(e,n)||t.get(e,n,s),has:(e,n)=>!!sp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($0(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const au="@firebase/app",rp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new sd("@firebase/app"),F0="@firebase/app-compat",U0="@firebase/analytics-compat",B0="@firebase/analytics",j0="@firebase/app-check-compat",q0="@firebase/app-check",H0="@firebase/auth",z0="@firebase/auth-compat",W0="@firebase/database",K0="@firebase/data-connect",G0="@firebase/database-compat",Q0="@firebase/functions",J0="@firebase/functions-compat",Y0="@firebase/installations",X0="@firebase/installations-compat",Z0="@firebase/messaging",eA="@firebase/messaging-compat",tA="@firebase/performance",nA="@firebase/performance-compat",sA="@firebase/remote-config",rA="@firebase/remote-config-compat",iA="@firebase/storage",oA="@firebase/storage-compat",aA="@firebase/firestore",lA="@firebase/ai",cA="@firebase/firestore-compat",uA="firebase",dA="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="[DEFAULT]",hA={[au]:"fire-core",[F0]:"fire-core-compat",[B0]:"fire-analytics",[U0]:"fire-analytics-compat",[q0]:"fire-app-check",[j0]:"fire-app-check-compat",[H0]:"fire-auth",[z0]:"fire-auth-compat",[W0]:"fire-rtdb",[K0]:"fire-data-connect",[G0]:"fire-rtdb-compat",[Q0]:"fire-fn",[J0]:"fire-fn-compat",[Y0]:"fire-iid",[X0]:"fire-iid-compat",[Z0]:"fire-fcm",[eA]:"fire-fcm-compat",[tA]:"fire-perf",[nA]:"fire-perf-compat",[sA]:"fire-rc",[rA]:"fire-rc-compat",[iA]:"fire-gcs",[oA]:"fire-gcs-compat",[aA]:"fire-fst",[cA]:"fire-fst-compat",[lA]:"fire-vertex","fire-js":"fire-js",[uA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Map,fA=new Map,cu=new Map;function ip(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wr(t){const e=t.name;if(cu.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;cu.set(e,t);for(const n of Wa.values())ip(n,t);for(const n of fA.values())ip(n,t);return!0}function id(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new ko("app","Firebase",pA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=dA;function F_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:lu,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ss.create("bad-app-name",{appName:String(r)});if(n||(n=O_()),!n)throw Ss.create("no-options");const i=Wa.get(r);if(i){if(ar(n,i.options)&&ar(s,i.config))return i;throw Ss.create("duplicate-app",{appName:r})}const o=new E0(r);for(const c of cu.values())o.addComponent(c);const l=new mA(n,s,o);return Wa.set(r,l),l}function U_(t=lu){const e=Wa.get(t);if(!e&&t===lu&&O_())return F_();if(!e)throw Ss.create("no-app",{appName:t});return e}function Cs(t,e,n){let s=hA[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(o.join(" "));return}Wr(new lr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="firebase-heartbeat-database",_A=1,po="firebase-heartbeat-store";let Vc=null;function B_(){return Vc||(Vc=N0(gA,_A,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(po)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),Vc}async function yA(t){try{const n=(await B_()).transaction(po),s=await n.objectStore(po).get(j_(t));return await n.done,s}catch(e){if(e instanceof es)Qn.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function op(t,e){try{const s=(await B_()).transaction(po,"readwrite");await s.objectStore(po).put(e,j_(t)),await s.done}catch(n){if(n instanceof es)Qn.warn(n.message);else{const s=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(s.message)}}}function j_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=1024,bA=30;class EA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ap();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>bA){const o=IA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Qn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ap(),{heartbeatsToSend:s,unsentEntries:r}=wA(this._heartbeatsCache.heartbeats),i=za(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function ap(){return new Date().toISOString().substring(0,10)}function wA(t,e=vA){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),lp(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),lp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class TA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return c0()?u0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return op(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return op(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lp(t){return za(JSON.stringify({version:2,heartbeats:t})).length}function IA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){Wr(new lr("platform-logger",e=>new L0(e),"PRIVATE")),Wr(new lr("heartbeat",e=>new EA(e),"PRIVATE")),Cs(au,rp,t),Cs(au,rp,"esm2020"),Cs("fire-js","")}AA("");var cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,q_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,T){function v(){}v.prototype=T.prototype,k.F=T.prototype,k.prototype=new v,k.prototype.constructor=k,k.D=function(C,R,I){for(var y=Array(arguments.length-2),G=2;G<arguments.length;G++)y[G-2]=arguments[G];return T.prototype[R].apply(C,y)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,T,v){v||(v=0);const C=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)C[R]=T.charCodeAt(v++)|T.charCodeAt(v++)<<8|T.charCodeAt(v++)<<16|T.charCodeAt(v++)<<24;else for(R=0;R<16;++R)C[R]=T[v++]|T[v++]<<8|T[v++]<<16|T[v++]<<24;T=k.g[0],v=k.g[1],R=k.g[2];let I=k.g[3],y;y=T+(I^v&(R^I))+C[0]+3614090360&4294967295,T=v+(y<<7&4294967295|y>>>25),y=I+(R^T&(v^R))+C[1]+3905402710&4294967295,I=T+(y<<12&4294967295|y>>>20),y=R+(v^I&(T^v))+C[2]+606105819&4294967295,R=I+(y<<17&4294967295|y>>>15),y=v+(T^R&(I^T))+C[3]+3250441966&4294967295,v=R+(y<<22&4294967295|y>>>10),y=T+(I^v&(R^I))+C[4]+4118548399&4294967295,T=v+(y<<7&4294967295|y>>>25),y=I+(R^T&(v^R))+C[5]+1200080426&4294967295,I=T+(y<<12&4294967295|y>>>20),y=R+(v^I&(T^v))+C[6]+2821735955&4294967295,R=I+(y<<17&4294967295|y>>>15),y=v+(T^R&(I^T))+C[7]+4249261313&4294967295,v=R+(y<<22&4294967295|y>>>10),y=T+(I^v&(R^I))+C[8]+1770035416&4294967295,T=v+(y<<7&4294967295|y>>>25),y=I+(R^T&(v^R))+C[9]+2336552879&4294967295,I=T+(y<<12&4294967295|y>>>20),y=R+(v^I&(T^v))+C[10]+4294925233&4294967295,R=I+(y<<17&4294967295|y>>>15),y=v+(T^R&(I^T))+C[11]+2304563134&4294967295,v=R+(y<<22&4294967295|y>>>10),y=T+(I^v&(R^I))+C[12]+1804603682&4294967295,T=v+(y<<7&4294967295|y>>>25),y=I+(R^T&(v^R))+C[13]+4254626195&4294967295,I=T+(y<<12&4294967295|y>>>20),y=R+(v^I&(T^v))+C[14]+2792965006&4294967295,R=I+(y<<17&4294967295|y>>>15),y=v+(T^R&(I^T))+C[15]+1236535329&4294967295,v=R+(y<<22&4294967295|y>>>10),y=T+(R^I&(v^R))+C[1]+4129170786&4294967295,T=v+(y<<5&4294967295|y>>>27),y=I+(v^R&(T^v))+C[6]+3225465664&4294967295,I=T+(y<<9&4294967295|y>>>23),y=R+(T^v&(I^T))+C[11]+643717713&4294967295,R=I+(y<<14&4294967295|y>>>18),y=v+(I^T&(R^I))+C[0]+3921069994&4294967295,v=R+(y<<20&4294967295|y>>>12),y=T+(R^I&(v^R))+C[5]+3593408605&4294967295,T=v+(y<<5&4294967295|y>>>27),y=I+(v^R&(T^v))+C[10]+38016083&4294967295,I=T+(y<<9&4294967295|y>>>23),y=R+(T^v&(I^T))+C[15]+3634488961&4294967295,R=I+(y<<14&4294967295|y>>>18),y=v+(I^T&(R^I))+C[4]+3889429448&4294967295,v=R+(y<<20&4294967295|y>>>12),y=T+(R^I&(v^R))+C[9]+568446438&4294967295,T=v+(y<<5&4294967295|y>>>27),y=I+(v^R&(T^v))+C[14]+3275163606&4294967295,I=T+(y<<9&4294967295|y>>>23),y=R+(T^v&(I^T))+C[3]+4107603335&4294967295,R=I+(y<<14&4294967295|y>>>18),y=v+(I^T&(R^I))+C[8]+1163531501&4294967295,v=R+(y<<20&4294967295|y>>>12),y=T+(R^I&(v^R))+C[13]+2850285829&4294967295,T=v+(y<<5&4294967295|y>>>27),y=I+(v^R&(T^v))+C[2]+4243563512&4294967295,I=T+(y<<9&4294967295|y>>>23),y=R+(T^v&(I^T))+C[7]+1735328473&4294967295,R=I+(y<<14&4294967295|y>>>18),y=v+(I^T&(R^I))+C[12]+2368359562&4294967295,v=R+(y<<20&4294967295|y>>>12),y=T+(v^R^I)+C[5]+4294588738&4294967295,T=v+(y<<4&4294967295|y>>>28),y=I+(T^v^R)+C[8]+2272392833&4294967295,I=T+(y<<11&4294967295|y>>>21),y=R+(I^T^v)+C[11]+1839030562&4294967295,R=I+(y<<16&4294967295|y>>>16),y=v+(R^I^T)+C[14]+4259657740&4294967295,v=R+(y<<23&4294967295|y>>>9),y=T+(v^R^I)+C[1]+2763975236&4294967295,T=v+(y<<4&4294967295|y>>>28),y=I+(T^v^R)+C[4]+1272893353&4294967295,I=T+(y<<11&4294967295|y>>>21),y=R+(I^T^v)+C[7]+4139469664&4294967295,R=I+(y<<16&4294967295|y>>>16),y=v+(R^I^T)+C[10]+3200236656&4294967295,v=R+(y<<23&4294967295|y>>>9),y=T+(v^R^I)+C[13]+681279174&4294967295,T=v+(y<<4&4294967295|y>>>28),y=I+(T^v^R)+C[0]+3936430074&4294967295,I=T+(y<<11&4294967295|y>>>21),y=R+(I^T^v)+C[3]+3572445317&4294967295,R=I+(y<<16&4294967295|y>>>16),y=v+(R^I^T)+C[6]+76029189&4294967295,v=R+(y<<23&4294967295|y>>>9),y=T+(v^R^I)+C[9]+3654602809&4294967295,T=v+(y<<4&4294967295|y>>>28),y=I+(T^v^R)+C[12]+3873151461&4294967295,I=T+(y<<11&4294967295|y>>>21),y=R+(I^T^v)+C[15]+530742520&4294967295,R=I+(y<<16&4294967295|y>>>16),y=v+(R^I^T)+C[2]+3299628645&4294967295,v=R+(y<<23&4294967295|y>>>9),y=T+(R^(v|~I))+C[0]+4096336452&4294967295,T=v+(y<<6&4294967295|y>>>26),y=I+(v^(T|~R))+C[7]+1126891415&4294967295,I=T+(y<<10&4294967295|y>>>22),y=R+(T^(I|~v))+C[14]+2878612391&4294967295,R=I+(y<<15&4294967295|y>>>17),y=v+(I^(R|~T))+C[5]+4237533241&4294967295,v=R+(y<<21&4294967295|y>>>11),y=T+(R^(v|~I))+C[12]+1700485571&4294967295,T=v+(y<<6&4294967295|y>>>26),y=I+(v^(T|~R))+C[3]+2399980690&4294967295,I=T+(y<<10&4294967295|y>>>22),y=R+(T^(I|~v))+C[10]+4293915773&4294967295,R=I+(y<<15&4294967295|y>>>17),y=v+(I^(R|~T))+C[1]+2240044497&4294967295,v=R+(y<<21&4294967295|y>>>11),y=T+(R^(v|~I))+C[8]+1873313359&4294967295,T=v+(y<<6&4294967295|y>>>26),y=I+(v^(T|~R))+C[15]+4264355552&4294967295,I=T+(y<<10&4294967295|y>>>22),y=R+(T^(I|~v))+C[6]+2734768916&4294967295,R=I+(y<<15&4294967295|y>>>17),y=v+(I^(R|~T))+C[13]+1309151649&4294967295,v=R+(y<<21&4294967295|y>>>11),y=T+(R^(v|~I))+C[4]+4149444226&4294967295,T=v+(y<<6&4294967295|y>>>26),y=I+(v^(T|~R))+C[11]+3174756917&4294967295,I=T+(y<<10&4294967295|y>>>22),y=R+(T^(I|~v))+C[2]+718787259&4294967295,R=I+(y<<15&4294967295|y>>>17),y=v+(I^(R|~T))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+T&4294967295,k.g[1]=k.g[1]+(R+(y<<21&4294967295|y>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+I&4294967295}s.prototype.v=function(k,T){T===void 0&&(T=k.length);const v=T-this.blockSize,C=this.C;let R=this.h,I=0;for(;I<T;){if(R==0)for(;I<=v;)r(this,k,I),I+=this.blockSize;if(typeof k=="string"){for(;I<T;)if(C[R++]=k.charCodeAt(I++),R==this.blockSize){r(this,C),R=0;break}}else for(;I<T;)if(C[R++]=k[I++],R==this.blockSize){r(this,C),R=0;break}}this.h=R,this.o+=T},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var T=1;T<k.length-8;++T)k[T]=0;T=this.o*8;for(var v=k.length-8;v<k.length;++v)k[v]=T&255,T/=256;for(this.v(k),k=Array(16),T=0,v=0;v<4;++v)for(let C=0;C<32;C+=8)k[T++]=this.g[v]>>>C&255;return k};function i(k,T){var v=l;return Object.prototype.hasOwnProperty.call(v,k)?v[k]:v[k]=T(k)}function o(k,T){this.h=T;const v=[];let C=!0;for(let R=k.length-1;R>=0;R--){const I=k[R]|0;C&&I==T||(v[R]=I,C=!1)}this.g=v}var l={};function c(k){return-128<=k&&k<128?i(k,function(T){return new o([T|0],T<0?-1:0)}):new o([k|0],k<0?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return p;if(k<0)return P(u(-k));const T=[];let v=1;for(let C=0;k>=v;C++)T[C]=k/v|0,v*=4294967296;return new o(T,0)}function h(k,T){if(k.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k.charAt(0)=="-")return P(h(k.substring(1),T));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(T,8));let C=p;for(let I=0;I<k.length;I+=8){var R=Math.min(8,k.length-I);const y=parseInt(k.substring(I,I+R),T);R<8?(R=u(Math.pow(T,R)),C=C.j(R).add(u(y))):(C=C.j(v),C=C.add(u(y)))}return C}var p=c(0),m=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(S(this))return-P(this).m();let k=0,T=1;for(let v=0;v<this.g.length;v++){const C=this.i(v);k+=(C>=0?C:4294967296+C)*T,T*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(w(this))return"0";if(S(this))return"-"+P(this).toString(k);const T=u(Math.pow(k,6));var v=this;let C="";for(;;){const R=H(v,T).g;v=N(v,R.j(T));let I=((v.g.length>0?v.g[0]:v.h)>>>0).toString(k);if(v=R,w(v))return I+C;for(;I.length<6;)I="0"+I;C=I+C}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function w(k){if(k.h!=0)return!1;for(let T=0;T<k.g.length;T++)if(k.g[T]!=0)return!1;return!0}function S(k){return k.h==-1}t.l=function(k){return k=N(this,k),S(k)?-1:w(k)?0:1};function P(k){const T=k.g.length,v=[];for(let C=0;C<T;C++)v[C]=~k.g[C];return new o(v,~k.h).add(m)}t.abs=function(){return S(this)?P(this):this},t.add=function(k){const T=Math.max(this.g.length,k.g.length),v=[];let C=0;for(let R=0;R<=T;R++){let I=C+(this.i(R)&65535)+(k.i(R)&65535),y=(I>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);C=y>>>16,I&=65535,y&=65535,v[R]=y<<16|I}return new o(v,v[v.length-1]&-2147483648?-1:0)};function N(k,T){return k.add(P(T))}t.j=function(k){if(w(this)||w(k))return p;if(S(this))return S(k)?P(this).j(P(k)):P(P(this).j(k));if(S(k))return P(this.j(P(k)));if(this.l(_)<0&&k.l(_)<0)return u(this.m()*k.m());const T=this.g.length+k.g.length,v=[];for(var C=0;C<2*T;C++)v[C]=0;for(C=0;C<this.g.length;C++)for(let R=0;R<k.g.length;R++){const I=this.i(C)>>>16,y=this.i(C)&65535,G=k.i(R)>>>16,be=k.i(R)&65535;v[2*C+2*R]+=y*be,B(v,2*C+2*R),v[2*C+2*R+1]+=I*be,B(v,2*C+2*R+1),v[2*C+2*R+1]+=y*G,B(v,2*C+2*R+1),v[2*C+2*R+2]+=I*G,B(v,2*C+2*R+2)}for(k=0;k<T;k++)v[k]=v[2*k+1]<<16|v[2*k];for(k=T;k<2*T;k++)v[k]=0;return new o(v,0)};function B(k,T){for(;(k[T]&65535)!=k[T];)k[T+1]+=k[T]>>>16,k[T]&=65535,T++}function M(k,T){this.g=k,this.h=T}function H(k,T){if(w(T))throw Error("division by zero");if(w(k))return new M(p,p);if(S(k))return T=H(P(k),T),new M(P(T.g),P(T.h));if(S(T))return T=H(k,P(T)),new M(P(T.g),T.h);if(k.g.length>30){if(S(k)||S(T))throw Error("slowDivide_ only works with positive integers.");for(var v=m,C=T;C.l(k)<=0;)v=J(v),C=J(C);var R=ne(v,1),I=ne(C,1);for(C=ne(C,2),v=ne(v,2);!w(C);){var y=I.add(C);y.l(k)<=0&&(R=R.add(v),I=y),C=ne(C,1),v=ne(v,1)}return T=N(k,R.j(T)),new M(R,T)}for(R=p;k.l(T)>=0;){for(v=Math.max(1,Math.floor(k.m()/T.m())),C=Math.ceil(Math.log(v)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),I=u(v),y=I.j(T);S(y)||y.l(k)>0;)v-=C,I=u(v),y=I.j(T);w(I)&&(I=m),R=R.add(I),k=N(k,y)}return new M(R,k)}t.B=function(k){return H(this,k).h},t.and=function(k){const T=Math.max(this.g.length,k.g.length),v=[];for(let C=0;C<T;C++)v[C]=this.i(C)&k.i(C);return new o(v,this.h&k.h)},t.or=function(k){const T=Math.max(this.g.length,k.g.length),v=[];for(let C=0;C<T;C++)v[C]=this.i(C)|k.i(C);return new o(v,this.h|k.h)},t.xor=function(k){const T=Math.max(this.g.length,k.g.length),v=[];for(let C=0;C<T;C++)v[C]=this.i(C)^k.i(C);return new o(v,this.h^k.h)};function J(k){const T=k.g.length+1,v=[];for(let C=0;C<T;C++)v[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(v,k.h)}function ne(k,T){const v=T>>5;T%=32;const C=k.g.length-v,R=[];for(let I=0;I<C;I++)R[I]=T>0?k.i(I+v)>>>T|k.i(I+v+1)<<32-T:k.i(I+v);return new o(R,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,q_=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Rs=o}).apply(typeof cp<"u"?cp:typeof self<"u"?self:typeof window<"u"?window:{});var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H_,Mi,z_,wa,uu,W_,K_,G_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ia=="object"&&ia];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)e:{var g=s;a=a.split(".");for(var b=0;b<a.length-1;b++){var L=a[b];if(!(L in g))break e;g=g[L]}a=a[a.length-1],b=g[a],f=f(b),f!=b&&f!=null&&e(g,a,{configurable:!0,writable:!0,value:f})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(f){var g=[],b;for(b in f)Object.prototype.hasOwnProperty.call(f,b)&&g.push([b,f[b]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,g){return a.call.apply(a.bind,arguments)}function u(a,f,g){return u=c,u.apply(null,arguments)}function h(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),a.apply(this,b)}}function p(a,f){function g(){}g.prototype=f.prototype,a.Z=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(b,L,U){for(var re=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)re[Pe-2]=arguments[Pe];return f.prototype[L].apply(b,re)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const f=a.length;if(f>0){const g=Array(f);for(let b=0;b<f;b++)g[b]=a[b];return g}return[]}function w(a,f){for(let b=1;b<arguments.length;b++){const L=arguments[b];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=a.length||0;const U=L.length||0;a.length=g+U;for(let re=0;re<U;re++)a[g+re]=L[re]}else a.push(L)}}class S{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function P(a){o.setTimeout(()=>{throw a},0)}function N(){var a=k;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class B{constructor(){this.h=this.g=null}add(f,g){const b=M.get();b.set(f,g),this.h?this.h.next=b:this.g=b,this.h=b}}var M=new S(()=>new H,a=>a.reset());class H{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ne=!1,k=new B,T=()=>{const a=Promise.resolve(void 0);J=()=>{a.then(v)}};function v(){for(var a;a=N();){try{a.h.call(a.g)}catch(g){P(g)}var f=M;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}ne=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return a}();function y(a){return/^[\s\xa0]*$/.test(a)}function G(a,f){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}p(G,R),G.prototype.init=function(a,f){const g=this.type=a.type,b=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),Te=0;function fe(a,f,g,b,L){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!b,this.ha=L,this.key=++Te,this.da=this.fa=!1}function Ie(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function st(a,f,g){for(const b in a)f.call(g,a[b],b,a)}function Tt(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function Se(a){const f={};for(const g in a)f[g]=a[g];return f}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(a,f){let g,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(g in b)a[g]=b[g];for(let U=0;U<x.length;U++)g=x[U],Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])}}function ht(a){this.src=a,this.g={},this.h=0}ht.prototype.add=function(a,f,g,b,L){const U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);const re=et(a,f,b,L);return re>-1?(f=a[re],g||(f.fa=!1)):(f=new fe(f,this.src,U,!!b,L),f.fa=g,a.push(f)),f};function It(a,f){const g=f.type;if(g in a.g){var b=a.g[g],L=Array.prototype.indexOf.call(b,f,void 0),U;(U=L>=0)&&Array.prototype.splice.call(b,L,1),U&&(Ie(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function et(a,f,g,b){for(let L=0;L<a.length;++L){const U=a[L];if(!U.da&&U.listener==f&&U.capture==!!g&&U.ha==b)return L}return-1}var O="closure_lm_"+(Math.random()*1e6|0),ee={};function te(a,f,g,b,L){if(Array.isArray(f)){for(let U=0;U<f.length;U++)te(a,f[U],g,b,L);return null}return g=ie(g),a&&a[be]?a.J(f,g,l(b)?!!b.capture:!1,L):he(a,f,g,!1,b,L)}function he(a,f,g,b,L,U){if(!f)throw Error("Invalid event type");const re=l(L)?!!L.capture:!!L;let Pe=q(a);if(Pe||(a[O]=Pe=new ht(a)),g=Pe.add(f,g,b,re,U),g.proxy)return g;if(b=Be(),g.proxy=b,b.src=a,b.listener=g,a.addEventListener)I||(L=re),L===void 0&&(L=!1),a.addEventListener(f.toString(),b,L);else if(a.attachEvent)a.attachEvent(V(f.toString()),b);else if(a.addListener&&a.removeListener)a.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Be(){function a(g){return f.call(a.src,a.listener,g)}const f=j;return a}function E(a,f,g,b,L){if(Array.isArray(f))for(var U=0;U<f.length;U++)E(a,f[U],g,b,L);else b=l(b)?!!b.capture:!!b,g=ie(g),a&&a[be]?(a=a.i,U=String(f).toString(),U in a.g&&(f=a.g[U],g=et(f,g,b,L),g>-1&&(Ie(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete a.g[U],a.h--)))):a&&(a=q(a))&&(f=a.g[f.toString()],a=-1,f&&(a=et(f,g,b,L)),(g=a>-1?f[a]:null)&&A(g))}function A(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[be])It(f.i,a);else{var g=a.type,b=a.proxy;f.removeEventListener?f.removeEventListener(g,b,a.capture):f.detachEvent?f.detachEvent(V(g),b):f.addListener&&f.removeListener&&f.removeListener(b),(g=q(f))?(It(g,a),g.h==0&&(g.src=null,f[O]=null)):Ie(a)}}}function V(a){return a in ee?ee[a]:ee[a]="on"+a}function j(a,f){if(a.da)a=!0;else{f=new G(f,this);const g=a.listener,b=a.ha||a.src;a.fa&&A(a),a=g.call(b,f)}return a}function q(a){return a=a[O],a instanceof ht?a:null}var z="__closure_events_fn_"+(Math.random()*1e9>>>0);function ie(a){return typeof a=="function"?a:(a[z]||(a[z]=function(f){return a.handleEvent(f)}),a[z])}function Z(){C.call(this),this.i=new ht(this),this.M=this,this.G=null}p(Z,C),Z.prototype[be]=!0,Z.prototype.removeEventListener=function(a,f,g,b){E(this,a,f,g,b)};function Y(a,f){var g,b=a.G;if(b)for(g=[];b;b=b.G)g.push(b);if(a=a.M,b=f.type||f,typeof f=="string")f=new R(f,a);else if(f instanceof R)f.target=f.target||a;else{var L=f;f=new R(b,a),_t(f,L)}L=!0;let U,re;if(g)for(re=g.length-1;re>=0;re--)U=f.g=g[re],L=X(U,b,!0,f)&&L;if(U=f.g=a,L=X(U,b,!0,f)&&L,L=X(U,b,!1,f)&&L,g)for(re=0;re<g.length;re++)U=f.g=g[re],L=X(U,b,!1,f)&&L}Z.prototype.N=function(){if(Z.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const g=a.g[f];for(let b=0;b<g.length;b++)Ie(g[b]);delete a.g[f],a.h--}}this.G=null},Z.prototype.J=function(a,f,g,b){return this.i.add(String(a),f,!1,g,b)},Z.prototype.K=function(a,f,g,b){return this.i.add(String(a),f,!0,g,b)};function X(a,f,g,b){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let L=!0;for(let U=0;U<f.length;++U){const re=f[U];if(re&&!re.da&&re.capture==g){const Pe=re.listener,ft=re.ha||re.src;re.fa&&It(a.i,re),L=Pe.call(ft,b)!==!1&&L}}return L&&!b.defaultPrevented}function _e(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function ae(a){a.g=_e(()=>{a.g=null,a.i&&(a.i=!1,ae(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class ge extends C{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(a){C.call(this),this.h=a,this.g={}}p(ve,C);var De=[];function ze(a){st(a.g,function(f,g){this.g.hasOwnProperty(g)&&A(f)},a),a.g={}}ve.prototype.N=function(){ve.Z.N.call(this),ze(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fe=o.JSON.stringify,Dt=o.JSON.parse,Ot=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Jt(){}function Yt(){}var ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _r(){R.call(this,"d")}p(_r,R);function At(){R.call(this,"c")}p(At,R);var yt={},fi=null;function Ws(){return fi=fi||new Z}yt.Ia="serverreachability";function Jd(a){R.call(this,yt.Ia,a)}p(Jd,R);function pi(a){const f=Ws();Y(f,new Jd(f))}yt.STAT_EVENT="statevent";function Yd(a,f){R.call(this,yt.STAT_EVENT,a),this.stat=f}p(Yd,R);function qt(a){const f=Ws();Y(f,new Yd(f,a))}yt.Ja="timingevent";function Xd(a,f){R.call(this,yt.Ja,a),this.size=f}p(Xd,R);function mi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function gi(){this.g=!0}gi.prototype.ua=function(){this.g=!1};function f1(a,f,g,b,L,U){a.info(function(){if(a.g)if(U){var re="",Pe=U.split("&");for(let Ke=0;Ke<Pe.length;Ke++){var ft=Pe[Ke].split("=");if(ft.length>1){const vt=ft[0];ft=ft[1];const En=vt.split("_");re=En.length>=2&&En[1]=="type"?re+(vt+"="+ft+"&"):re+(vt+"=redacted&")}}}else re=null;else re=U;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+f+`
`+g+`
`+re})}function p1(a,f,g,b,L,U,re){a.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+f+`
`+g+`
`+U+" "+re})}function yr(a,f,g,b){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+g1(a,g)+(b?" "+b:"")})}function m1(a,f){a.info(function(){return"TIMEOUT: "+f})}gi.prototype.info=function(){};function g1(a,f){if(!a.g)return f;if(!f)return null;try{const U=JSON.parse(f);if(U){for(a=0;a<U.length;a++)if(Array.isArray(U[a])){var g=U[a];if(!(g.length<2)){var b=g[1];if(Array.isArray(b)&&!(b.length<1)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(let re=1;re<b.length;re++)b[re]=""}}}}return Fe(U)}catch{return f}}var qo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},eh;function Yl(){}p(Yl,Jt),Yl.prototype.g=function(){return new XMLHttpRequest},eh=new Yl;function _i(a){return encodeURIComponent(String(a))}function _1(a){var f=1;a=a.split(":");const g=[];for(;f>0&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function ts(a,f,g,b){this.j=a,this.i=f,this.l=g,this.S=b||1,this.V=new ve(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new th}function th(){this.i=null,this.g="",this.h=!1}var nh={},Xl={};function Zl(a,f,g){a.M=1,a.A=zo(bn(f)),a.u=g,a.R=!0,sh(a,null)}function sh(a,f){a.F=Date.now(),Ho(a),a.B=bn(a.A);var g=a.B,b=a.S;Array.isArray(b)||(b=[String(b)]),gh(g.i,"t",b),a.C=0,g=a.j.L,a.h=new th,a.g=Nh(a.j,g?f:null,!a.u),a.P>0&&(a.O=new ge(u(a.Y,a,a.g),a.P)),f=a.V,g=a.g,b=a.ba;var L="readystatechange";Array.isArray(L)||(L&&(De[0]=L.toString()),L=De);for(let U=0;U<L.length;U++){const re=te(g,L[U],b||f.handleEvent,!1,f.h||f);if(!re)break;f.g[re.key]=re}f=a.J?Se(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),pi(),f1(a.i,a.v,a.B,a.l,a.S,a.u)}ts.prototype.ba=function(a){a=a.target;const f=this.O;f&&rs(a)==3?f.j():this.Y(a)},ts.prototype.Y=function(a){try{if(a==this.g)e:{const Pe=rs(this.g),ft=this.g.ya(),Ke=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Th(this.g)))){this.K||Pe!=4||ft==7||(ft==8||Ke<=0?pi(3):pi(2)),ec(this);var f=this.g.ca();this.X=f;var g=y1(this);if(this.o=f==200,p1(this.i,this.v,this.B,this.l,this.S,Pe,f),this.o){if(this.U&&!this.L){t:{if(this.g){var b,L=this.g;if((b=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(b)){var U=b;break t}}U=null}if(a=U)yr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tc(this,a);else{this.o=!1,this.m=3,qt(12),Ks(this),yi(this);break e}}if(this.R){a=!0;let vt;for(;!this.K&&this.C<g.length;)if(vt=v1(this,g),vt==Xl){Pe==4&&(this.m=4,qt(14),a=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==nh){this.m=4,qt(15),yr(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else yr(this.i,this.l,vt,null),tc(this,vt);if(rh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||g.length!=0||this.h.h||(this.m=1,qt(16),a=!1),this.o=this.o&&a,!a)yr(this.i,this.l,g,"[Invalid Chunked Response]"),Ks(this),yi(this);else if(g.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),cc(re),re.P=!0,qt(11))}}else yr(this.i,this.l,g,null),tc(this,g);Pe==4&&Ks(this),this.o&&!this.K&&(Pe==4?Ph(this.j,this):(this.o=!1,Ho(this)))}else O1(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),Ks(this),yi(this)}}}catch{}finally{}};function y1(a){if(!rh(a))return a.g.la();const f=Th(a.g);if(f==="")return"";let g="";const b=f.length,L=rs(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ks(a),yi(a),"";a.h.i=new o.TextDecoder}for(let U=0;U<b;U++)a.h.h=!0,g+=a.h.i.decode(f[U],{stream:!(L&&U==b-1)});return f.length=0,a.h.g+=g,a.C=0,a.h.g}function rh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function v1(a,f){var g=a.C,b=f.indexOf(`
`,g);return b==-1?Xl:(g=Number(f.substring(g,b)),isNaN(g)?nh:(b+=1,b+g>f.length?Xl:(f=f.slice(b,b+g),a.C=b+g,f)))}ts.prototype.cancel=function(){this.K=!0,Ks(this)};function Ho(a){a.T=Date.now()+a.H,ih(a,a.H)}function ih(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=mi(u(a.aa,a),f)}function ec(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ts.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(m1(this.i,this.B),this.M!=2&&(pi(),qt(17)),Ks(this),this.m=2,yi(this)):ih(this,this.T-a)};function yi(a){a.j.I==0||a.K||Ph(a.j,a)}function Ks(a){ec(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,ze(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function tc(a,f){try{var g=a.j;if(g.I!=0&&(g.g==a||nc(g.h,a))){if(!a.L&&nc(g.h,a)&&g.I==3){try{var b=g.Ba.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)Jo(g),Go(g);else break e;lc(g),qt(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=mi(u(g.Va,g),6e3));lh(g.h)<=1&&g.ta&&(g.ta=void 0)}else Qs(g,11)}else if((a.L||g.g==a)&&Jo(g),!y(f))for(L=g.Ba.g.parse(f),f=0;f<L.length;f++){let Ke=L[f];const vt=Ke[0];if(!(vt<=g.K))if(g.K=vt,Ke=Ke[1],g.I==2)if(Ke[0]=="c"){g.M=Ke[1],g.ba=Ke[2];const En=Ke[3];En!=null&&(g.ka=En,g.j.info("VER="+g.ka));const Js=Ke[4];Js!=null&&(g.za=Js,g.j.info("SVER="+g.za));const is=Ke[5];is!=null&&typeof is=="number"&&is>0&&(b=1.5*is,g.O=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;const os=a.g;if(os){const Xo=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xo){var U=b.h;U.g||Xo.indexOf("spdy")==-1&&Xo.indexOf("quic")==-1&&Xo.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(sc(U,U.h),U.h=null))}if(b.G){const uc=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;uc&&(b.wa=uc,tt(b.J,b.G,uc))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),b=g;var re=a;if(b.na=Oh(b,b.L?b.ba:null,b.W),re.L){ch(b.h,re);var Pe=re,ft=b.O;ft&&(Pe.H=ft),Pe.D&&(ec(Pe),Ho(Pe)),b.g=re}else Rh(b);g.i.length>0&&Qo(g)}else Ke[0]!="stop"&&Ke[0]!="close"||Qs(g,7);else g.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Qs(g,7):ac(g):Ke[0]!="noop"&&g.l&&g.l.qa(Ke),g.A=0)}}pi(4)}catch{}}var b1=class{constructor(a,f){this.g=a,this.map=f}};function oh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ah(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function lh(a){return a.h?1:a.g?a.g.size:0}function nc(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function sc(a,f){a.g?a.g.add(f):a.h=f}function ch(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}oh.prototype.cancel=function(){if(this.i=uh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function uh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.G);return f}return _(a.i)}var dh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function E1(a,f){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const b=a[g].indexOf("=");let L,U=null;b>=0?(L=a[g].substring(0,b),U=a[g].substring(b+1)):L=a[g],f(L,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ns(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof ns?(this.l=a.l,vi(this,a.j),this.o=a.o,this.g=a.g,bi(this,a.u),this.h=a.h,rc(this,_h(a.i)),this.m=a.m):a&&(f=String(a).match(dh))?(this.l=!1,vi(this,f[1]||"",!0),this.o=Ei(f[2]||""),this.g=Ei(f[3]||"",!0),bi(this,f[4]),this.h=Ei(f[5]||"",!0),rc(this,f[6]||"",!0),this.m=Ei(f[7]||"")):(this.l=!1,this.i=new Ti(null,this.l))}ns.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(wi(f,hh,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(wi(f,hh,!0),"@"),a.push(_i(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(wi(g,g.charAt(0)=="/"?I1:T1,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",wi(g,S1)),a.join("")},ns.prototype.resolve=function(a){const f=bn(this);let g=!!a.j;g?vi(f,a.j):g=!!a.o,g?f.o=a.o:g=!!a.g,g?f.g=a.g:g=a.u!=null;var b=a.h;if(g)bi(f,a.u);else if(g=!!a.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var L=f.h.lastIndexOf("/");L!=-1&&(b=f.h.slice(0,L+1)+b)}if(L=b,L==".."||L==".")b="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){b=L.lastIndexOf("/",0)==0,L=L.split("/");const U=[];for(let re=0;re<L.length;){const Pe=L[re++];Pe=="."?b&&re==L.length&&U.push(""):Pe==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),b&&re==L.length&&U.push("")):(U.push(Pe),b=!0)}b=U.join("/")}else b=L}return g?f.h=b:g=a.i.toString()!=="",g?rc(f,_h(a.i)):g=!!a.m,g&&(f.m=a.m),f};function bn(a){return new ns(a)}function vi(a,f,g){a.j=g?Ei(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function bi(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function rc(a,f,g){f instanceof Ti?(a.i=f,C1(a.i,a.l)):(g||(f=wi(f,A1)),a.i=new Ti(f,a.l))}function tt(a,f,g){a.i.set(f,g)}function zo(a){return tt(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ei(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function wi(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,w1),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function w1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hh=/[#\/\?@]/g,T1=/[#\?:]/g,I1=/[#\?]/g,A1=/[#\?@]/g,S1=/#/g;function Ti(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Gs(a){a.g||(a.g=new Map,a.h=0,a.i&&E1(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Ti.prototype,t.add=function(a,f){Gs(this),this.i=null,a=vr(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function fh(a,f){Gs(a),f=vr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function ph(a,f){return Gs(a),f=vr(a,f),a.g.has(f)}t.forEach=function(a,f){Gs(this),this.g.forEach(function(g,b){g.forEach(function(L){a.call(f,L,b,this)},this)},this)};function mh(a,f){Gs(a);let g=[];if(typeof f=="string")ph(a,f)&&(g=g.concat(a.g.get(vr(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)g=g.concat(a[f]);return g}t.set=function(a,f){return Gs(this),this.i=null,a=vr(this,a),ph(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=mh(this,a),a.length>0?String(a[0]):f):f};function gh(a,f,g){fh(a,f),g.length>0&&(a.i=null,a.g.set(vr(a,f),_(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let b=0;b<f.length;b++){var g=f[b];const L=_i(g);g=mh(this,g);for(let U=0;U<g.length;U++){let re=L;g[U]!==""&&(re+="="+_i(g[U])),a.push(re)}}return this.i=a.join("&")};function _h(a){const f=new Ti;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function vr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function C1(a,f){f&&!a.j&&(Gs(a),a.i=null,a.g.forEach(function(g,b){const L=b.toLowerCase();b!=L&&(fh(this,b),gh(this,L,g))},a)),a.j=f}function R1(a,f){const g=new gi;if(o.Image){const b=new Image;b.onload=h(ss,g,"TestLoadImage: loaded",!0,f,b),b.onerror=h(ss,g,"TestLoadImage: error",!1,f,b),b.onabort=h(ss,g,"TestLoadImage: abort",!1,f,b),b.ontimeout=h(ss,g,"TestLoadImage: timeout",!1,f,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=a}else f(!1)}function k1(a,f){const g=new gi,b=new AbortController,L=setTimeout(()=>{b.abort(),ss(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:b.signal}).then(U=>{clearTimeout(L),U.ok?ss(g,"TestPingServer: ok",!0,f):ss(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),ss(g,"TestPingServer: error",!1,f)})}function ss(a,f,g,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(g)}catch{}}function P1(){this.g=new Ot}function ic(a){this.i=a.Sb||null,this.h=a.ab||!1}p(ic,Jt),ic.prototype.g=function(){return new Wo(this.i,this.h)};function Wo(a,f){Z.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Wo,Z),t=Wo.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Ai(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function yh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Ii(this):Ai(this),this.readyState==3&&yh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ii(this))},t.Na=function(a){this.g&&(this.response=a,Ii(this))},t.ga=function(){this.g&&Ii(this)};function Ii(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ai(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function Ai(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vh(a){let f="";return st(a,function(g,b){f+=b,f+=":",f+=g,f+=`\r
`}),f}function oc(a,f,g){e:{for(b in g){var b=!1;break e}b=!0}b||(g=vh(g),typeof a=="string"?g!=null&&_i(g):tt(a,f,g))}function ot(a){Z.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ot,Z);var V1=/^https?$/i,D1=["POST","PUT"];t=ot.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():eh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(U){bh(this,U);return}if(a=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)g.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const U of b.keys())g.set(U,b.get(U));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(D1,f,void 0)>=0)||b||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,re]of g)this.g.setRequestHeader(U,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(U){bh(this,U)}};function bh(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Eh(a),Ko(a)}function Eh(a){a.A||(a.A=!0,Y(a,"complete"),Y(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Y(this,"complete"),Y(this,"abort"),Ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wh(this):this.Xa())},t.Xa=function(){wh(this)};function wh(a){if(a.h&&typeof i<"u"){if(a.v&&rs(a)==4)setTimeout(a.Ca.bind(a),0);else if(Y(a,"readystatechange"),rs(a)==4){a.h=!1;try{const U=a.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var b;if(b=U===0){let re=String(a.D).match(dh)[1]||null;!re&&o.self&&o.self.location&&(re=o.self.location.protocol.slice(0,-1)),b=!V1.test(re?re.toLowerCase():"")}g=b}if(g)Y(a,"complete"),Y(a,"success");else{a.o=6;try{var L=rs(a)>2?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.ca()+"]",Eh(a)}}finally{Ko(a)}}}}function Ko(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,f||Y(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rs(a){return a.g?a.g.readyState:0}t.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Dt(f)}};function Th(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function O1(a){const f={};a=(a.g&&rs(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<a.length;b++){if(y(a[b]))continue;var g=_1(a[b]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=f[L]||[];f[L]=U,U.push(g)}Tt(f,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function Ih(a){this.za=0,this.i=[],this.j=new gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,a),this.Za=Si("retryDelaySeedMs",1e4,a),this.Ta=Si("forwardChannelMaxRetries",2,a),this.va=Si("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new oh(a&&a.concurrentRequestLimit),this.Ba=new P1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ih.prototype,t.ka=8,t.I=1,t.connect=function(a,f,g,b){qt(0),this.W=a,this.H=f||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.J=Oh(this,null,this.W),Qo(this)};function ac(a){if(Ah(a),a.I==3){var f=a.V++,g=bn(a.J);if(tt(g,"SID",a.M),tt(g,"RID",f),tt(g,"TYPE","terminate"),Ci(a,g),f=new ts(a,a.j,f),f.M=2,f.A=zo(bn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Nh(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Ho(f)}Dh(a)}function Go(a){a.g&&(cc(a),a.g.cancel(),a.g=null)}function Ah(a){Go(a),a.v&&(o.clearTimeout(a.v),a.v=null),Jo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Qo(a){if(!ah(a.h)&&!a.m){a.m=!0;var f=a.Ea;J||T(),ne||(J(),ne=!0),k.add(f,a),a.D=0}}function N1(a,f){return lh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=mi(u(a.Ea,a,f),Vh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const L=new ts(this,this.j,a);let U=this.o;if(this.U&&(U?(U=Se(U),_t(U,this.U)):U=this.U),this.u!==null||this.R||(L.J=U,U=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(f+=b,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ch(this,L,f),g=bn(this.J),tt(g,"RID",a),tt(g,"CVER",22),this.G&&tt(g,"X-HTTP-Session-Id",this.G),Ci(this,g),U&&(this.R?f="headers="+_i(vh(U))+"&"+f:this.u&&oc(g,this.u,U)),sc(this.h,L),this.Ra&&tt(g,"TYPE","init"),this.S?(tt(g,"$req",f),tt(g,"SID","null"),L.U=!0,Zl(L,g,null)):Zl(L,g,f),this.I=2}}else this.I==3&&(a?Sh(this,a):this.i.length==0||ah(this.h)||Sh(this))};function Sh(a,f){var g;f?g=f.l:g=a.V++;const b=bn(a.J);tt(b,"SID",a.M),tt(b,"RID",g),tt(b,"AID",a.K),Ci(a,b),a.u&&a.o&&oc(b,a.u,a.o),g=new ts(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Ch(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),sc(a.h,g),Zl(g,b,f)}function Ci(a,f){a.H&&st(a.H,function(g,b){tt(f,b,g)}),a.l&&st({},function(g,b){tt(f,b,g)})}function Ch(a,f,g){g=Math.min(a.i.length,g);const b=a.l?u(a.l.Ka,a.l,a):null;e:{var L=a.i;let Pe=-1;for(;;){const ft=["count="+g];Pe==-1?g>0?(Pe=L[0].g,ft.push("ofs="+Pe)):Pe=0:ft.push("ofs="+Pe);let Ke=!0;for(let vt=0;vt<g;vt++){var U=L[vt].g;const En=L[vt].map;if(U-=Pe,U<0)Pe=Math.max(0,L[vt].g-100),Ke=!1;else try{U="req"+U+"_"||"";try{var re=En instanceof Map?En:Object.entries(En);for(const[Js,is]of re){let os=is;l(is)&&(os=Fe(is)),ft.push(U+Js+"="+encodeURIComponent(os))}}catch(Js){throw ft.push(U+"type="+encodeURIComponent("_badmap")),Js}}catch{b&&b(En)}}if(Ke){re=ft.join("&");break e}}re=void 0}return a=a.i.splice(0,g),f.G=a,re}function Rh(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;J||T(),ne||(J(),ne=!0),k.add(f,a),a.A=0}}function lc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=mi(u(a.Da,a),Vh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,kh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=mi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),Go(this),kh(this))};function cc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function kh(a){a.g=new ts(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=bn(a.na);tt(f,"RID","rpc"),tt(f,"SID",a.M),tt(f,"AID",a.K),tt(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&tt(f,"TO",a.ia),tt(f,"TYPE","xmlhttp"),Ci(a,f),a.u&&a.o&&oc(f,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=zo(bn(f)),g.u=null,g.R=!0,sh(g,a)}t.Va=function(){this.C!=null&&(this.C=null,Go(this),lc(this),qt(19))};function Jo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Ph(a,f){var g=null;if(a.g==f){Jo(a),cc(a),a.g=null;var b=2}else if(nc(a.h,f))g=f.G,ch(a.h,f),b=1;else return;if(a.I!=0){if(f.o)if(b==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var L=a.D;b=Ws(),Y(b,new Xd(b,g)),Qo(a)}else Rh(a);else if(L=f.m,L==3||L==0&&f.X>0||!(b==1&&N1(a,f)||b==2&&lc(a)))switch(g&&g.length>0&&(f=a.h,f.i=f.i.concat(g)),L){case 1:Qs(a,5);break;case 4:Qs(a,10);break;case 3:Qs(a,6);break;default:Qs(a,2)}}}function Vh(a,f){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*f}function Qs(a,f){if(a.j.info("Error code "+f),f==2){var g=u(a.bb,a),b=a.Ua;const L=!b;b=new ns(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vi(b,"https"),zo(b),L?R1(b.toString(),g):k1(b.toString(),g)}else qt(2);a.I=0,a.l&&a.l.pa(f),Dh(a),Ah(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Dh(a){if(a.I=0,a.ja=[],a.l){const f=uh(a.h);(f.length!=0||a.i.length!=0)&&(w(a.ja,f),w(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Oh(a,f,g){var b=g instanceof ns?bn(g):new ns(g);if(b.g!="")f&&(b.g=f+"."+b.g),bi(b,b.u);else{var L=o.location;b=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;const U=new ns(null);b&&vi(U,b),f&&(U.g=f),L&&bi(U,L),g&&(U.h=g),b=U}return g=a.G,f=a.wa,g&&f&&tt(b,g,f),tt(b,"VER",a.ka),Ci(a,b),b}function Nh(a,f,g){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new ot(new ic({ab:g})):new ot(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xh(){}t=xh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yo(){}Yo.prototype.g=function(a,f){return new Xt(a,f)};function Xt(a,f){Z.call(this),this.g=new Ih(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!y(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new br(this)}p(Xt,Z),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){ac(this.g)},Xt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=Fe(a),a=g);f.i.push(new b1(f.Ya++,a)),f.I==3&&Qo(f)},Xt.prototype.N=function(){this.g.l=null,delete this.j,ac(this.g),delete this.g,Xt.Z.N.call(this)};function Mh(a){_r.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const g in f){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}p(Mh,_r);function Lh(){At.call(this),this.status=1}p(Lh,At);function br(a){this.g=a}p(br,xh),br.prototype.ra=function(){Y(this.g,"a")},br.prototype.qa=function(a){Y(this.g,new Mh(a))},br.prototype.pa=function(a){Y(this.g,new Lh)},br.prototype.oa=function(){Y(this.g,"b")},Yo.prototype.createWebChannel=Yo.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,G_=function(){return new Yo},K_=function(){return Ws()},W_=yt,uu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,wa=qo,Zd.COMPLETE="complete",z_=Zd,Yt.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",Z.prototype.listen=Z.prototype.J,Mi=Yt,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,H_=ot}).apply(typeof ia<"u"?ia:typeof self<"u"?self:typeof window<"u"?window:{});const up="@firebase/firestore",dp="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new sd("@firebase/firestore");function Sr(){return cr.logLevel}function ce(t,...e){if(cr.logLevel<=Ne.DEBUG){const n=e.map(od);cr.debug(`Firestore (${oi}): ${t}`,...n)}}function Jn(t,...e){if(cr.logLevel<=Ne.ERROR){const n=e.map(od);cr.error(`Firestore (${oi}): ${t}`,...n)}}function Kr(t,...e){if(cr.logLevel<=Ne.WARN){const n=e.map(od);cr.warn(`Firestore (${oi}): ${t}`,...n)}}function od(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Q_(t,s,n)}function Q_(t,e,n){let s=`FIRESTORE (${oi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Jn(s),new Error(s)}function He(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Q_(e,r,s)}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class CA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RA{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ks,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ks)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string",31837,{l:s}),new J_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class kA{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class PA{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new kA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const s=i=>{i.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=DA(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function xe(t,e){return t<e?-1:t>e?1:0}function du(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Dc(r)===Dc(i)?xe(r,i):Dc(r)?1:-1}return xe(t.length,e.length)}const OA=55296,NA=57343;function Dc(t){const e=t.charCodeAt(0);return e>=OA&&e<=NA}function Gr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="__name__";class An{constructor(e,n,s){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&we(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return An.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof An?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=An.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return xe(e.length,n.length)}static compareSegments(e,n){const s=An.isNumericId(e),r=An.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?An.extractNumericId(e).compare(An.extractNumericId(n)):du(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rs.fromString(e.substring(4,e.length-2))}}class Ze extends An{construct(e,n,s){return new Ze(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends An{construct(e,n,s){return new kt(e,n,s)}static isValidIdentifier(e){return xA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fp}static keyField(){return new kt([fp])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new le(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new le(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Ze.fromString(e))}static fromName(e){return new me(Ze.fromString(e).popFirst(5))}static empty(){return new me(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t,e,n){if(!n)throw new le(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MA(t,e,n,s){if(e===!0&&s===!0)throw new le(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pp(t){if(!me.isDocumentKey(t))throw new le(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mp(t){if(me.isDocumentKey(t))throw new le(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function X_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function Qr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cl(t);throw new le(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vo(t,e){if(!X_(t))throw new le(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new le(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=-62135596800,_p=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*_p);return new nt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gp)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_p}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vo(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:dt("string",nt._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new nt(0,0))}static max(){return new Ae(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=-1;function LA(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Ae.fromTimestamp(s===1e9?new nt(n+1,0):new nt(n,s));return new xs(r,me.empty(),e)}function $A(t){return new xs(t.readTime,t.key,mo)}class xs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new xs(Ae.min(),me.empty(),mo)}static max(){return new xs(Ae.max(),me.empty(),mo)}}function FA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ai(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==UA)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,s)=>{n(e)})}static reject(e){return new K((n,s)=>{s(e)})}static waitFor(e){return new K((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=K.resolve(!1);for(const s of e)n=n.next(r=>r?K.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new K((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new K((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function jA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function li(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=-1;function kl(t){return t==null}function Ka(t){return t===0&&1/t==-1/0}function qA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ka(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="";function HA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yp(e)),e=zA(t.get(n),e);return yp(e)}function zA(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Z_:n+="";break;default:n+=i}}return n}function yp(t){return t+Z_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ey(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oa(this.root,e,this.comparator,!0)}}class oa{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??St.RED,this.left=r??St.EMPTY,this.right=i??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new St(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return St.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bp(this.data.getIterator())}getIteratorFrom(e){return new bp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class bp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new en([])}unionWith(e){let n=new mt(kt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ty("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const WA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(He(!!t,39018),typeof t=="string"){let e=0;const n=WA.exec(t);if(He(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ls(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="server_timestamp",sy="__type__",ry="__previous_value__",iy="__local_write_time__";function cd(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sy])==null?void 0:s.stringValue)===ny}function Pl(t){const e=t.mapValue.fields[ry];return cd(e)?Pl(e):e}function go(t){const e=Ms(t.mapValue.fields[iy].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,s,r,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ga="(default)";class _o{constructor(e,n){this.projectId=e,this.database=n||Ga}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database===Ga}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__type__",GA="__max__",aa={mapValue:{}},ay="__vector__",Qa="value";function $s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cd(t)?4:JA(t)?9007199254740991:QA(t)?10:11:we(28295,{value:t})}function Mn(t,e){if(t===e)return!0;const n=$s(t);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return go(t).isEqual(go(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ms(r.timestampValue),l=Ms(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ls(r.bytesValue).isEqual(Ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return at(r.geoPointValue.latitude)===at(i.geoPointValue.latitude)&&at(r.geoPointValue.longitude)===at(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return at(r.integerValue)===at(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=at(r.doubleValue),l=at(i.doubleValue);return o===l?Ka(o)===Ka(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Gr(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(vp(o)!==vp(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Mn(o[c],l[c])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function yo(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function Jr(t,e){if(t===e)return 0;const n=$s(t),s=$s(e);if(n!==s)return xe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=at(i.integerValue||i.doubleValue),c=at(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ep(t.timestampValue,e.timestampValue);case 4:return Ep(go(t),go(e));case 5:return du(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ls(i),c=Ls(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=xe(l[u],c[u]);if(h!==0)return h}return xe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=xe(at(i.latitude),at(o.latitude));return l!==0?l:xe(at(i.longitude),at(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,_,w,S;const l=i.fields||{},c=o.fields||{},u=(m=l[Qa])==null?void 0:m.arrayValue,h=(_=c[Qa])==null?void 0:_.arrayValue,p=xe(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((S=h==null?void 0:h.values)==null?void 0:S.length)||0);return p!==0?p:wp(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===aa.mapValue&&o===aa.mapValue)return 0;if(i===aa.mapValue)return 1;if(o===aa.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=du(c[p],h[p]);if(m!==0)return m;const _=Jr(l[c[p]],u[h[p]]);if(_!==0)return _}return xe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Ep(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=Ms(t),s=Ms(e),r=xe(n.seconds,s.seconds);return r!==0?r:xe(n.nanos,s.nanos)}function wp(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Jr(n[r],s[r]);if(i)return i}return xe(n.length,s.length)}function Yr(t){return hu(t)}function hu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ms(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=hu(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${hu(n.fields[o])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function Ta(t){switch($s(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pl(t);return e?16+Ta(e):16;case 5:return 2*t.stringValue.length;case 6:return Ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Ta(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return qs(s.fields,(i,o)=>{r+=i.length+Ta(o)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function Tp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fu(t){return!!t&&"integerValue"in t}function ud(t){return!!t&&"arrayValue"in t}function Ip(t){return!!t&&"nullValue"in t}function Ap(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ia(t){return!!t&&"mapValue"in t}function QA(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oy])==null?void 0:s.stringValue)===ay}function Ji(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return qs(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ji(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ji(t.arrayValue.values[n]);return e}return{...t}}function JA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ji(n)}setAll(e){let n=kt.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Ji(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Ia(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){qs(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Qt(Ji(this.value))}}function ly(t){const e=[];return qs(t.fields,(n,s)=>{const r=new kt([n]);if(Ia(s)){const i=ly(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new $t(e,0,Ae.min(),Ae.min(),Ae.min(),Qt.empty(),0)}static newFoundDocument(e,n,s,r){return new $t(e,1,n,Ae.min(),s,r,0)}static newNoDocument(e,n){return new $t(e,2,n,Ae.min(),Ae.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Ae.min(),Ae.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.position=e,this.inclusive=n}}function Sp(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=me.comparator(me.fromName(o.referenceValue),n.key):s=Jr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Cp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function YA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{}class ut extends cy{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ZA(e,n,s):n==="array-contains"?new nS(e,s):n==="in"?new sS(e,s):n==="not-in"?new rS(e,s):n==="array-contains-any"?new iS(e,s):new ut(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new eS(e,s):new tS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jr(n,this.value)):n!==null&&$s(this.value)===$s(n)&&this.matchesComparison(Jr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends cy{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new gn(e,n)}matches(e){return uy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uy(t){return t.op==="and"}function dy(t){return XA(t)&&uy(t)}function XA(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function pu(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Yr(t.value);if(dy(t))return t.filters.map(e=>pu(e)).join(",");{const e=t.filters.map(n=>pu(n)).join(",");return`${t.op}(${e})`}}function hy(t,e){return t instanceof ut?function(s,r){return r instanceof ut&&s.op===r.op&&s.field.isEqual(r.field)&&Mn(s.value,r.value)}(t,e):t instanceof gn?function(s,r){return r instanceof gn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&hy(o,r.filters[l]),!0):!1}(t,e):void we(19439)}function fy(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Yr(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(fy).join(" ,")+"}"}(t):"Filter"}class ZA extends ut{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class eS extends ut{constructor(e,n){super(e,"in",n),this.keys=py("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tS extends ut{constructor(e,n){super(e,"not-in",n),this.keys=py("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function py(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>me.fromName(s.referenceValue))}class nS extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ud(n)&&yo(n.arrayValue,this.value)}}class sS extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yo(this.value.arrayValue,n)}}class rS extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yo(this.value.arrayValue,n)}}class iS extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>yo(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Rp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new oS(t,e,n,s,r,i,o)}function dd(t){const e=ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>pu(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Yr(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Yr(s)).join(",")),e.Te=n}return e.Te}function hd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cp(t.startAt,e.startAt)&&Cp(t.endAt,e.endAt)}function mu(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aS(t,e,n,s,r,i,o,l){return new ci(t,e,n,s,r,i,o,l)}function my(t){return new ci(t)}function kp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gy(t){return t.collectionGroup!==null}function Yi(t){const e=ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new mt(kt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new vo(i,s))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new vo(kt.keyField(),s))}return e.Ie}function kn(t){const e=ke(t);return e.Ee||(e.Ee=lS(e,Yi(t))),e.Ee}function lS(t,e){if(t.limitType==="F")return Rp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new vo(r.field,i)});const n=t.endAt?new Ja(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ja(t.startAt.position,t.startAt.inclusive):null;return Rp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function gu(t,e){const n=t.filters.concat([e]);return new ci(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _u(t,e,n){return new ci(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vl(t,e){return hd(kn(t),kn(e))&&t.limitType===e.limitType}function _y(t){return`${dd(kn(t))}|lt:${t.limitType}`}function Cr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>fy(r)).join(", ")}]`),kl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Yr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Yr(r)).join(",")),`Target(${s})`}(kn(t))}; limitType=${t.limitType})`}function Dl(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):me.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Yi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=Sp(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,Yi(s),r)||s.endAt&&!function(o,l,c){const u=Sp(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,Yi(s),r))}(t,e)}function cS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yy(t){return(e,n)=>{let s=!1;for(const r of Yi(t)){const i=uS(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function uS(t,e,n){const s=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Jr(c,u):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return ey(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new it(me.comparator);function Yn(){return dS}const vy=new it(me.comparator);function Li(...t){let e=vy;for(const n of t)e=e.insert(n.key,n);return e}function by(t){let e=vy;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function sr(){return Xi()}function Ey(){return Xi()}function Xi(){return new fr(t=>t.toString(),(t,e)=>t.isEqual(e))}const hS=new it(me.comparator),fS=new mt(me.comparator);function Me(...t){let e=fS;for(const n of t)e=e.add(n);return e}const pS=new mt(xe);function mS(){return pS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ka(e)?"-0":e}}function wy(t){return{integerValue:""+t}}function gS(t,e){return qA(e)?wy(e):fd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this._=void 0}}function _S(t,e,n){return t instanceof bo?function(r,i){const o={fields:{[sy]:{stringValue:ny},[iy]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&cd(i)&&(i=Pl(i)),i&&(o.fields[ry]=i),{mapValue:o}}(n,e):t instanceof Eo?Iy(t,e):t instanceof wo?Ay(t,e):function(r,i){const o=Ty(r,i),l=Pp(o)+Pp(r.Ae);return fu(o)&&fu(r.Ae)?wy(l):fd(r.serializer,l)}(t,e)}function yS(t,e,n){return t instanceof Eo?Iy(t,e):t instanceof wo?Ay(t,e):n}function Ty(t,e){return t instanceof Ya?function(s){return fu(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class bo extends Ol{}class Eo extends Ol{constructor(e){super(),this.elements=e}}function Iy(t,e){const n=Sy(e);for(const s of t.elements)n.some(r=>Mn(r,s))||n.push(s);return{arrayValue:{values:n}}}class wo extends Ol{constructor(e){super(),this.elements=e}}function Ay(t,e){let n=Sy(e);for(const s of t.elements)n=n.filter(r=>!Mn(r,s));return{arrayValue:{values:n}}}class Ya extends Ol{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Pp(t){return at(t.integerValue||t.doubleValue)}function Sy(t){return ud(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.field=e,this.transform=n}}function bS(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Eo&&r instanceof Eo||s instanceof wo&&r instanceof wo?Gr(s.elements,r.elements,Mn):s instanceof Ya&&r instanceof Ya?Mn(s.Ae,r.Ae):s instanceof bo&&r instanceof bo}(t.transform,e.transform)}class ES{constructor(e,n){this.version=e,this.transformResults=n}}class Pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Aa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nl{}function Cy(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ky(t.key,Pn.none()):new Do(t.key,t.data,Pn.none());{const n=t.data,s=Qt.empty();let r=new mt(kt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Hs(t.key,s,new en(r.toArray()),Pn.none())}}function wS(t,e,n){t instanceof Do?function(r,i,o){const l=r.value.clone(),c=Dp(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(r,i,o){if(!Aa(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Dp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Ry(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Zi(t,e,n,s){return t instanceof Do?function(i,o,l,c){if(!Aa(i.precondition,o))return l;const u=i.value.clone(),h=Op(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof Hs?function(i,o,l,c){if(!Aa(i.precondition,o))return l;const u=Op(i.fieldTransforms,c,o),h=o.data;return h.setAll(Ry(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return Aa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function TS(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Ty(s.transform,r||null);i!=null&&(n===null&&(n=Qt.empty()),n.set(s.field,i))}return n||null}function Vp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Gr(s,r,(i,o)=>bS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Do extends Nl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hs extends Nl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ry(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Dp(t,e,n){const s=new Map;He(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,yS(o,l,n[r]))}return s}function Op(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,_S(i,o,e))}return s}class ky extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IS extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&wS(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Zi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Zi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Ey();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=Cy(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&Gr(this.mutations,e.mutations,(n,s)=>Vp(n,s))&&Gr(this.baseMutations,e.baseMutations,(n,s)=>Vp(n,s))}}class pd{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){He(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return hS}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new pd(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Le;function RS(t){switch(t){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function Py(t){if(t===void 0)return Jn("GRPC error has no .code"),W.UNKNOWN;switch(t){case ct.OK:return W.OK;case ct.CANCELLED:return W.CANCELLED;case ct.UNKNOWN:return W.UNKNOWN;case ct.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case ct.INTERNAL:return W.INTERNAL;case ct.UNAVAILABLE:return W.UNAVAILABLE;case ct.UNAUTHENTICATED:return W.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case ct.NOT_FOUND:return W.NOT_FOUND;case ct.ALREADY_EXISTS:return W.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return W.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case ct.ABORTED:return W.ABORTED;case ct.OUT_OF_RANGE:return W.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return W.UNIMPLEMENTED;case ct.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:t})}}(Le=ct||(ct={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new Rs([4294967295,4294967295],0);function Np(t){const e=kS().encode(t),n=new q_;return n.update(e),new Uint8Array(n.digest())}function xp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rs([n,s],0),new Rs([r,i],0)]}class md{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $i(`Invalid padding: ${n}`);if(s<0)throw new $i(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $i(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $i(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Rs.fromNumber(s)));return r.compare(PS)===1&&(r=new Rs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Np(e),[s,r]=xp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new md(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Np(e),[s,r]=xp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $i extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Oo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new xl(Ae.min(),r,new it(xe),Yn(),Me())}}class Oo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Oo(s,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class Vy{constructor(e,n){this.targetId=e,this.Ce=n}}class Dy{constructor(e,n,s=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Mp{constructor(){this.ve=0,this.Fe=Lp(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),s=Me();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:we(38017,{changeType:i})}}),new Oo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Lp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yn(),this.Je=la(),this.He=la(),this.Ye=new it(xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(mu(i))if(s===0){const o=new me(i.path);this.et(n,o,$t.newNoDocument(o,Ae.min()))}else He(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Ls(s).toUint8Array()}catch(c){if(c instanceof ty)return Kr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new md(o,r,i)}catch(c){return Kr(c instanceof $i?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&mu(l.target)){const c=new me(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,$t.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Me();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new xl(e,n,this.Ye,this.je,s);return this.je=Yn(),this.Je=la(),this.He=la(),this.Ye=new it(xe),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Mp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new mt(xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new mt(xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function la(){return new it(me.comparator)}function Lp(){return new it(me.comparator)}const DS={asc:"ASCENDING",desc:"DESCENDING"},OS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NS={and:"AND",or:"OR"};class xS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yu(t,e){return t.useProto3Json||kl(e)?e:{value:e}}function Xa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Oy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MS(t,e){return Xa(t,e.toTimestamp())}function Vn(t){return He(!!t,49232),Ae.fromTimestamp(function(n){const s=Ms(n);return new nt(s.seconds,s.nanos)}(t))}function gd(t,e){return vu(t,e).canonicalString()}function vu(t,e){const n=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ny(t){const e=Ze.fromString(t);return He(Fy(e),10190,{key:e.toString()}),e}function bu(t,e){return gd(t.databaseId,e.path)}function Oc(t,e){const n=Ny(e);if(n.get(1)!==t.databaseId.projectId)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(My(n))}function xy(t,e){return gd(t.databaseId,e)}function LS(t){const e=Ny(t);return e.length===4?Ze.emptyPath():My(e)}function Eu(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function My(t){return He(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $p(t,e,n){return{name:bu(t,e),fields:n.value.mapValue.fields}}function $S(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(He(h===void 0||typeof h=="string",58123),Vt.fromBase64String(h||"")):(He(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?W.UNKNOWN:Py(u.code);return new le(h,u.message||"")}(o);n=new Dy(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Oc(t,s.document.name),i=Vn(s.document.updateTime),o=s.document.createTime?Vn(s.document.createTime):Ae.min(),l=new Qt({mapValue:{fields:s.document.fields}}),c=$t.newFoundDocument(r,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];n=new Sa(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Oc(t,s.document),i=s.readTime?Vn(s.readTime):Ae.min(),o=$t.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Sa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Oc(t,s.document),i=s.removedTargetIds||[];n=new Sa([],i,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new CS(r,i),l=s.targetId;n=new Vy(l,o)}}return n}function FS(t,e){let n;if(e instanceof Do)n={update:$p(t,e.key,e.value)};else if(e instanceof ky)n={delete:bu(t,e.key)};else if(e instanceof Hs)n={update:$p(t,e.key,e.data),updateMask:GS(e.fieldMask)};else{if(!(e instanceof IS))return we(16599,{Vt:e.type});n={verify:bu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof bo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Eo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ya)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw we(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:MS(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we(27497)}(t,e.precondition)),n}function US(t,e){return t&&t.length>0?(He(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Vn(r.updateTime):Vn(i);return o.isEqual(Ae.min())&&(o=Vn(i)),new ES(o,r.transformResults||[])}(n,e))):[]}function BS(t,e){return{documents:[xy(t,e.path)]}}function jS(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xy(t,r);const i=function(u){if(u.length!==0)return $y(gn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Rr(m.field),direction:zS(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=yu(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function qS(t){let e=LS(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){He(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const m=Ly(p);return m instanceof gn&&dy(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(w){return new vo(kr(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,kl(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,_=p.values||[];return new Ja(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,_=p.values||[];return new Ja(_,m)}(n.endAt)),aS(e,r,o,i,l,"F",c,u)}function HS(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ly(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=kr(n.unaryFilter.field);return ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=kr(n.unaryFilter.field);return ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=kr(n.unaryFilter.field);return ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kr(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return ut.create(kr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(s=>Ly(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function zS(t){return DS[t]}function WS(t){return OS[t]}function KS(t){return NS[t]}function Rr(t){return{fieldPath:t.canonicalString()}}function kr(t){return kt.fromServerFormat(t.fieldPath)}function $y(t){return t instanceof ut?function(n){if(n.op==="=="){if(Ap(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(Ip(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ap(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(Ip(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:WS(n.op),value:n.value}}}(t):t instanceof gn?function(n){const s=n.getFilters().map(r=>$y(r));return s.length===1?s[0]:{compositeFilter:{op:KS(n.op),filters:s}}}(t):we(54877,{filter:t})}function GS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,s,r,i=Ae.min(),o=Ae.min(),l=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.yt=e}}function JS(t){const e=qS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_u(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.Cn=new XS}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(xs.min())}updateCollectionGroup(e,n,s){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class XS{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new mt(Ze.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new mt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uy=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(Uy,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xr(0)}static cr(){return new Xr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="LruGarbageCollector",ZS=1048576;function Bp([t,e],[n,s]){const r=xe(t,n);return r===0?xe(e,s):r}class eC{constructor(e){this.Ir=e,this.buffer=new mt(Bp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Bp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Up,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){li(n)?ce(Up,"Ignoring IndexedDB error during garbage collection: ",n):await ai(n)}await this.Vr(3e5)})}}class nC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Rl.ce);const s=new eC(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Fp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(u=Date.now(),Sr()<=Ne.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function sC(t,e){return new nC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.changes=new fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?K.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Zi(s.mutation,r,en.empty(),nt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Me()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Me()){const r=sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Li();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Me()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=Yn();const o=Xi(),l=function(){return Xi()}();return n.forEach((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Hs)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Zi(h.mutation,u,h.mutation.getFieldMask(),nt.now())):o.set(u.key,en.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new iC(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Xi();let r=new it((o,l)=>o-l),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||en.empty();h=l.applyToLocalView(u,h),s.set(c,h);const p=(r.get(l.batchId)||Me()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,p=Ey();h.forEach(m=>{if(!i.has(m)){const _=Cy(n.get(m),s.get(m));_!==null&&p.set(m,_),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return K.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):K.resolve(sr());let l=mo,c=i;return o.next(u=>K.forEach(u,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Me())).next(h=>({batchId:l,changes:by(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(s=>{let r=Li();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Li();return this.indexManager.getCollectionParents(e,i).next(l=>K.forEach(l,c=>{const u=function(p,m){return new ci(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,$t.newInvalidDocument(h)))});let l=Li();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Zi(h.mutation,u,en.empty(),nt.now()),Dl(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Vn(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:JS(r.bundledQuery),readTime:Vn(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.overlays=new it(me.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const s=sr();return K.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),K.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),K.resolve()}getOverlaysForCollection(e,n,s){const r=sr(),i=n.length+1,o=new me(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new it((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=sr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=sr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=r)););return K.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new SS(n,s));let i=this.qr.get(n);i===void 0&&(i=Me(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this.Qr=new mt(bt.$r),this.Ur=new mt(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new bt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new bt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new me(new Ze([])),s=new bt(n,e),r=new bt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Ze([])),s=new bt(n,e),r=new bt(n,e+1);let i=Me();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new bt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||xe(e.Yr,n.Yr)}static Kr(e,n){return xe(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new mt(bt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AS(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new bt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?ld:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new bt(n,0),r=new bt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new mt(xe);return n.forEach(r=>{const i=new bt(r,0),o=new bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),K.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;me.isDocumentKey(i)||(i=i.child(""));const o=new bt(new me(i),0);let l=new mt(xe);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),K.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return K.forEach(n.mutations,r=>{const i=new bt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new bt(n,0),r=this.Zr.firstAfterOrEqual(s);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.ri=e,this.docs=function(){return new it(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return K.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let s=Yn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():$t.newInvalidDocument(r))}),K.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Yn();const o=n.path,l=new me(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||FA($A(h),s)<=0||(r.has(h.key)||Dl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,n,s,r){we(9500)}ii(e,n){return K.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new hC(this)}getSize(e){return K.resolve(this.size)}}class hC extends rC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.persistence=e,this.si=new fr(n=>dd(n),hd),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new _d,this.targetCount=0,this.ai=Xr.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Xr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),K.waitFor(i).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return K.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),K.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return K.resolve(s)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rl(0),this.li=!1,this.li=!0,this.hi=new cC,this.referenceDelegate=e(this),this.Pi=new fC(this),this.indexManager=new YS,this.remoteDocumentCache=function(r){return new dC(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new QS(n),this.Ii=new aC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new uC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const r=new pC(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return K.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class pC extends BA{constructor(e){super(),this.currentSequenceNumber=e}}class yd{constructor(e){this.persistence=e,this.Ri=new _d,this.Vi=null}static mi(e){return new yd(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),K.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,s=>{const r=me.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Za{constructor(e,n){this.persistence=e,this.pi=new fr(s=>HA(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=sC(this,n)}static mi(e,n){return new Za(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?K.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,Ae.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ta(e.data.value)),n}br(e,n,s){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Me(),r=Me();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new vd(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return l0()?8:jA(jt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new mC;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Sr()<=Ne.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Cr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Sr()<=Ne.DEBUG&&ce("QueryEngine","Query:",Cr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Sr()<=Ne.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Cr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):K.resolve())}ys(e,n){if(kp(n))return K.resolve(null);let s=kn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=_u(n,null,"F"),s=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Me(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,_u(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,s,r){return kp(n)||r.isEqual(Ae.min())?K.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?K.resolve(null):(Sr()<=Ne.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cr(n)),this.vs(e,o,n,LA(r,mo)).next(l=>l))})}Ds(e,n){let s=new mt(yy(e));return n.forEach((r,i)=>{Dl(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Sr()<=Ne.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Cr(n)),this.ps.getDocumentsMatchingQuery(e,n,xs.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="LocalStore",_C=3e8;class yC{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new it(xe),this.xs=new fr(i=>dd(i),hd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function vC(t,e,n,s){return new yC(t,e,n,s)}async function jy(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Me();for(const u of r){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function bC(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const p=u.batch,m=p.keys();let _=K.resolve();return m.forEach(w=>{_=_.next(()=>h.getEntry(c,w)).next(S=>{const P=u.docVersions.get(w);He(P!==null,48541),S.version.compareTo(P)<0&&(p.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),h.addEntry(S)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Me();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function qy(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function EC(t,e){const n=ke(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,p)));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Vt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,s)),r=r.insert(p,_),function(S,P,N){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=_C?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,_,h)&&l.push(n.Pi.updateTargetData(i,_))});let c=Yn(),u=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(wC(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!s.isEqual(Ae.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return K.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function wC(t,e,n){let s=Me(),r=Me();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Yn();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ce(bd,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function TC(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ld),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function IC(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,K.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new ws(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function wu(t,e,n){const s=ke(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!li(o))throw o;ce(bd,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function jp(t,e,n){const s=ke(t);let r=Ae.min(),i=Me();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const p=ke(c),m=p.xs.get(h);return m!==void 0?K.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,h)}(s,o,kn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Ae.min(),n?i:Me())).next(l=>(AC(s,cS(e),l),{documents:l,Qs:i})))}function AC(t,e,n){let s=t.Os.get(e)||Ae.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class qp{constructor(){this.activeTargetIds=mS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SC{constructor(){this.Mo=new qp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="ConnectivityMonitor";class zp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Hp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Hp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca=null;function Tu(){return ca===null?ca=function(){return 268435456+Math.round(2147483648*Math.random())}():ca++,"0x"+ca.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="RestConnection",RC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Ga?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Tu(),l=this.zo(e,n.toUriEncodedString());ce(Nc,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),h=ri(u);return this.Jo(e,l,c,s,h).then(p=>(ce(Nc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Kr(Nc,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=RC[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class VC extends kC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Tu();return new Promise((l,c)=>{const u=new H_;u.setWithCredentials(!0),u.listenOnce(z_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wa.NO_ERROR:const p=u.getResponseJson();ce(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case wa.TIMEOUT:ce(Nt,`RPC '${e}' ${o} timed out`),c(new le(W.DEADLINE_EXCEEDED,"Request time out"));break;case wa.HTTP_ERROR:const m=u.getStatus();if(ce(Nt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const w=_==null?void 0:_.error;if(w&&w.status&&w.message){const S=function(N){const B=N.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(B)>=0?B:W.UNKNOWN}(w.status);c(new le(S,w.message))}else c(new le(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ce(Nt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);ce(Nt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=Tu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=G_(),l=K_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");ce(Nt,`Creating RPC '${e}' stream ${r}: ${h}`,c);const p=o.createWebChannel(h,c);this.I_(p);let m=!1,_=!1;const w=new PC({Yo:P=>{_?ce(Nt,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(m||(ce(Nt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),ce(Nt,`RPC '${e}' stream ${r} sending:`,P),p.send(P))},Zo:()=>p.close()}),S=(P,N,B)=>{P.listen(N,M=>{try{B(M)}catch(H){setTimeout(()=>{throw H},0)}})};return S(p,Mi.EventType.OPEN,()=>{_||(ce(Nt,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),S(p,Mi.EventType.CLOSE,()=>{_||(_=!0,ce(Nt,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(p))}),S(p,Mi.EventType.ERROR,P=>{_||(_=!0,Kr(Nt,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new le(W.UNAVAILABLE,"The operation could not be completed")))}),S(p,Mi.EventType.MESSAGE,P=>{var N;if(!_){const B=P.data[0];He(!!B,16349);const M=B,H=(M==null?void 0:M.error)||((N=M[0])==null?void 0:N.error);if(H){ce(Nt,`RPC '${e}' stream ${r} received error:`,H);const J=H.status;let ne=function(v){const C=ct[v];if(C!==void 0)return Py(C)}(J),k=H.message;ne===void 0&&(ne=W.INTERNAL,k="Unknown error status: "+J+" with message "+H.message),_=!0,w.a_(new le(ne,k)),p.close()}else ce(Nt,`RPC '${e}' stream ${r} received:`,B),w.u_(B)}}),S(l,W_.STAT_EVENT,P=>{P.stat===uu.PROXY?ce(Nt,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===uu.NOPROXY&&ce(Nt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function xc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return new xS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&ce("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="PersistentStream";class zy{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new le(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ce(Wp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ce(Wp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DC extends zy{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$S(this.serializer,e),s=function(i){if(!("targetChange"in i))return Ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?Vn(o.readTime):Ae.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Eu(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=mu(c)?{documents:BS(i,c)}:{query:jS(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Oy(i,o.resumeToken);const u=yu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ae.min())>0){l.readTime=Xa(i,o.snapshotVersion.toTimestamp());const u=yu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=HS(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Eu(this.serializer),n.removeTarget=e,this.q_(n)}}class OC extends zy{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=US(e.writeResults,e.commitTime),s=Vn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Eu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>FS(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{}class xC extends NC{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,vu(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(W.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,vu(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class MC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):ce("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="RemoteStore";class LC{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{pr(this)&&(ce(ur,"Restarting streams for network reachability change."),await async function(c){const u=ke(c);u.Ea.add(4),await No(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ll(u)}(this))})}),this.Ra=new MC(s,r)}}async function Ll(t){if(pr(t))for(const e of t.da)await e(!0)}async function No(t){for(const e of t.da)await e(!1)}function Wy(t,e){const n=ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Id(n)?Td(n):ui(n).O_()&&wd(n,e))}function Ed(t,e){const n=ke(t),s=ui(n);n.Ia.delete(e),s.O_()&&Ky(n,e),n.Ia.size===0&&(s.O_()?s.L_():pr(n)&&n.Ra.set("Unknown"))}function wd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ui(t).Y_(e)}function Ky(t,e){t.Va.Ue(e),ui(t).Z_(e)}function Td(t){t.Va=new VS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ui(t).start(),t.Ra.ua()}function Id(t){return pr(t)&&!ui(t).x_()&&t.Ia.size>0}function pr(t){return ke(t).Ea.size===0}function Gy(t){t.Va=void 0}async function $C(t){t.Ra.set("Online")}async function FC(t){t.Ia.forEach((e,n)=>{wd(t,e)})}async function UC(t,e){Gy(t),Id(t)?(t.Ra.ha(e),Td(t)):t.Ra.set("Unknown")}async function BC(t,e,n){if(t.Ra.set("Online"),e instanceof Dy&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){ce(ur,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await el(t,s)}else if(e instanceof Sa?t.Va.Ze(e):e instanceof Vy?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ae.min()))try{const s=await qy(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),Ky(i,c);const p=new ws(h.target,c,u,h.sequenceNumber);wd(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ce(ur,"Failed to raise snapshot:",s),await el(t,s)}}async function el(t,e,n){if(!li(e))throw e;t.Ea.add(1),await No(t),t.Ra.set("Offline"),n||(n=()=>qy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce(ur,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ll(t)})}function Qy(t,e){return e().catch(n=>el(t,n,e))}async function $l(t){const e=ke(t),n=Fs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ld;for(;jC(e);)try{const r=await TC(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,qC(e,r)}catch(r){await el(e,r)}Jy(e)&&Yy(e)}function jC(t){return pr(t)&&t.Ta.length<10}function qC(t,e){t.Ta.push(e);const n=Fs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Jy(t){return pr(t)&&!Fs(t).x_()&&t.Ta.length>0}function Yy(t){Fs(t).start()}async function HC(t){Fs(t).ra()}async function zC(t){const e=Fs(t);for(const n of t.Ta)e.ea(n.mutations)}async function WC(t,e,n){const s=t.Ta.shift(),r=pd.from(s,e,n);await Qy(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await $l(t)}async function KC(t,e){e&&Fs(t).X_&&await async function(s,r){if(function(o){return RS(o)&&o!==W.ABORTED}(r.code)){const i=s.Ta.shift();Fs(s).B_(),await Qy(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await $l(s)}}(t,e),Jy(t)&&Yy(t)}async function Kp(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),ce(ur,"RemoteStore received new credentials");const s=pr(n);n.Ea.add(3),await No(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ll(n)}async function GC(t,e){const n=ke(t);e?(n.Ea.delete(2),await Ll(n)):e||(n.Ea.add(2),await No(n),n.Ra.set("Unknown"))}function ui(t){return t.ma||(t.ma=function(n,s,r){const i=ke(n);return i.sa(),new DC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:$C.bind(null,t),t_:FC.bind(null,t),r_:UC.bind(null,t),H_:BC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Id(t)?Td(t):t.Ra.set("Unknown")):(await t.ma.stop(),Gy(t))})),t.ma}function Fs(t){return t.fa||(t.fa=function(n,s,r){const i=ke(n);return i.sa(),new OC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:HC.bind(null,t),r_:KC.bind(null,t),ta:zC.bind(null,t),na:WC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $l(t)):(await t.fa.stop(),t.Ta.length>0&&(ce(ur,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Ad(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sd(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),li(t))return new le(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{static emptySet(e){return new xr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=Li(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new xr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.ga=new it(me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Zr{constructor(e,n,s,r,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Zr(e,n,xr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class JC{constructor(){this.queries=Qp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ke(n),i=r.queries;r.queries=Qp(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new le(W.ABORTED,"Firestore shutting down"))}}function Qp(){return new fr(t=>_y(t),Vl)}async function YC(t,e){const n=ke(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new QC,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Sd(o,`Initialization of query '${Cr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Cd(n)}async function XC(t,e){const n=ke(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ZC(t,e){const n=ke(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Cd(n)}function eR(t,e,n){const s=ke(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Cd(t){t.Ca.forEach(e=>{e.next()})}var Iu,Jp;(Jp=Iu||(Iu={})).Ma="default",Jp.Cache="cache";class tR{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Zr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Iu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.key=e}}class Zy{constructor(e){this.key=e}}class nR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=yy(e),this.tu=new xr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Gp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,p)=>{const m=r.get(h),_=Dl(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),S=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;m&&_?m.data.isEqual(_.data)?w!==S&&(s.track({type:3,doc:_}),P=!0):this.su(m,_)||(s.track({type:2,doc:_}),P=!0,(c&&this.eu(_,c)>0||u&&this.eu(_,u)<0)&&(l=!0)):!m&&_?(s.track({type:0,doc:_}),P=!0):m&&!_&&(s.track({type:1,doc:m}),P=!0,(c||u)&&(l=!0)),P&&(_?(o=o.add(_),i=S?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(_,w){const S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:P})}};return S(_)-S(w)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Zr(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new Zy(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new Xy(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Rd="SyncEngine";class sR{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class rR{constructor(e){this.key=e,this.hu=!1}}class iR{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new fr(l=>_y(l),Vl),this.Iu=new Map,this.Eu=new Set,this.du=new it(me.comparator),this.Au=new Map,this.Ru=new _d,this.Vu={},this.mu=new Map,this.fu=Xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oR(t,e,n=!0){const s=iv(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await ev(s,e,n,!0),r}async function aR(t,e){const n=iv(t);await ev(n,e,!0,!1)}async function ev(t,e,n,s){const r=await IC(t.localStore,kn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await lR(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Wy(t.remoteStore,r),l}async function lR(t,e,n,s,r){t.pu=(p,m,_)=>async function(S,P,N,B){let M=P.view.ru(N);M.Cs&&(M=await jp(S.localStore,P.query,!1).then(({documents:k})=>P.view.ru(k,M)));const H=B&&B.targetChanges.get(P.targetId),J=B&&B.targetMismatches.get(P.targetId)!=null,ne=P.view.applyChanges(M,S.isPrimaryClient,H,J);return Xp(S,P.targetId,ne.au),ne.snapshot}(t,p,m,_);const i=await jp(t.localStore,e,!0),o=new nR(e,i.Qs),l=o.ru(i.documents),c=Oo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(l,t.isPrimaryClient,c);Xp(t,n,u.au);const h=new sR(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function cR(t,e,n){const s=ke(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Vl(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await wu(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Ed(s.remoteStore,r.targetId),Au(s,r.targetId)}).catch(ai)):(Au(s,r.targetId),await wu(s.localStore,r.targetId,!0))}async function uR(t,e){const n=ke(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ed(n.remoteStore,s.targetId))}async function dR(t,e,n){const s=yR(t);try{const r=await function(o,l){const c=ke(o),u=nt.now(),h=l.reduce((_,w)=>_.add(w.key),Me());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=Yn(),S=Me();return c.Ns.getEntries(_,h).next(P=>{w=P,w.forEach((N,B)=>{B.isValidDocument()||(S=S.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,w)).next(P=>{p=P;const N=[];for(const B of l){const M=TS(B,p.get(B.key).overlayedDocument);M!=null&&N.push(new Hs(B.key,M,ly(M.value.mapValue),Pn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,N,l)}).next(P=>{m=P;const N=P.applyToLocalDocumentSet(p,S);return c.documentOverlayCache.saveOverlays(_,P.batchId,N)})}).then(()=>({batchId:m.batchId,changes:by(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new it(xe)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await xo(s,r.changes),await $l(s.remoteStore)}catch(r){const i=Sd(r,"Failed to persist write");n.reject(i)}}async function tv(t,e){const n=ke(t);try{const s=await EC(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(He(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?He(o.hu,14607):r.removedDocuments.size>0&&(He(o.hu,42227),o.hu=!1))}),await xo(n,s,e)}catch(s){await ai(s)}}function Yp(t,e,n){const s=ke(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=ke(o);c.onlineState=l;let u=!1;c.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(u=!0)}),u&&Cd(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hR(t,e,n){const s=ke(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new it(me.comparator);o=o.insert(i,$t.newNoDocument(i,Ae.min()));const l=Me().add(i),c=new xl(Ae.min(),new Map,new it(xe),o,l);await tv(s,c),s.du=s.du.remove(i),s.Au.delete(e),kd(s)}else await wu(s.localStore,e,!1).then(()=>Au(s,e,n)).catch(ai)}async function fR(t,e){const n=ke(t),s=e.batch.batchId;try{const r=await bC(n.localStore,e);sv(n,s,null),nv(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await xo(n,r)}catch(r){await ai(r)}}async function pR(t,e,n){const s=ke(t);try{const r=await function(o,l){const c=ke(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(He(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,e);sv(s,e,n),nv(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await xo(s,r)}catch(r){await ai(r)}}function nv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function sv(t,e,n){const s=ke(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Au(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||rv(t,s)})}function rv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ed(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),kd(t))}function Xp(t,e,n){for(const s of n)s instanceof Xy?(t.Ru.addReference(s.key,e),mR(t,s)):s instanceof Zy?(ce(Rd,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||rv(t,s.key)):we(19791,{wu:s})}function mR(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ce(Rd,"New document in limbo: "+n),t.Eu.add(s),kd(t))}function kd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(Ze.fromString(e)),s=t.fu.next();t.Au.set(s,new rR(n)),t.du=t.du.insert(n,s),Wy(t.remoteStore,new ws(kn(my(n.path)),s,"TargetPurposeLimboResolution",Rl.ce))}}async function xo(t,e,n){const s=ke(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(u=>{var h;if((u||n)&&s.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){r.push(u);const p=vd.As(c.targetId,u);i.push(p)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const h=ke(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>K.forEach(u,m=>K.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>K.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!li(p))throw p;ce(bd,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const _=h.Ms.get(m),w=_.snapshotVersion,S=_.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(m,S)}}}(s.localStore,i))}async function gR(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){ce(Rd,"User change. New user:",e.toKey());const s=await jy(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new le(W.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await xo(n,s.Ls)}}function _R(t,e){const n=ke(t),s=n.Au.get(e);if(s&&s.hu)return Me().add(s.key);{let r=Me();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function iv(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hR.bind(null,e),e.Pu.H_=ZC.bind(null,e.eventManager),e.Pu.yu=eR.bind(null,e.eventManager),e}function yR(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pR.bind(null,e),e}class tl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ml(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vC(this.persistence,new gC,e.initialUser,this.serializer)}Cu(e){return new By(yd.mi,this.serializer)}Du(e){return new SC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tl.provider={build:()=>new tl};class vR extends tl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof Za,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new tC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new By(s=>Za.mi(s,n),this.serializer)}}class Su{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Yp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gR.bind(null,this.syncEngine),await GC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JC}()}createDatastore(e){const n=Ml(e.databaseInfo.databaseId),s=function(i){return new VC(i)}(e.databaseInfo);return function(i,o,l,c){return new xC(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new LC(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Yp(this.syncEngine,n,0),function(){return zp.v()?new zp:new CC}())}createSyncEngine(e,n){return function(r,i,o,l,c,u,h){const p=new iR(r,i,o,l,c,u);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=ke(r);ce(ur,"RemoteStore shutting down."),i.Ea.add(5),await No(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Su.provider={build:()=>new Su};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="FirestoreClient";class ER{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Mt.UNAUTHENTICATED,this.clientId=ad.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ce(Us,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ce(Us,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Sd(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Mc(t,e){t.asyncQueue.verifyOperationInProgress(),ce(Us,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await jy(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wR(t);ce(Us,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Kp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Kp(e.remoteStore,r)),t._onlineComponents=e}async function wR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce(Us,"Using user provided OfflineComponentProvider");try{await Mc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===W.FAILED_PRECONDITION||r.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Kr("Error using user provided cache. Falling back to memory cache: "+n),await Mc(t,new tl)}}else ce(Us,"Using default OfflineComponentProvider"),await Mc(t,new vR(void 0));return t._offlineComponents}async function ov(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce(Us,"Using user provided OnlineComponentProvider"),await Zp(t,t._uninitializedComponentsProvider._online)):(ce(Us,"Using default OnlineComponentProvider"),await Zp(t,new Su))),t._onlineComponents}function TR(t){return ov(t).then(e=>e.syncEngine)}async function IR(t){const e=await ov(t),n=e.eventManager;return n.onListen=oR.bind(null,e.syncEngine),n.onUnlisten=cR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uR.bind(null,e.syncEngine),n}function AR(t,e,n={}){const s=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new bR({next:m=>{h.Nu(),o.enqueueAndForget(()=>XC(i,p)),m.fromCache&&c.source==="server"?u.reject(new le(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new tR(l,h,{includeMetadataChanges:!0,qa:!0});return YC(i,p)}(await IR(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="firestore.googleapis.com",tm=!0;class nm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lv,this.ssl=tm}else this.host=e.host,this.ssl=e.ssl??tm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZS)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=av(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new SA;switch(s.type){case"firstParty":return new PA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=em.get(n);s&&(ce("ComponentProvider","Removing Datastore"),em.delete(n),s.terminate())}(this),Promise.resolve()}}function SR(t,e,n,s={}){var u;t=Qr(t,Fl);const r=ri(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(x_(`https://${l}`),M_("Firestore",!0)),i.host!==lv&&i.host!==l&&Kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!ar(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,p;if(typeof s.mockUserToken=="string")h=s.mockUserToken,p=Mt.MOCK_USER;else{h=ZI(s.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new le(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mt(m)}t._authCredentials=new CA(new J_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Vo(n,pt._jsonSchema))return new pt(e,s||null,new me(Ze.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:dt("string",pt._jsonSchemaVersion),referencePath:dt("string")};class Ps extends mr{constructor(e,n,s){super(e,n,my(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new me(e))}withConverter(e){return new Ps(this.firestore,e,this._path)}}function Pd(t,e,...n){if(t=wt(t),Y_("collection","path",e),t instanceof Fl){const s=Ze.fromString(e,...n);return mp(s),new Ps(t,null,s)}{if(!(t instanceof pt||t instanceof Ps))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return mp(s),new Ps(t.firestore,null,s)}}function Vd(t,e,...n){if(t=wt(t),arguments.length===1&&(e=ad.newId()),Y_("doc","path",e),t instanceof Fl){const s=Ze.fromString(e,...n);return pp(s),new pt(t,null,new me(s))}{if(!(t instanceof pt||t instanceof Ps))throw new le(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return pp(s),new pt(t.firestore,t instanceof Ps?t.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="AsyncQueue";class rm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hy(this,"async_queue_retry"),this._c=()=>{const s=xc();s&&ce(sm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=xc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!li(e))throw e;ce(sm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",im(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Ad.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:im(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function im(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ul extends Fl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new rm,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rm(e),this._firestoreClient=void 0,await e}}}function CR(t,e){const n=typeof t=="object"?t:U_(),s=typeof t=="string"?t:Ga,r=id(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=YI("firestore");i&&SR(r,...i)}return r}function cv(t){if(t._terminated)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RR(t),t._firestoreClient}function RR(t){var s,r,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new KA(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,av(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ER(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(Vt.fromBase64String(e))}catch(n){throw new le(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vo(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:dt("string",rn._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(Vo(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:dt("string",Dn._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:On._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vo(e,On._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new On(e.vectorValues);throw new le(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}On._jsonSchemaVersion="firestore/vectorValue/1.0",On._jsonSchema={type:dt("string",On._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=/^__.*__$/;class PR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Do(e,this.data,n,this.fieldTransforms)}}class uv{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Dd{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dv(this.Ac)&&kR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VR{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ml(e)}Cc(e,n,s,r=!1){return new Dd({Ac:e,methodName:n,Dc:s,path:kt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Od(t){const e=t._freezeSettings(),n=Ml(t._databaseId);return new VR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DR(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);xd("Data must be an object, but it was:",o,s);const l=hv(s,o);let c,u;if(i.merge)c=new en(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=Cu(e,p,n);if(!o.contains(m))throw new le(W.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);pv(h,m)||h.push(m)}c=new en(h),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new PR(new Qt(l),c,u)}class ql extends jl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ql}}class Nd extends jl{_toFieldTransform(e){return new vS(e.path,new bo)}isEqual(e){return e instanceof Nd}}function OR(t,e,n,s){const r=t.Cc(1,e,n);xd("Data must be an object, but it was:",r,s);const i=[],o=Qt.empty();qs(s,(c,u)=>{const h=Md(e,c,n);u=wt(u);const p=r.yc(h);if(u instanceof ql)i.push(h);else{const m=Mo(u,p);m!=null&&(i.push(h),o.set(h,m))}});const l=new en(i);return new uv(o,l,r.fieldTransforms)}function NR(t,e,n,s,r,i){const o=t.Cc(1,e,n),l=[Cu(e,s,n)],c=[r];if(i.length%2!=0)throw new le(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Cu(e,i[m])),c.push(i[m+1]);const u=[],h=Qt.empty();for(let m=l.length-1;m>=0;--m)if(!pv(u,l[m])){const _=l[m];let w=c[m];w=wt(w);const S=o.yc(_);if(w instanceof ql)u.push(_);else{const P=Mo(w,S);P!=null&&(u.push(_),h.set(_,P))}}const p=new en(u);return new uv(h,p,o.fieldTransforms)}function xR(t,e,n,s=!1){return Mo(n,t.Cc(s?4:3,e))}function Mo(t,e){if(fv(t=wt(t)))return xd("Unsupported field value:",e,t),hv(t,e);if(t instanceof jl)return function(s,r){if(!dv(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=Mo(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return gS(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=nt.fromDate(s);return{timestampValue:Xa(r.serializer,i)}}if(s instanceof nt){const i=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xa(r.serializer,i)}}if(s instanceof Dn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof rn)return{bytesValue:Oy(r.serializer,s._byteString)};if(s instanceof pt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gd(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof On)return function(o,l){return{mapValue:{fields:{[oy]:{stringValue:ay},[Qa]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return fd(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Cl(s)}`)}(t,e)}function hv(t,e){const n={};return ey(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(t,(s,r)=>{const i=Mo(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function fv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Dn||t instanceof rn||t instanceof pt||t instanceof jl||t instanceof On)}function xd(t,e,n){if(!fv(n)||!X_(n)){const s=Cl(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Cu(t,e,n){if((e=wt(e))instanceof Bl)return e._internalPath;if(typeof e=="string")return Md(t,e);throw nl("Field path arguments must be of type string or ",t,!1,void 0,n)}const MR=new RegExp("[~\\*/\\[\\]]");function Md(t,e,n){if(e.search(MR)>=0)throw nl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bl(...e.split("."))._internalPath}catch{throw nl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nl(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new le(W.INVALID_ARGUMENT,l+t+c)}function pv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LR extends mv{data(){return super.data()}}function Hl(t,e){return typeof e=="string"?Md(t,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ld{}class gv extends Ld{}function _v(t,e,...n){let s=[];e instanceof Ld&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof $d).length,l=i.filter(c=>c instanceof zl).length;if(o>1||o>0&&l>0)throw new le(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class zl extends gv{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new zl(e,n,s)}_apply(e){const n=this._parse(e);return vv(e._query,n),new mr(e.firestore,e.converter,gu(e._query,n))}_parse(e){const n=Od(e.firestore);return function(i,o,l,c,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){am(p,h);const w=[];for(const S of p)w.push(om(c,i,S));m={arrayValue:{values:w}}}else m=om(c,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||am(p,h),m=xR(l,o,p,h==="in"||h==="not-in");return ut.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function FR(t,e,n){const s=e,r=Hl("where",t);return zl._create(r,s,n)}class $d extends Ld{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $d(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)vv(o,c),o=gu(o,c)}(e._query,n),new mr(e.firestore,e.converter,gu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fd extends gv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fd(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vo(i,o)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ci(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function yv(t,e="asc"){const n=e,s=Hl("orderBy",t);return Fd._create(s,n)}function om(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new le(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gy(e)&&n.indexOf("/")!==-1)throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ze.fromString(n));if(!me.isDocumentKey(s))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Tp(t,new me(s))}if(n instanceof pt)return Tp(t,n._key);throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cl(n)}.`)}function am(t,e){if(!Array.isArray(t)||t.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vv(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UR{convertValue(e,n="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return qs(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,r,i;const n=(i=(r=(s=e.fields)==null?void 0:s[Qa].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>at(o.doubleValue));return new On(n)}convertGeoPoint(e){return new Dn(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Pl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(go(e));default:return null}}convertTimestamp(e){const n=Ms(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ze.fromString(e);He(Fy(s),9688,{name:e});const r=new _o(s.get(1),s.get(3)),i=new me(s.popFirst(5));return r.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class ua{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mr extends mv{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:dt("string",Mr._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class Ca extends Mr{data(e={}){return super.data(e)}}class Lr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ua(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ca(this._firestore,this._userDataWriter,s.key,s,new ua(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new Ca(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ua(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ca(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ua(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:jR(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ad.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}Lr._jsonSchemaVersion="firestore/querySnapshot/1.0",Lr._jsonSchema={type:dt("string",Lr._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class qR extends UR{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function bv(t){t=Qr(t,mr);const e=Qr(t.firestore,Ul),n=cv(e),s=new qR(e);return $R(t._query),AR(n,t._query).then(r=>new Lr(e,s,t,r))}function Ev(t,e,n,...s){t=Qr(t,pt);const r=Qr(t.firestore,Ul),i=Od(r);let o;return o=typeof(e=wt(e))=="string"||e instanceof Bl?NR(i,"updateDoc",t._key,e,n,s):OR(i,"updateDoc",t._key,e),wv(r,[o.toMutation(t._key,Pn.exists(!0))])}function HR(t,e){const n=Qr(t.firestore,Ul),s=Vd(t),r=BR(t.converter,e);return wv(n,[DR(Od(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,Pn.exists(!1))]).then(()=>s)}function wv(t,e){return function(s,r){const i=new ks;return s.asyncQueue.enqueueAndForget(async()=>dR(await TR(s),r,i)),i.promise}(cv(t),e)}function sl(){return new Nd("serverTimestamp")}(function(e,n=!0){(function(r){oi=r})(ii),Wr(new lr("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new Ul(new RA(s.getProvider("auth-internal")),new VA(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Cs(up,dp,e),Cs(up,dp,"esm2020")})();var zR="firebase",WR="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(zR,WR,"app");function Tv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KR=Tv,Iv=new ko("auth","Firebase",Tv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new sd("@firebase/auth");function GR(t,...e){rl.logLevel<=Ne.WARN&&rl.warn(`Auth (${ii}): ${t}`,...e)}function Ra(t,...e){rl.logLevel<=Ne.ERROR&&rl.error(`Auth (${ii}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,...e){throw Ud(t,...e)}function Nn(t,...e){return Ud(t,...e)}function Av(t,e,n){const s={...KR(),[e]:n};return new ko("auth","Firebase",s).create(e,{appName:t.name})}function Vs(t){return Av(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ud(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Iv.create(t,...e)}function Ee(t,e,...n){if(!t)throw Ud(e,...n)}function Hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ra(e),new Error(e)}function Xn(t,e){t||Hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function QR(){return lm()==="http:"||lm()==="https:"}function lm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QR()||i0()||"connection"in navigator)?navigator.onLine:!0}function YR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=n0()||o0()}get(){return JR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ek=new Lo(3e4,6e4);function gr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zs(t,e,n,s,r={}){return Cv(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=Po({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return r0()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ri(t.emulatorConfig.host)&&(u.credentials="include"),Sv.fetch()(await Rv(t,t.config.apiHost,n,l),u)})}async function Cv(t,e,n){t._canInitEmulator=!1;const s={...XR,...e};try{const r=new nk(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw da(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw da(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw da(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw da(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Av(t,h,u);_n(t,h)}}catch(r){if(r instanceof es)throw r;_n(t,"network-request-failed",{message:String(r)})}}async function Wl(t,e,n,s,r={}){const i=await zs(t,e,n,s,r);return"mfaPendingCredential"in i&&_n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Rv(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Bd(t.config,r):`${t.config.apiScheme}://${r}`;return ZR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function tk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Nn(this.auth,"network-request-failed")),ek.get())})}}function da(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Nn(t,e,s);return r.customData._tokenResponse=n,r}function cm(t){return t!==void 0&&t.enterprise!==void 0}class sk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rk(t,e){return zs(t,"GET","/v2/recaptchaConfig",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function il(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ok(t,e=!1){const n=wt(t),s=await n.getIdToken(e),r=jd(s);Ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:eo(Lc(r.auth_time)),issuedAtTime:eo(Lc(r.iat)),expirationTime:eo(Lc(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Lc(t){return Number(t)*1e3}function jd(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Ra("JWT malformed, contained fewer than 3 sections"),null;try{const r=V_(n);return r?JSON.parse(r):(Ra("Failed to decode base64 JWT payload"),null)}catch(r){return Ra("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function um(t){const e=jd(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof es&&ak(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function ak({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eo(this.lastLoginAt),this.creationTime=eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t){var p;const e=t.auth,n=await t.getIdToken(),s=await To(t,il(e,{idToken:n}));Ee(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(p=r.providerUserInfo)!=null&&p.length?kv(r.providerUserInfo):[],o=uk(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ku(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function ck(t){const e=wt(t);await ol(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uk(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function kv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){const n=await Cv(t,{},async()=>{const s=Po({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Rv(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&ri(t.emulatorConfig.host)&&(c.credentials="include"),Sv.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hk(t,e){return zs(t,"POST","/v2/accounts:revokeToken",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):um(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=um(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await dk(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new $r;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $r,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class un{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ku(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await To(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ok(this,e)}reload(){return ck(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ol(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await To(this,ik(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:w,stsTokenManager:S}=n;Ee(p&&S,e,"internal-error");const P=$r.fromJSON(this.name,S);Ee(typeof p=="string",e,"internal-error"),us(s,e.name),us(r,e.name),Ee(typeof m=="boolean",e,"internal-error"),Ee(typeof _=="boolean",e,"internal-error"),us(i,e.name),us(o,e.name),us(l,e.name),us(c,e.name),us(u,e.name),us(h,e.name);const N=new un({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(N.providerData=w.map(B=>({...B}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,n,s=!1){const r=new $r;r.updateFromServerResponse(n);const i=new un({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ol(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ee(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?kv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new $r;l.updateFromIdToken(s);const c=new un({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ku(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=new Map;function zn(t){Xn(t instanceof Function,"Expected a class definition");let e=dm.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Pv.type="NONE";const hm=Pv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t,e,n){return`firebase:${t}:${e}:${n}`}class Fr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ka(this.userKey,r.apiKey,i),this.fullPersistenceKey=ka("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await il(this.auth,{idToken:e}).catch(()=>{});return n?un._fromGetAccountInfoResponse(this.auth,n,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Fr(zn(hm),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||zn(hm);const o=ka(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let p;if(typeof h=="string"){const m=await il(e,{idToken:h}).catch(()=>{});if(!m)break;p=await un._fromGetAccountInfoResponse(e,m,h)}else p=un._fromJSON(e,h);u!==i&&(l=p),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Fr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Fr(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mv(e))return"Blackberry";if(Lv(e))return"Webos";if(Dv(e))return"Safari";if((e.includes("chrome/")||Ov(e))&&!e.includes("edge/"))return"Chrome";if(xv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Vv(t=jt()){return/firefox\//i.test(t)}function Dv(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ov(t=jt()){return/crios\//i.test(t)}function Nv(t=jt()){return/iemobile/i.test(t)}function xv(t=jt()){return/android/i.test(t)}function Mv(t=jt()){return/blackberry/i.test(t)}function Lv(t=jt()){return/webos/i.test(t)}function qd(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fk(t=jt()){var e;return qd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function pk(){return a0()&&document.documentMode===10}function $v(t=jt()){return qd(t)||xv(t)||Lv(t)||Mv(t)||/windows phone/i.test(t)||Nv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t,e=[]){let n;switch(t){case"Browser":n=fm(jt());break;case"Worker":n=`${fm(jt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ii}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e={}){return zs(t,"GET","/v2/passwordPolicy",gr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=6;class yk{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_k,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pm(this),this.idTokenSubscription=new pm(this),this.beforeStateQueue=new mk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Fr.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await il(this,{idToken:e}),s=await un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(cn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ol(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(Vs(this));const n=e?wt(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gk(this),n=new yk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ko("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await hk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zn(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Fr.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&GR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function di(t){return wt(t)}class pm{constructor(e){this.auth=e,this.observer=null,this.addObserver=m0(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bk(t){Kl=t}function Uv(t){return Kl.loadJS(t)}function Ek(){return Kl.recaptchaEnterpriseScript}function wk(){return Kl.gapiScript}function Tk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Ik{constructor(){this.enterprise=new Ak}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ak{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Sk="recaptcha-enterprise",Bv="NO_RECAPTCHA";class Ck{constructor(e){this.type=Sk,this.auth=di(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{rk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new sk(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function r(i,o,l){const c=window.grecaptcha;cm(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Bv)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ik().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&cm(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Ek();c.length!==0&&(c+=l),Uv(c).then(()=>{r(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function mm(t,e,n,s=!1,r=!1){const i=new Ck(t);let o;if(r)o=Bv;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function gm(t,e,n,s,r){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mm(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await mm(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e){const n=id(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(ar(i,e??{}))return r;_n(r,"already-initialized")}return n.initialize({options:e})}function kk(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Pk(t,e,n){const s=di(t);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=jv(e),{host:o,port:l}=Vk(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(ar(u,s.config.emulator)&&ar(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,ri(o)?(x_(`${i}//${o}${c}`),M_("Auth",!0)):Dk()}function jv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Vk(t){const e=jv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:_m(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:_m(o)}}}function _m(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,n){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function Ok(t,e){return zs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){return Wl(t,"POST","/v1/accounts:signInWithPassword",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e){return Wl(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}async function Mk(t,e){return Wl(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Hd{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Io(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Io(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gm(e,n,"signInWithPassword",Nk);case"emailLink":return xk(e,{email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gm(e,s,"signUpPassword",Ok);case"emailLink":return Mk(e,{idToken:n,email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ur(t,e){return Wl(t,"POST","/v1/accounts:signInWithIdp",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="http://localhost";class dr extends Hd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new dr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ur(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ur(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ur(e,n)}buildRequest(){const e={requestUri:Lk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Po(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fk(t){const e=Ni(xi(t)).link,n=e?Ni(xi(e)).deep_link_id:null,s=Ni(xi(t)).deep_link_id;return(s?Ni(xi(s)).link:null)||s||n||e||t}class zd{constructor(e){const n=Ni(xi(e)),s=n.apiKey??null,r=n.oobCode??null,i=$k(n.mode??null);Ee(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Fk(e);try{return new zd(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.providerId=hi.PROVIDER_ID}static credential(e,n){return Io._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=zd.parseLink(n);return Ee(s,"argument-error"),Io._fromEmailAndCode(e,s.code,s.tenantId)}}hi.PROVIDER_ID="password";hi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends qv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends $o{constructor(){super("facebook.com")}static credential(e){return dr._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends $o{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return dr._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return vs.credential(n,s)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends $o{constructor(){super("github.com")}static credential(e){return dr._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends $o{constructor(){super("twitter.com")}static credential(e,n){return dr._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Es.credential(n,s)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await un._fromIdTokenResponse(e,s,r),o=ym(s);return new ei({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=ym(s);return new ei({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function ym(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends es{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,al.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new al(e,n,s,r)}}function Hv(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?al._fromErrorAndOperation(t,i,e,s):i})}async function Uk(t,e,n=!1){const s=await To(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ei._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e,n=!1){const{auth:s}=t;if(cn(s.app))return Promise.reject(Vs(s));const r="reauthenticate";try{const i=await To(t,Hv(s,r,e,t),n);Ee(i.idToken,s,"internal-error");const o=jd(i.idToken);Ee(o,s,"internal-error");const{sub:l}=o;return Ee(t.uid===l,s,"user-mismatch"),ei._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_n(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zv(t,e,n=!1){if(cn(t.app))return Promise.reject(Vs(t));const s="signIn",r=await Hv(t,s,e),i=await ei._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function jk(t,e){return zv(di(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t){const e=di(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Hk(t,e,n){return cn(t.app)?Promise.reject(Vs(t)):jk(wt(t),hi.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&qk(t),s})}function zk(t,e,n,s){return wt(t).onIdTokenChanged(e,n,s)}function Wk(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function Kk(t,e,n,s){return wt(t).onAuthStateChanged(e,n,s)}function Gk(t){return wt(t).signOut()}const ll="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ll,"1"),this.storage.removeItem(ll),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=1e3,Jk=10;class Kv extends Wv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$v(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);pk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Jk):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kv.type="LOCAL";const Yk=Kv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends Wv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gv.type="SESSION";const Qv=Gv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Gl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await Xk(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Wd("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function eP(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function tP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function sP(){return Jv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="firebaseLocalStorageDb",rP=1,cl="firebaseLocalStorage",Xv="fbase_key";class Fo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ql(t,e){return t.transaction([cl],e?"readwrite":"readonly").objectStore(cl)}function iP(){const t=indexedDB.deleteDatabase(Yv);return new Fo(t).toPromise()}function Pu(){const t=indexedDB.open(Yv,rP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(cl,{keyPath:Xv})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(cl)?e(s):(s.close(),await iP(),e(await Pu()))})})}async function vm(t,e,n){const s=Ql(t,!0).put({[Xv]:e,value:n});return new Fo(s).toPromise()}async function oP(t,e){const n=Ql(t,!1).get(e),s=await new Fo(n).toPromise();return s===void 0?null:s.value}function bm(t,e){const n=Ql(t,!0).delete(e);return new Fo(n).toPromise()}const aP=800,lP=3;class Zv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>lP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gl._getInstance(sP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await tP(),!this.activeServiceWorker)return;this.sender=new Zk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pu();return await vm(e,ll,"1"),await bm(e,ll),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>vm(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>oP(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Ql(r,!1).getAll();return new Fo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zv.type="LOCAL";const cP=Zv;new Lo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t,e){return e?zn(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends Hd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ur(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ur(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ur(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dP(t){return zv(t.auth,new Kd(t),t.bypassAuthState)}function hP(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),Bk(n,new Kd(t),t.bypassAuthState)}async function fP(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),Uk(n,new Kd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dP;case"linkViaPopup":case"linkViaRedirect":return fP;case"reauthViaPopup":case"reauthViaRedirect":return hP;default:_n(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=new Lo(2e3,1e4);class Pr extends e1{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Pr.currentPopupAction&&Pr.currentPopupAction.cancel(),Pr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=Wd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pP.get())};e()}}Pr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="pendingRedirect",Pa=new Map;class gP extends e1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Pa.get(this.auth._key());if(!e){try{const s=await _P(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Pa.set(this.auth._key(),e)}return this.bypassAuthState||Pa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _P(t,e){const n=bP(e),s=vP(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function yP(t,e){Pa.set(t._key(),e)}function vP(t){return zn(t._redirectPersistence)}function bP(t){return ka(mP,t.config.apiKey,t.name)}async function EP(t,e,n=!1){if(cn(t.app))return Promise.reject(Vs(t));const s=di(t),r=uP(s,e),o=await new gP(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=10*60*1e3;class TP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!t1(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Em(e))}saveEventToCache(e){this.cachedEventUids.add(Em(e)),this.lastProcessedEventTime=Date.now()}}function Em(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function t1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(t,e={}){return zs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CP=/^https?/;async function RP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AP(t);for(const n of e)try{if(kP(n))return}catch{}_n(t,"unauthorized-domain")}function kP(t){const e=Ru(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!CP.test(n))return!1;if(SP.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=new Lo(3e4,6e4);function wm(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VP(t){return new Promise((e,n)=>{var r,i,o;function s(){wm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wm(),n(Nn(t,"network-request-failed"))},timeout:PP.get()})}if((i=(r=xn().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=xn().gapi)!=null&&o.load)s();else{const l=Tk("iframefcb");return xn()[l]=()=>{gapi.load?s():n(Nn(t,"network-request-failed"))},Uv(`${wk()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Va=null,e})}let Va=null;function DP(t){return Va=Va||VP(t),Va}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new Lo(5e3,15e3),NP="__/auth/iframe",xP="emulator/auth/iframe",MP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $P(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bd(e,xP):`https://${t.config.authDomain}/${NP}`,s={apiKey:e.apiKey,appName:t.name,v:ii},r=LP.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Po(s).slice(1)}`}async function FP(t){const e=await DP(t),n=xn().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:$P(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MP,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Nn(t,"network-request-failed"),l=xn().setTimeout(()=>{i(o)},OP.get());function c(){xn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BP=500,jP=600,qP="_blank",HP="http://localhost";class Tm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zP(t,e,n,s=BP,r=jP){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...UP,width:s.toString(),height:r.toString(),top:i,left:o},u=jt().toLowerCase();n&&(l=Ov(u)?qP:n),Vv(u)&&(e=e||HP,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[_,w])=>`${m}${_}=${w},`,"");if(fk(u)&&l!=="_self")return WP(e||"",l),new Tm(null);const p=window.open(e||"",l,h);Ee(p,t,"popup-blocked");try{p.focus()}catch{}return new Tm(p)}function WP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="__/auth/handler",GP="emulator/auth/handler",QP=encodeURIComponent("fac");async function Im(t,e,n,s,r,i){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ii,eventId:r};if(e instanceof qv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",p0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof $o){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${QP}=${encodeURIComponent(c)}`:"";return`${JP(t)}?${Po(l).slice(1)}${u}`}function JP({config:t}){return t.emulator?Bd(t,GP):`https://${t.authDomain}/${KP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="webStorageSupport";class YP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qv,this._completeRedirectFn=EP,this._overrideRedirectResult=yP}async _openPopup(e,n,s,r){var o;Xn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Im(e,n,s,Ru(),r);return zP(e,i,Wd())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Im(e,n,s,Ru(),r);return eP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Xn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await FP(e),s=new TP(e);return n.register("authEvent",r=>(Ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($c,{type:$c},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[$c];i!==void 0&&n(!!i),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $v()||Dv()||qd()}}const XP=YP;var Am="@firebase/auth",Sm="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tV(t){Wr(new lr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fv(t)},u=new vk(s,r,i,c);return kk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Wr(new lr("auth-internal",e=>{const n=di(e.getProvider("auth").getImmediate());return(s=>new ZP(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(Am,Sm,eV(t)),Cs(Am,Sm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=5*60,sV=N_("authIdTokenMaxAge")||nV;let Cm=null;const rV=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>sV)return;const r=n==null?void 0:n.token;Cm!==r&&(Cm=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function iV(t=U_()){const e=id(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Rk(t,{popupRedirectResolver:XP,persistence:[cP,Yk,Qv]}),s=N_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=rV(i.toString());Wk(n,o,()=>o(n.currentUser)),zk(n,l=>o(l))}}const r=D_("auth");return r&&Pk(n,`http://${r}`),n}function oV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}bk({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Nn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",oV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tV("Browser");const aV={apiKey:"AIzaSyDKgaceD3l-uFdbiz4Ose_uhCFW1a4a_l0",authDomain:"margalitut.firebaseapp.com",projectId:"margalitut",storageBucket:"margalitut.firebasestorage.app",messagingSenderId:"77219137608",appId:"1:77219137608:web:2017ab65c2dc5c77a2b07d",measurementId:"G-PLGDHJ0T5S"},n1=F_(aV),Uo=CR(n1),Fc=iV(n1),Bo="orders";async function lV(t){try{return{id:(await HR(Pd(Uo,Bo),{...t,status:"pending",paymentStatus:t.paymentMethod==="cash"?"pending":"awaiting",createdAt:sl(),updatedAt:sl()})).id,...t}}catch(e){throw console.error("Error creating order:",e),e}}async function cV(t){try{const e=_v(Pd(Uo,Bo),FR("customer.phone","==",t),yv("createdAt","desc"));return(await bv(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error getting orders by phone:",e),e}}async function uV(){try{const t=_v(Pd(Uo,Bo),yv("createdAt","desc"));return(await bv(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting all orders:",t),t}}async function dV(t,e){try{const n=Vd(Uo,Bo,t);return await Ev(n,{status:e,updatedAt:sl()}),!0}catch(n){throw console.error("Error updating order status:",n),n}}async function hV(t,e){try{const n=Vd(Uo,Bo,t);return await Ev(n,{paymentStatus:e,updatedAt:sl()}),!0}catch(n){throw console.error("Error updating payment status:",n),n}}class jo{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const fV=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Rt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:fV()},Gd=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},pV=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Gd(t);Rt.publicKey=n.publicKey,Rt.blockHeadless=n.blockHeadless,Rt.storageProvider=n.storageProvider,Rt.blockList=n.blockList,Rt.limitRate=n.limitRate,Rt.origin=n.origin||e},s1=async(t,e,n={})=>{const s=await fetch(Rt.origin+t,{method:"POST",headers:n,body:e}),r=await s.text(),i=new jo(s.status,r);if(s.ok)return i;throw i},r1=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},mV=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},i1=t=>t.webdriver||!t.languages||t.languages.length===0,o1=()=>new jo(451,"Unavailable For Headless Browser"),gV=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},_V=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},yV=(t,e)=>t instanceof FormData?t.get(e):t[e],a1=(t,e)=>{if(_V(t))return!1;gV(t.list,t.watchVariable);const n=yV(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},l1=()=>new jo(403,"Forbidden"),vV=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},bV=async(t,e,n)=>{const s=Number(await n.get(t)||0);return e-Date.now()+s},c1=async(t,e,n)=>{if(!e.throttle||!n)return!1;vV(e.throttle,e.id);const s=e.id||t;return await bV(s,e.throttle,n)>0?!0:(await n.set(s,Date.now().toString()),!1)},u1=()=>new jo(429,"Too Many Requests"),EV=async(t,e,n,s)=>{const r=Gd(s),i=r.publicKey||Rt.publicKey,o=r.blockHeadless||Rt.blockHeadless,l=r.storageProvider||Rt.storageProvider,c={...Rt.blockList,...r.blockList},u={...Rt.limitRate,...r.limitRate};return o&&i1(navigator)?Promise.reject(o1()):(r1(i,t,e),mV(n),n&&a1(c,n)?Promise.reject(l1()):await c1(location.pathname,u,l)?Promise.reject(u1()):s1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},wV=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},TV=t=>typeof t=="string"?document.querySelector(t):t,IV=async(t,e,n,s)=>{const r=Gd(s),i=r.publicKey||Rt.publicKey,o=r.blockHeadless||Rt.blockHeadless,l=Rt.storageProvider||r.storageProvider,c={...Rt.blockList,...r.blockList},u={...Rt.limitRate,...r.limitRate};if(o&&i1(navigator))return Promise.reject(o1());const h=TV(n);r1(i,t,e),wV(h);const p=new FormData(h);return a1(c,p)?Promise.reject(l1()):await c1(location.pathname,u,l)?Promise.reject(u1()):(p.append("lib_version","4.4.1"),p.append("service_id",t),p.append("template_id",e),p.append("user_id",i),s1("/api/v1.0/email/send-form",p))},d1={init:pV,send:EV,sendForm:IV,EmailJSResponseStatus:jo},AV="service_44th385",SV="template_76chmaa",CV="bGF3UY6_byYkOW7CT";d1.init(CV);async function RV(t){var e;try{const n=t.items.map(u=>` ${u.name} x${u.quantity} - ${u.price*u.quantity}`).join(`
`);let s="";t.delivery.option==="pickup"?s="    ,  ":(s=`  : ${t.customer.address}
`,s+=`: ${((e=t.delivery.location)==null?void 0:e.name)||""}
`,t.delivery.price?s+=` : ${t.delivery.price}`:t.delivery.requiresCall&&(s+=" :  "));let r="";t.date&&(r+=`: ${t.date}
`),t.time&&(r+=`: ${t.time}`),r||(r=" ");const i={bit:" Bit",paybox:" PayBox",cash:" "};let o="";t.delivery.option==="delivery"&&(t.deliveryFee>0?o=`${t.deliveryFee}`:t.delivery.requiresCall&&(o=" "));const l={order_id:t.orderId,customer_name:t.customer.name,customer_phone:t.customer.phone,customer_email:t.customer.email||" ",delivery_info:s,date_time:r,items_list:n,subtotal:t.subtotal,delivery_fee:o,total:t.total,payment_method:i[t.payment.method]||t.payment.method,special_requests:t.specialRequests||""},c=await d1.send(AV,SV,l);return console.log("Email sent successfully:",c),!0}catch(n){return console.error("Failed to send email:",n),!1}}const vn=ed("order",()=>{const t=oe([]),e=oe({name:"",phone:"",email:"",address:"",city:""}),n=oe(""),s=oe(""),r=oe(""),i=oe([]),o=oe(!1),l=oe(1),c=oe(null),u=oe("pickup"),h=oe(""),p=oe([{id:"hamishkafayim",name:"",zone:1,price:20},{id:"ramat-a",name:"   '",zone:1,price:20},{id:"ramat-b",name:"   '",zone:1,price:20},{id:"ramat-c",name:"   '",zone:1,price:20},{id:"ramat-d",name:"   '",zone:1,price:20},{id:"ramat-e",name:"   ' ( )",zone:1,price:20},{id:"merkaz",name:"   ",zone:2,price:40},{id:"givat-saret",name:" ",zone:2,price:40},{id:"tzora",name:"",zone:2,price:40},{id:"zanoach",name:"",zone:2,price:40},{id:"neve-michael",name:" ",zone:2,price:40},{id:"machseya",name:"",zone:2,price:40},{id:"yishi",name:"",zone:2,price:40},{id:"zecharya",name:"",zone:2,price:40},{id:"netiv-halamed",name:' "',zone:2,price:40},{id:"tzur-hadasa",name:" ",zone:3,price:null,requiresCall:!0},{id:"kfar-uriya",name:" ",zone:3,price:null,requiresCall:!0},{id:"beit-meir",name:" ",zone:3,price:null,requiresCall:!0},{id:"jerusalem",name:"",zone:3,price:null,requiresCall:!0},{id:"modiin",name:"",zone:3,price:null,requiresCall:!0},{id:"other",name:"...",zone:3,price:null,requiresCall:!0}]),m=oe([{id:1,name:" 1 -  ",description:"  ",price:20,icon:""},{id:2,name:" 2 -  ",description:" ",price:40,icon:""},{id:3,name:" 3 - ",description:"  ",price:null,icon:"",requiresCall:!0}]),_=oe(""),w=oe([{id:"bit",name:"Bit",description:"  ",icon:"",phone:"0524441093",link:"https://www.bitpay.co.il/app/me/0524441093",instructions:"       0524441093"},{id:"paybox",name:"PayBox",description:"  ",icon:"",phone:"0528460331",link:"https://payboxapp.page.link/iChLPfvwFW4rGqDK6",instructions:"       0528460331"},{id:"cash",name:"",description:"  ",icon:"",instructions:"    "}]),S=Q(()=>t.value.reduce((E,A)=>E+A.price*A.quantity,0)),P=Q(()=>t.value.reduce((E,A)=>E+A.quantity,0)),N=Q(()=>p.value.find(E=>E.id===h.value)),B=Q(()=>u.value==="pickup"||!N.value?0:N.value.price||0),M=Q(()=>u.value==="pickup"||!N.value?!1:N.value.requiresCall||!1),H=Q(()=>N.value?m.value.find(E=>E.id===N.value.zone):null),J=Q(()=>S.value+B.value),ne=Q(()=>w.value.find(E=>E.id===_.value)),k=Q(()=>t.value.length===0),T=Q(()=>!k.value),v=Q(()=>{const E=e.value.name&&e.value.phone,A=u.value==="pickup"||u.value==="delivery"&&h.value,V=u.value==="pickup"||e.value.address;return E&&A&&V}),C=Q(()=>v.value&&_.value),R=Q(()=>p.value.filter(E=>E.zone===1)),I=Q(()=>p.value.filter(E=>E.zone===2)),y=Q(()=>p.value.filter(E=>E.zone===3));function G(E,A=1){const V=t.value.find(j=>j.id===E.id);V?V.quantity+=A:t.value.push({...E,quantity:A})}function be(E){const A=t.value.findIndex(V=>V.id===E);A>-1&&t.value.splice(A,1)}function Te(E,A){const V=t.value.find(j=>j.id===E);V&&(A<=0?be(E):V.quantity=A)}function fe(){t.value=[]}function Ie(E){e.value={...e.value,...E}}function st(E){u.value=E,E==="pickup"&&(h.value="")}function Tt(E){h.value=E;const A=p.value.find(V=>V.id===E);A&&(e.value.city=A.name)}function Se(E){_.value=E}function x(E){l.value=E}function _t(){l.value<5&&l.value++}function ht(){l.value>1&&l.value--}function It(){const E=Date.now().toString(36),A=Math.random().toString(36).substr(2,4);return`MRG-${E}-${A}`.toUpperCase()}function et(){var V,j;const E=((V=c.value)==null?void 0:V.orderId)||It();let A=` *  *
`;if(A+=`  : ${E}

`,A+=` * :*
`,A+=`: ${e.value.name}
`,A+=`: ${e.value.phone}
`,e.value.email&&(A+=`: ${e.value.email}
`),A+=`
`,A+=` * :*
`,u.value==="pickup")A+=`   ,  
`;else{const q=N.value;A+=` : ${e.value.address}
`,A+=`: ${(q==null?void 0:q.name)||e.value.city}
`,q&&(q.price?A+=` : ${q.price}
`:A+=` :  
`)}return A+=`
`,(n.value||s.value)&&(A+=` * :*
`,n.value&&(A+=`: ${n.value}
`),s.value&&(A+=`: ${s.value}
`),A+=`
`),A+=` *:*
`,t.value.forEach(q=>{A+=` ${q.name} x${q.quantity} - ${q.price*q.quantity}
`}),A+=`
`,A+=` *:*
`,A+=`" : ${S.value}
`,u.value==="delivery"&&B.value>0&&(A+=`: ${B.value}
`),M.value&&(A+=`:  
`),A+=`*" : ${J.value}${M.value?" + ":""}*

`,A+=` * :* ${((j=ne.value)==null?void 0:j.name)||""}
`,r.value&&(A+=`
 *:*
${r.value}
`),{message:A,orderId:E}}function O(){const{message:E}=et();return`https://wa.me/972528460331?text=${encodeURIComponent(E)}`}async function ee(){o.value=!0;try{const A={orderId:It(),items:[...t.value],customer:{...e.value},delivery:{option:u.value,location:N.value?{...N.value}:null,price:B.value,requiresCall:M.value},payment:{method:_.value},date:n.value,time:s.value,specialRequests:r.value,subtotal:S.value,deliveryFee:B.value,total:J.value},V=await lV(A);return RV(A).catch(j=>{console.error("Email notification failed:",j)}),c.value=V,i.value.unshift(V),te(V),l.value=5,V}catch(E){throw console.error("Order submission failed:",E),E}finally{o.value=!1}}function te(E){try{const V=`orders_${E.customer.phone}`,j=JSON.parse(localStorage.getItem(V)||"[]");j.unshift({id:E.id,orderId:E.orderId,total:E.total,status:E.status,createdAt:new Date().toISOString()}),localStorage.setItem(V,JSON.stringify(j.slice(0,20)))}catch(A){console.error("Failed to save order to localStorage:",A)}}function he(E){try{const A=`orders_${E}`;return JSON.parse(localStorage.getItem(A)||"[]")}catch(A){return console.error("Failed to get orders from localStorage:",A),[]}}function Be(){fe(),e.value={name:"",phone:"",email:"",address:"",city:""},u.value="pickup",h.value="",_.value="",n.value="",s.value="",r.value="",l.value=1,c.value=null}return{cart:t,customerInfo:e,orderDate:n,orderTime:s,specialRequests:r,orderHistory:i,isLoading:o,currentStep:l,lastOrder:c,deliveryOption:u,selectedLocation:h,locations:p,deliveryZones:m,paymentMethod:_,paymentMethods:w,cartTotal:S,cartItemCount:P,selectedLocationData:N,deliveryPrice:B,deliveryRequiresCall:M,selectedDeliveryZone:H,orderTotal:J,selectedPaymentMethod:ne,isCartEmpty:k,canProceedToCheckout:T,canProceedToPayment:v,canCompleteOrder:C,zone1Locations:R,zone2Locations:I,zone3Locations:y,addToCart:G,removeFromCart:be,updateQuantity:Te,clearCart:fe,setCustomerInfo:Ie,setDeliveryOption:st,setSelectedLocation:Tt,setPaymentMethod:Se,setStep:x,nextStep:_t,prevStep:ht,generateWhatsAppMessage:et,getWhatsAppLink:O,submitOrder:ee,resetOrder:Be,getOrdersFromLocalStorage:he}}),kV={key:0,class:"cart-drawer"},PV={class:"cart-header"},VV={class:"cart-title"},DV={key:0,class:"cart-badge"},OV={key:0,class:"cart-empty"},NV={key:1,class:"cart-content"},xV={class:"cart-items"},MV={class:"item-emoji"},LV={class:"item-details"},$V={class:"item-name"},FV={class:"item-price"},UV={class:"item-actions"},BV={class:"quantity-controls"},jV=["onClick"],qV={class:"qty-value"},HV=["onClick"],zV={class:"item-total"},WV=["onClick"],KV={class:"cart-summary"},GV={class:"summary-row"},QV={class:"summary-value"},JV={class:"summary-row total"},YV={class:"summary-value"},XV={class:"cart-actions"},ZV={__name:"CartDrawer",setup(t){const e=vn(),n=js(),s=Q(()=>n.isCartDrawerOpen),r=Q(()=>e.cart),i=Q(()=>e.cartTotal),o=Q(()=>e.cartItemCount),l=Q(()=>e.isCartEmpty),c=()=>{n.closeCartDrawer()},u=m=>{const _=e.cart.find(w=>w.id===m);_&&e.updateQuantity(m,_.quantity+1)},h=m=>{const _=e.cart.find(w=>w.id===m);_&&_.quantity>1?e.updateQuantity(m,_.quantity-1):e.removeFromCart(m)},p=m=>{e.removeFromCart(m),e.isCartEmpty};return(m,_)=>{const w=nn("router-link");return D(),Xe(_l,{to:"body"},[se(Bt,{name:"fade"},{default:de(()=>[s.value?(D(),$("div",{key:0,class:"cart-overlay",onClick:c})):pe("",!0)]),_:1}),se(Bt,{name:"slide"},{default:de(()=>[s.value?(D(),$("div",kV,[d("div",PV,[d("h2",VV,[_[0]||(_[0]=d("span",{class:"cart-icon"},"",-1)),_[1]||(_[1]=ue("   ",-1)),o.value>0?(D(),$("span",DV,F(o.value),1)):pe("",!0)]),d("button",{class:"close-btn",onClick:c},"")]),l.value?(D(),$("div",OV,[_[3]||(_[3]=d("span",{class:"empty-icon"},"",-1)),_[4]||(_[4]=d("h3",null," ",-1)),_[5]||(_[5]=d("p",null,"  ",-1)),se(w,{to:"/menu",class:"browse-btn",onClick:c},{default:de(()=>[..._[2]||(_[2]=[ue("  ",-1)])]),_:1})])):(D(),$("div",NV,[d("div",xV,[se(hr,{name:"cart-item"},{default:de(()=>[(D(!0),$(Ce,null,We(r.value,S=>(D(),$("div",{key:S.id,class:"cart-item"},[d("span",MV,F(S.image),1),d("div",LV,[d("h4",$V,F(S.name),1),d("span",FV,""+F(S.price)+" ",1)]),d("div",UV,[d("div",BV,[d("button",{class:"qty-btn minus",onClick:P=>h(S.id)},"",8,jV),d("span",qV,F(S.quantity),1),d("button",{class:"qty-btn plus",onClick:P=>u(S.id)},"+",8,HV)]),d("span",zV,""+F(S.price*S.quantity),1)]),d("button",{class:"remove-btn",onClick:P=>p(S.id),title:" "},"",8,WV)]))),128))]),_:1})]),d("div",KV,[d("div",GV,[d("span",null,'"  ('+F(o.value)+")",1),d("span",QV,""+F(i.value),1)]),_[7]||(_[7]=d("div",{class:"summary-row delivery-note"},[d("span",null," "),d("span",{class:"summary-value"}," ")],-1)),d("div",JV,[_[6]||(_[6]=d("span",null,'" ',-1)),d("span",YV,""+F(i.value)+"+",1)])]),d("div",XV,[se(w,{to:"/checkout",class:"checkout-btn",onClick:c},{default:de(()=>[..._[8]||(_[8]=[d("span",null," ",-1),d("span",{class:"btn-arrow"},"",-1)])]),_:1}),d("button",{class:"continue-btn",onClick:c}," ")])]))])):pe("",!0)]),_:1})])}}},e2=Je(ZV,[["__scopeId","data-v-750363f2"]]),t2={key:0,class:"cart-count"},n2={key:0,class:"cart-total"},s2={__name:"CartButton",setup(t){const e=vn(),n=js(),s=oe(!1),r=Q(()=>e.cartItemCount),i=Q(()=>e.cartTotal),o=()=>{n.openCartDrawer()};return hn(r,(l,c)=>{l>c&&(s.value=!0,setTimeout(()=>{s.value=!1},500))}),(l,c)=>(D(),$("button",{class:Ve(["cart-button",{"has-items":r.value>0,"is-animating":s.value}]),onClick:o},[c[0]||(c[0]=d("span",{class:"cart-icon"},"",-1)),se(Bt,{name:"bounce"},{default:de(()=>[r.value>0?(D(),$("span",t2,F(r.value>99?"99+":r.value),1)):pe("",!0)]),_:1}),se(Bt,{name:"fade"},{default:de(()=>[r.value>0?(D(),$("span",n2," "+F(i.value),1)):pe("",!0)]),_:1})],2))}},r2=Je(s2,[["__scopeId","data-v-cdcaacfd"]]),h1="/assets/logo-CbLXBLT5.png",i2={class:"header"},o2={class:"container nav-container"},a2=["src"],l2={class:"nav-actions"},c2={class:"main container"},u2={__name:"App",setup(t){const e=S_(),n=js(),{isDark:s}=C_(),r=Q(()=>n.isMobileMenuOpen),i=oe(""),o=oe("fade"),l=()=>n.toggleMobileMenu(),c=()=>n.closeMobileMenu(),u=["/","/menu","/gallery","/about","/quote","/checkout"];return hn(()=>e.path,(h,p)=>{const m=u.indexOf(h),_=u.indexOf(p||"/");m>_?o.value="slide-left":m<_?o.value="slide-right":o.value="fade",i.value=p,c()}),(h,p)=>{const m=nn("router-link"),_=nn("router-view");return D(),$("div",{class:Ve(["app",{"menu-open":r.value,dark:Oe(s)}])},[d("header",i2,[d("nav",o2,[se(m,{to:"/",class:"logo-link",onClick:c},{default:de(()=>[d("img",{src:Oe(h1),alt:" ",class:"logo-img"},null,8,a2),p[0]||(p[0]=d("span",{class:"logo-text"},[ue(" "),d("span",{"aria-hidden":"true"},"")],-1))]),_:1}),d("div",{class:Ve(["nav-links",{open:r.value}])},[se(m,{class:"nav-link",to:"/menu",onClick:c},{default:de(()=>[...p[1]||(p[1]=[ue("",-1)])]),_:1}),se(m,{class:"nav-link",to:"/gallery",onClick:c},{default:de(()=>[...p[2]||(p[2]=[ue("",-1)])]),_:1}),se(m,{class:"nav-link",to:"/about",onClick:c},{default:de(()=>[...p[3]||(p[3]=[ue("",-1)])]),_:1}),se(m,{class:"nav-link",to:"/my-orders",onClick:c},{default:de(()=>[...p[4]||(p[4]=[ue(" ",-1)])]),_:1}),se(m,{class:"nav-link nav-link-primary",to:"/quote",onClick:c},{default:de(()=>[...p[5]||(p[5]=[ue("   ",-1)])]),_:1}),se(Yf,{class:"dark-toggle-mobile"})],2),d("div",l2,[se(jI),se(Yf,{class:"dark-toggle-desktop"}),se(Oe(r2)),d("button",{class:"mobile-menu-btn",onClick:l,"aria-label":""},[d("span",{class:Ve(["hamburger",{active:r.value}])},[...p[6]||(p[6]=[d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1)])],2)])])])]),d("main",c2,[se(_,null,{default:de(({Component:w,route:S})=>[se(Bt,{name:o.value,mode:"out-in"},{default:de(()=>[(D(),Xe(Lb(w),{key:S.path}))]),_:2},1032,["name"])]),_:1})]),se(kI),se(Oe(e2)),se(R_)],2)}}},d2=Je(u2,[["__scopeId","data-v-e6b81622"]]),h2={class:"card-content"},f2={class:"card-icon"},p2={class:"card-title"},m2={class:"card-description"},g2={class:"card-footer"},_2={class:"products-count"},y2={__name:"CategoryCard",props:{category:{type:Object,required:!0}},setup(t){const e=t,n=si(),s=Q(()=>n.getProductsByCategory(e.category.id).length);return(r,i)=>{const o=nn("router-link");return D(),Xe(o,{to:t.category.id==="baking-workshops"?"/workshops":`/menu/${t.category.id}`,class:"category-card"},{default:de(()=>[i[1]||(i[1]=d("div",{class:"card-background"},null,-1)),d("div",h2,[d("span",f2,F(t.category.icon),1),d("h3",p2,F(t.category.name),1),d("p",m2,F(t.category.description),1),d("div",g2,[d("span",_2,F(s.value)+" ",1),i[0]||(i[0]=d("span",{class:"card-arrow"},"",-1))])]),i[2]||(i[2]=d("div",{class:"card-shine"},null,-1))]),_:1},8,["to"])}}},v2=Je(y2,[["__scopeId","data-v-368390c5"]]),b2={key:0,class:"popular-badge"},E2={class:"product-image"},w2={class:"product-emoji"},T2={class:"product-info"},I2={class:"product-name"},A2={class:"product-description"},S2={class:"product-footer"},C2={class:"product-price"},R2={key:1,class:"quantity-controls"},k2={class:"qty-value"},P2={key:0,class:"added-indicator"},V2={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(t){const e=t,n=vn(),s=js(),r=oe(!1),i=Q(()=>n.cart.some(p=>p.id===e.product.id)),o=Q(()=>{const p=n.cart.find(m=>m.id===e.product.id);return(p==null?void 0:p.quantity)||0}),l=()=>{n.addToCart(e.product,1),r.value=!0,s.showSuccess(`${e.product.name}  `),setTimeout(()=>{r.value=!1},1500)},c=()=>{n.updateQuantity(e.product.id,o.value+1)},u=()=>{o.value>1?n.updateQuantity(e.product.id,o.value-1):n.removeFromCart(e.product.id)},h=()=>{};return(p,m)=>(D(),$("div",{class:Ve(["product-card",{"is-in-cart":i.value}]),onClick:h},[t.product.popular?(D(),$("span",b2,"   ")):pe("",!0),d("div",E2,[d("span",w2,F(t.product.image),1)]),d("div",T2,[d("h4",I2,F(t.product.name),1),d("p",A2,F(t.product.description),1),d("div",S2,[d("span",C2,""+F(t.product.price),1),d("div",{class:"cart-actions",onClick:m[0]||(m[0]=Rn(()=>{},["stop"]))},[i.value?(D(),$("div",R2,[d("button",{class:"qty-btn minus",onClick:u},""),d("span",k2,F(o.value),1),d("button",{class:"qty-btn plus",onClick:c},"+")])):(D(),$("button",{key:0,class:"add-btn",onClick:l},[...m[1]||(m[1]=[d("span",{class:"add-icon"},"+",-1),d("span",{class:"add-text"},"",-1)])]))])])]),se(Bt,{name:"pop"},{default:de(()=>[r.value?(D(),$("div",P2,"  ")):pe("",!0)]),_:1})],2))}},Qd=Je(V2,[["__scopeId","data-v-b9901bdb"]]),D2={class:"category-section"},O2={class:"section-header"},N2={class:"header-content"},x2={class:"section-icon"},M2={class:"header-text"},L2={class:"section-title"},$2={class:"section-description"},F2={class:"products-grid"},U2={__name:"CategorySection",props:{category:{type:Object,required:!0},limit:{type:Number,default:4}},setup(t){const e=t,n=si(),s=Q(()=>n.getPopularByCategory(e.category.id,e.limit));return(r,i)=>{const o=nn("router-link");return D(),$("section",D2,[d("div",O2,[d("div",N2,[d("span",x2,F(t.category.icon),1),d("div",M2,[d("h2",L2,F(t.category.name),1),d("p",$2,F(t.category.description),1)])]),se(o,{to:`/menu/${t.category.id}`,class:"view-all-btn"},{default:de(()=>[...i[0]||(i[0]=[ue("   ",-1),d("span",{class:"btn-arrow"},"",-1)])]),_:1},8,["to"])]),d("div",F2,[(D(!0),$(Ce,null,We(s.value,(l,c)=>(D(),Xe(Qd,{key:l.id,product:l,style:yn({animationDelay:`${c*100}ms`}),class:"product-item"},null,8,["product","style"]))),128))]),se(o,{to:`/menu/${t.category.id}`,class:"view-more-mobile"},{default:de(()=>[ue("  "+F(t.category.name)+" ",1),i[1]||(i[1]=d("span",{class:"arrow"},"",-1))]),_:1},8,["to"])])}}},B2=Je(U2,[["__scopeId","data-v-0cbaed3a"]]),j2={class:"home-page"},q2={class:"hero-section"},H2={class:"hero-content"},z2={class:"hero-text"},W2={class:"hero-actions"},K2={class:"hero-image"},G2=["src"],Q2={class:"categories-section"},J2={class:"categories-grid"},Y2={class:"category-icon"},X2={class:"category-name"},Z2={class:"popular-section"},eD={class:"products-grid"},tD={class:"section-action"},nD={class:"cta-section"},sD={class:"cta-card"},rD={class:"cta-content"},iD={__name:"Home",setup(t){Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]});const e=si(),n=Q(()=>e.categories),s=Q(()=>e.popularProducts.slice(0,8));return(r,i)=>{const o=nn("router-link");return D(),$("div",j2,[d("section",q2,[i[4]||(i[4]=d("div",{class:"hero-background"},[d("div",{class:"hero-shape shape-1"}),d("div",{class:"hero-shape shape-2"}),d("div",{class:"hero-shape shape-3"})],-1)),d("div",H2,[d("div",z2,[i[2]||(i[2]=Kt('<h1 class="hero-title" data-v-8e9a7ff1>    <span class="brand-name" data-v-8e9a7ff1></span><span class="hero-emoji" data-v-8e9a7ff1></span></h1><p class="hero-subtitle" data-v-8e9a7ff1>      : , , ,      ,  . </p><div class="hero-badges" data-v-8e9a7ff1><span class="badge" data-v-8e9a7ff1><span class="badge-icon" data-v-8e9a7ff1></span>     </span><span class="badge" data-v-8e9a7ff1><span class="badge-icon" data-v-8e9a7ff1></span>   </span><span class="badge" data-v-8e9a7ff1><span class="badge-icon" data-v-8e9a7ff1></span>   </span></div>',3)),d("div",W2,[se(o,{to:"/menu",class:"btn-primary"},{default:de(()=>[...i[0]||(i[0]=[d("span",null,"",-1),d("span",{class:"btn-arrow"},"",-1)])]),_:1}),se(o,{to:"/quote",class:"btn-secondary"},{default:de(()=>[...i[1]||(i[1]=[ue("    ",-1)])]),_:1})])]),d("div",K2,[d("img",{src:Oe(h1),alt:" ",class:"logo-img"},null,8,G2),i[3]||(i[3]=Kt('<div class="floating-items" data-v-8e9a7ff1><span class="floating-item item-1" data-v-8e9a7ff1></span><span class="floating-item item-2" data-v-8e9a7ff1></span><span class="floating-item item-3" data-v-8e9a7ff1></span><span class="floating-item item-4" data-v-8e9a7ff1></span></div>',1))])])]),d("section",Q2,[i[5]||(i[5]=d("div",{class:"section-header"},[d("h2",{class:"section-title"}," "),d("p",{class:"section-subtitle"},"    ")],-1)),d("div",J2,[(D(!0),$(Ce,null,We(n.value,(l,c)=>(D(),Xe(o,{key:l.id,to:`/menu/${l.id}`,class:"category-preview",style:yn({"--category-color":l.color,animationDelay:`${c*80}ms`})},{default:de(()=>[d("span",Y2,F(l.icon),1),d("span",X2,F(l.name),1)]),_:2},1032,["to","style"]))),128))])]),d("section",Z2,[i[7]||(i[7]=d("div",{class:"section-header"},[d("h2",{class:"section-title"},"  "),d("p",{class:"section-subtitle"},"    ")],-1)),d("div",eD,[(D(!0),$(Ce,null,We(s.value,l=>(D(),Xe(Oe(Qd),{key:l.id,product:l},null,8,["product"]))),128))]),d("div",tD,[se(o,{to:"/menu",class:"view-all-link"},{default:de(()=>[...i[6]||(i[6]=[ue("    ",-1),d("span",{class:"link-arrow"},"",-1)])]),_:1})])]),i[13]||(i[13]=Kt('<section class="features-section" data-v-8e9a7ff1><div class="section-header" data-v-8e9a7ff1><h2 class="section-title" data-v-8e9a7ff1> ?</h2></div><div class="features-grid" data-v-8e9a7ff1><div class="feature-card" data-v-8e9a7ff1><span class="feature-icon" data-v-8e9a7ff1></span><h3 class="feature-title" data-v-8e9a7ff1> </h3><p class="feature-text" data-v-8e9a7ff1>    ,  </p></div><div class="feature-card" data-v-8e9a7ff1><span class="feature-icon" data-v-8e9a7ff1></span><h3 class="feature-title" data-v-8e9a7ff1> </h3><p class="feature-text" data-v-8e9a7ff1>         </p></div><div class="feature-card" data-v-8e9a7ff1><span class="feature-icon" data-v-8e9a7ff1></span><h3 class="feature-title" data-v-8e9a7ff1>  </h3><p class="feature-text" data-v-8e9a7ff1>        </p></div><div class="feature-card" data-v-8e9a7ff1><span class="feature-icon" data-v-8e9a7ff1></span><h3 class="feature-title" data-v-8e9a7ff1> </h3><p class="feature-text" data-v-8e9a7ff1>  :  ,  , </p></div><div class="feature-card" data-v-8e9a7ff1><span class="feature-icon" data-v-8e9a7ff1></span><h3 class="feature-title" data-v-8e9a7ff1></h3><p class="feature-text" data-v-8e9a7ff1>     </p></div></div></section>',1)),d("section",nD,[d("div",sD,[d("div",rD,[i[9]||(i[9]=d("span",{class:"cta-icon"},"",-1)),i[10]||(i[10]=d("h2",{class:"cta-title"}," ?",-1)),i[11]||(i[11]=d("p",{class:"cta-text"}," , , ,   -     !",-1)),se(o,{to:"/quote",class:"cta-btn"},{default:de(()=>[...i[8]||(i[8]=[ue("   ",-1),d("span",{class:"btn-arrow"},"",-1)])]),_:1})]),i[12]||(i[12]=d("div",{class:"cta-decoration"},[d("span",{class:"deco-item deco-1"},""),d("span",{class:"deco-item deco-2"},""),d("span",{class:"deco-item deco-3"},"")],-1))])])])}}},oD=Je(iD,[["__scopeId","data-v-8e9a7ff1"]]),aD={class:"menu-page"},lD={class:"categories-section"},cD={class:"categories-grid"},uD={class:"previews-section"},dD={class:"cta-section"},hD={class:"cta-content"},fD={__name:"Menu",setup(t){Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]});const e=si(),n=Q(()=>e.categories);return(s,r)=>{const i=nn("router-link");return D(),$("div",aD,[r[6]||(r[6]=d("header",{class:"page-header"},[d("h1",{class:"page-title"}," "),d("p",{class:"page-subtitle"},"   ,  ")],-1)),d("section",lD,[r[0]||(r[0]=d("h2",{class:"section-title"},"",-1)),d("div",cD,[(D(!0),$(Ce,null,We(n.value,(o,l)=>(D(),Xe(Oe(v2),{key:o.id,category:o,style:yn({animationDelay:`${l*80}ms`}),class:"category-item"},null,8,["category","style"]))),128))])]),r[7]||(r[7]=d("div",{class:"divider"},[d("span",{class:"divider-icon"},"")],-1)),d("section",uD,[r[1]||(r[1]=d("h2",{class:"section-title"}," ",-1)),(D(!0),$(Ce,null,We(n.value,o=>(D(),Xe(Oe(B2),{key:o.id,category:o,limit:5},null,8,["category"]))),128))]),d("section",dD,[d("div",hD,[r[3]||(r[3]=d("span",{class:"cta-icon"},"",-1)),r[4]||(r[4]=d("h3",{class:"cta-title"},"   ?",-1)),r[5]||(r[5]=d("p",{class:"cta-text"},"      ",-1)),se(i,{to:"/quote",class:"cta-btn"},{default:de(()=>[...r[2]||(r[2]=[ue("    ",-1)])]),_:1})])])])}}},pD=Je(fD,[["__scopeId","data-v-8f7e28d1"]]),mD={key:0,class:"category-page"},gD={class:"breadcrumb"},_D={class:"breadcrumb-current"},yD={class:"header-content"},vD={class:"header-icon"},bD={class:"header-text"},ED={class:"page-title"},wD={class:"page-subtitle"},TD={class:"products-count"},ID={key:0,class:"subcategories-section"},AD={class:"subcategories-tabs"},SD=["onClick"],CD={class:"tab-icon"},RD={class:"filters-bar"},kD={class:"filter-group"},PD={class:"sort-group"},VD={class:"products-section"},DD={key:0,class:"empty-state"},OD={class:"back-section"},ND={key:1,class:"not-found"},xD={__name:"MenuCategory",props:["categoryId"],setup(t){const e=t,n=si(),s=Q(()=>n.getCategoryById(e.categoryId));Ln({title:Q(()=>{var m;return`${((m=s.value)==null?void 0:m.name)||""} |  -  `}),meta:[{name:"description",content:Q(()=>{var m;return`${((m=s.value)==null?void 0:m.description)||""} -     .   .`})}]});const r=S_(),i=oe("all"),o=oe(!1),l=oe("default"),c=Q(()=>n.dairySubcategories),u=Q(()=>n.getProductsByCategory(r.params.categoryId)),h=Q(()=>{var _;let m=[...u.value];switch((_=s.value)!=null&&_.hasSubcategories&&i.value!=="all"&&(m=m.filter(w=>w.subcategory===i.value)),o.value&&(m=m.filter(w=>w.popular)),l.value){case"price-low":m.sort((w,S)=>w.price-S.price);break;case"price-high":m.sort((w,S)=>S.price-w.price);break;case"name":m.sort((w,S)=>w.name.localeCompare(S.name,"he"));break;default:m.sort((w,S)=>(S.popular?1:0)-(w.popular?1:0))}return m}),p=()=>{i.value="all",o.value=!1,l.value="default"};return hn(()=>r.params.categoryId,()=>{p()}),(m,_)=>{const w=nn("router-link");return s.value?(D(),$("div",mD,[d("nav",gD,[se(w,{to:"/menu",class:"breadcrumb-link"},{default:de(()=>[..._[3]||(_[3]=[ue("",-1)])]),_:1}),_[4]||(_[4]=d("span",{class:"breadcrumb-separator"},"/",-1)),d("span",_D,F(s.value.name),1)]),d("header",{class:"page-header",style:yn({"--category-color":s.value.color})},[_[5]||(_[5]=d("div",{class:"header-background"},null,-1)),d("div",yD,[d("span",vD,F(s.value.icon),1),d("div",bD,[d("h1",ED,F(s.value.name),1),d("p",wD,F(s.value.description),1),d("span",TD,F(u.value.length)+" ",1)])])],4),s.value.hasSubcategories?(D(),$("div",ID,[d("div",AD,[d("button",{class:Ve(["subcategory-tab",{active:i.value==="all"}]),onClick:_[0]||(_[0]=S=>i.value="all")},"  ",2),(D(!0),$(Ce,null,We(c.value,S=>(D(),$("button",{key:S.id,class:Ve(["subcategory-tab",{active:i.value===S.id}]),onClick:P=>i.value=S.id},[d("span",CD,F(S.icon),1),ue(" "+F(S.name),1)],10,SD))),128))])])):pe("",!0),d("div",RD,[d("div",kD,[d("button",{class:Ve(["filter-btn",{active:o.value}]),onClick:_[1]||(_[1]=S=>o.value=!o.value)},"   ",2)]),d("div",PD,[_[7]||(_[7]=d("label",{class:"sort-label"},":",-1)),Ue(d("select",{"onUpdate:modelValue":_[2]||(_[2]=S=>l.value=S),class:"sort-select"},[..._[6]||(_[6]=[d("option",{value:"default"}," ",-1),d("option",{value:"price-low"},":  ",-1),d("option",{value:"price-high"},":  ",-1),d("option",{value:"name"}," ",-1)])],512),[[Zu,l.value]])])]),d("div",VD,[se(hr,{name:"products",tag:"div",class:"products-grid"},{default:de(()=>[(D(!0),$(Ce,null,We(h.value,S=>(D(),Xe(Oe(Qd),{key:S.id,product:S},null,8,["product"]))),128))]),_:1}),h.value.length===0?(D(),$("div",DD,[_[8]||(_[8]=d("span",{class:"empty-icon"},"",-1)),_[9]||(_[9]=d("h3",null,"  ",-1)),_[10]||(_[10]=d("p",null,"   ",-1)),d("button",{class:"reset-btn",onClick:p}," ")])):pe("",!0)]),d("div",OD,[se(w,{to:"/menu",class:"back-link"},{default:de(()=>[..._[11]||(_[11]=[d("span",{class:"back-arrow"},"",-1),ue("   ",-1)])]),_:1})])])):(D(),$("div",ND,[_[13]||(_[13]=d("span",{class:"not-found-icon"},"",-1)),_[14]||(_[14]=d("h2",null,"  ",-1)),se(w,{to:"/menu",class:"back-btn"},{default:de(()=>[..._[12]||(_[12]=[ue(" ",-1)])]),_:1})]))}}},MD=Je(xD,[["__scopeId","data-v-1380cd57"]]),LD={class:"gallery-page"},$D={class:"filter-tabs"},FD=["onClick"],UD={class:"filter-icon"},BD={class:"filter-label"},jD={class:"gallery-grid"},qD=["onClick"],HD={class:"image-placeholder"},zD={class:"placeholder-icon"},WD={class:"placeholder-text"},KD={class:"image-overlay"},GD={class:"overlay-text"},QD={class:"overlay-category"},JD={key:0,class:"empty-state"},YD={class:"cta-section"},XD={class:"cta-content"},ZD={class:"cta-buttons"},eO={class:"lightbox-image"},tO={class:"lightbox-icon"},nO={class:"lightbox-title"},sO={class:"lightbox-info"},rO={class:"lightbox-category"},iO={class:"lightbox-counter"},oO={__name:"Gallery",setup(t){Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]});const e=oe("all"),n=oe(!1),s=oe(0),r=[{id:"all",name:"",icon:""},{id:"cakes",name:"",icon:""},{id:"cookies",name:"",icon:""},{id:"pastries",name:"",icon:""},{id:"workshops",name:"",icon:""},{id:"events",name:"",icon:""}],i=oe([{id:1,icon:"",title:"  ",description:"    ",category:"cakes",categoryName:"",size:"large"},{id:2,icon:"",title:"  ",description:"  ",category:"cookies",categoryName:"",size:"small"},{id:3,icon:"",title:" ",description:"  ",category:"cakes",categoryName:"",size:"small"},{id:4,icon:"",title:" ",description:" ",category:"pastries",categoryName:"",size:"medium"},{id:5,icon:"",title:" ",description:"  ",category:"cakes",categoryName:"",size:"large"},{id:6,icon:"",title:"  ",description:"  ",category:"workshops",categoryName:"",size:"medium"},{id:7,icon:"",title:" ",description:"  ",category:"cakes",categoryName:"",size:"small"},{id:8,icon:"",title:" ",description:"  ",category:"pastries",categoryName:"",size:"small"},{id:9,icon:"",title:"  ",description:"  ",category:"events",categoryName:"",size:"large"},{id:10,icon:"",title:" ",description:"  ",category:"cookies",categoryName:"",size:"medium"},{id:11,icon:"",title:" ",description:" ",category:"workshops",categoryName:"",size:"small"},{id:12,icon:"",title:"  ",description:"   ",category:"events",categoryName:"",size:"medium"}]),o=Q(()=>e.value==="all"?i.value:i.value.filter(m=>m.category===e.value)),l=Q(()=>o.value[s.value]);function c(m){s.value=m,n.value=!0,document.body.style.overflow="hidden"}function u(){n.value=!1,document.body.style.overflow=""}function h(){s.value=(s.value+1)%o.value.length}function p(){s.value=(s.value-1+o.value.length)%o.value.length}return document.addEventListener("keydown",m=>{n.value&&(m.key==="Escape"&&u(),m.key==="ArrowRight"&&p(),m.key==="ArrowLeft"&&h())}),(m,_)=>{const w=nn("router-link");return D(),$("div",LD,[_[8]||(_[8]=d("header",{class:"page-header"},[d("h1",{class:"page-title"}," "),d("p",{class:"page-subtitle"},"   - ,   ")],-1)),d("div",$D,[(D(),$(Ce,null,We(r,S=>d("button",{key:S.id,class:Ve(["filter-tab",{active:e.value===S.id}]),onClick:P=>e.value=S.id},[d("span",UD,F(S.icon),1),d("span",BD,F(S.name),1)],10,FD)),64))]),d("div",jD,[se(hr,{name:"gallery"},{default:de(()=>[(D(!0),$(Ce,null,We(o.value,(S,P)=>(D(),$("div",{key:S.id,class:Ve(["gallery-item",S.size]),onClick:N=>c(P)},[d("div",HD,[d("span",zD,F(S.icon),1),d("span",WD,F(S.title),1)]),d("div",KD,[_[1]||(_[1]=d("span",{class:"overlay-icon"},"",-1)),d("span",GD,F(S.title),1),d("span",QD,F(S.categoryName),1)])],10,qD))),128))]),_:1})]),o.value.length===0?(D(),$("div",JD,[..._[2]||(_[2]=[d("span",{class:"empty-icon"},"",-1),d("h3",null,"   ",-1),d("p",null,"   !",-1)])])):pe("",!0),d("section",YD,[d("div",XD,[_[5]||(_[5]=d("span",{class:"cta-icon"},"",-1)),_[6]||(_[6]=d("h3",{class:"cta-title"},"     ?",-1)),_[7]||(_[7]=d("p",{class:"cta-text"},"      !",-1)),d("div",ZD,[se(w,{to:"/menu",class:"cta-btn primary"},{default:de(()=>[..._[3]||(_[3]=[ue("  ",-1)])]),_:1}),se(w,{to:"/quote",class:"cta-btn secondary"},{default:de(()=>[..._[4]||(_[4]=[ue("   ",-1)])]),_:1})])])]),(D(),Xe(_l,{to:"body"},[se(Bt,{name:"fade"},{default:de(()=>{var S,P,N,B,M;return[n.value?(D(),$("div",{key:0,class:"lightbox-overlay",onClick:u},[d("button",{class:"lightbox-close",onClick:u},""),d("button",{class:"lightbox-nav prev",onClick:Rn(p,["stop"])},""),d("button",{class:"lightbox-nav next",onClick:Rn(h,["stop"])},""),d("div",{class:"lightbox-content",onClick:_[0]||(_[0]=Rn(()=>{},["stop"]))},[d("div",eO,[d("span",tO,F((S=l.value)==null?void 0:S.icon),1),d("span",nO,F((P=l.value)==null?void 0:P.title),1)]),d("div",sO,[d("h3",null,F((N=l.value)==null?void 0:N.title),1),d("p",null,F((B=l.value)==null?void 0:B.description),1),d("span",rO,F((M=l.value)==null?void 0:M.categoryName),1)])]),d("div",iO,F(s.value+1)+" / "+F(o.value.length),1)])):pe("",!0)]}),_:1})]))])}}},aO=Je(oO,[["__scopeId","data-v-af19162a"]]),lO={class:"grid grid-2"},cO={__name:"About",setup(t){return Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]}),(e,n)=>(D(),$("section",lO,[...n[0]||(n[0]=[d("div",{class:"card"},[d("h2",null," "),d("p",null,"          , ,   .       . "),d("p",null,"    ,   .")],-1),d("div",{class:"card"},[d("h2",null," "),d("p",null," .  /    .")],-1)])]))}},uO={class:"progress-steps"},dO={class:"progress-track"},hO={class:"steps-container"},fO=["onClick"],pO={class:"step-indicator"},mO={key:0,class:"step-check"},gO={key:1,class:"step-number"},_O={class:"step-content"},yO={class:"step-title"},vO={key:0,class:"step-subtitle"},bO={__name:"ProgressSteps",props:{steps:{type:Array,required:!0},currentStep:{type:Number,default:1},clickable:{type:Boolean,default:!1}},emits:["step-click"],setup(t,{emit:e}){const n=t,s=e,r=Q(()=>{const o=n.steps.length,l=(n.currentStep-1)/(o-1)*100;return`${Math.min(100,Math.max(0,l))}%`}),i=o=>{n.clickable&&o<n.currentStep&&s("step-click",o)};return(o,l)=>(D(),$("div",uO,[d("div",dO,[d("div",{class:"progress-fill",style:yn({width:r.value})},null,4)]),d("div",hO,[(D(!0),$(Ce,null,We(t.steps,(c,u)=>(D(),$("div",{key:u,class:Ve(["step",{"step-completed":u+1<t.currentStep,"step-active":u+1===t.currentStep,"step-pending":u+1>t.currentStep}]),onClick:h=>i(u+1)},[d("div",pO,[u+1<t.currentStep?(D(),$("span",mO,"")):(D(),$("span",gO,F(u+1),1)),l[0]||(l[0]=d("div",{class:"step-pulse"},null,-1))]),d("div",_O,[d("div",yO,F(c.title),1),c.subtitle?(D(),$("div",vO,F(c.subtitle),1)):pe("",!0)])],10,fO))),128))])]))}},EO=Je(bO,[["__scopeId","data-v-e761569c"]]),wO=["disabled"],TO={class:"btn-content"},IO={key:0,class:"spinner"},AO={key:1,class:"btn-icon"},SO={__name:"AnimatedButton",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","outline","ghost"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)},loading:Boolean,disabled:Boolean,icon:String},emits:["click"],setup(t,{emit:e}){const n=t,s=e,r=i=>{!n.loading&&!n.disabled&&s("click",i)};return(i,o)=>(D(),$("button",{class:Ve(["animated-btn",`btn-${t.variant}`,`btn-${t.size}`,{"btn-loading":t.loading,"btn-disabled":t.disabled}]),disabled:t.disabled||t.loading,onClick:r},[o[0]||(o[0]=d("span",{class:"btn-bg"},null,-1)),d("span",TO,[t.loading?(D(),$("span",IO)):pe("",!0),t.icon&&!t.loading?(D(),$("span",AO,F(t.icon),1)):pe("",!0),$b(i.$slots,"default",{},void 0)]),o[1]||(o[1]=d("span",{class:"btn-shine"},null,-1))],10,wO))}},to=Je(SO,[["__scopeId","data-v-83def808"]]),CO={class:"products-step"},RO={class:"category-tabs"},kO=["onClick"],PO=["onClick"],VO={class:"product-emoji"},DO={class:"product-info"},OO={class:"product-name"},NO={class:"product-price"},xO=["onClick"],MO={class:"qty-value"},LO=["onClick"],$O={class:"product-check"},FO={key:0},UO={key:1,class:"popular-badge"},BO={key:0,class:"cart-summary"},jO={class:"summary-content"},qO={class:"summary-count"},HO={class:"summary-total"},zO={__name:"StepProducts",setup(t){const e=vn(),n=["","","","",""],s=oe(""),r=Q(()=>s.value===""?e.products:e.products.filter(m=>m.category===s.value)),i=Q(()=>e.cartItemCount),o=Q(()=>e.cartTotal),l=m=>e.cart.some(_=>_.id===m),c=m=>{const _=e.cart.find(w=>w.id===m);return(_==null?void 0:_.quantity)||0},u=m=>{l(m.id)?e.removeFromCart(m.id):e.addToCart(m,1)},h=m=>{const _=e.cart.find(w=>w.id===m);_&&e.updateQuantity(m,_.quantity+1)},p=m=>{const _=e.cart.find(w=>w.id===m);_&&_.quantity>1?e.updateQuantity(m,_.quantity-1):e.removeFromCart(m)};return(m,_)=>(D(),$("div",CO,[_[1]||(_[1]=d("h3",{class:"step-title"}," ",-1)),_[2]||(_[2]=d("p",{class:"step-description"},"    ",-1)),d("div",RO,[(D(),$(Ce,null,We(n,w=>d("button",{key:w,class:Ve(["category-tab",{active:s.value===w}]),onClick:S=>s.value=w},F(w),11,kO)),64))]),se(hr,{name:"products",tag:"div",class:"products-grid"},{default:de(()=>[(D(!0),$(Ce,null,We(r.value,w=>(D(),$("div",{key:w.id,class:Ve(["product-card",{selected:l(w.id)}]),onClick:S=>u(w)},[d("div",VO,F(w.image),1),d("div",DO,[d("div",OO,F(w.name),1),d("div",NO,""+F(w.price),1)]),l(w.id)?(D(),$("div",{key:0,class:"product-quantity",onClick:_[0]||(_[0]=Rn(()=>{},["stop"]))},[d("button",{class:"qty-btn",onClick:S=>p(w.id)},"-",8,xO),d("span",MO,F(c(w.id)),1),d("button",{class:"qty-btn",onClick:S=>h(w.id)},"+",8,LO)])):pe("",!0),d("div",$O,[l(w.id)?(D(),$("span",FO,"")):pe("",!0)]),w.popular?(D(),$("span",UO,"")):pe("",!0)],10,PO))),128))]),_:1}),i.value>0?(D(),$("div",BO,[d("div",jO,[d("span",qO,F(i.value)+" ",1),d("span",HO,'": '+F(o.value),1)])])):pe("",!0)]))}},WO=Je(zO,[["__scopeId","data-v-7512c99a"]]),ha={required:t=>Array.isArray(t)?t.length>0:typeof t=="string"?t.trim().length>0:t!=null,email:t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0,phone:t=>t?/^[\d\-\+\s\(\)]{9,15}$/.test(t.replace(/\s/g,"")):!0,minLength:t=>e=>e?e.length>=t:!0,maxLength:t=>e=>e?e.length<=t:!0,min:t=>e=>e===""||e===null?!0:Number(e)>=t,max:t=>e=>e===""||e===null?!0:Number(e)<=t,pattern:t=>e=>e?t.test(e):!0},fa={required:" ",email:"   ",phone:"   ",minLength:t=>` ${t} `,maxLength:t=>` ${t} `,min:t=>` : ${t}`,max:t=>` : ${t}`,pattern:"  "};function KO(t){const e=Ds({}),n=Ds({}),s=oe(!1),r=oe(0);Object.keys(t).forEach(w=>{e[w]=[],n[w]=!1});const i=(w,S)=>{var B;const P=t[w];if(!P)return[];const N=[];for(const M of P){let H=!0,J="";if(typeof M=="string")H=((B=ha[M])==null?void 0:B.call(ha,S))??!0,J=fa[M];else if(typeof M=="object"){const[ne,k]=Object.entries(M)[0],T=ha[ne];if(typeof T=="function"){const v=T(k);H=typeof v=="function"?v(S):v,J=typeof fa[ne]=="function"?fa[ne](k):fa[ne]}}else if(typeof M=="function"){const ne=M(S);typeof ne=="string"?(H=!1,J=ne):(H=ne,J="  ")}H||N.push(J)}return e[w]=N,N},o=w=>{let S=!0;for(const P of Object.keys(t)){const N=w[P];n[P]=!0,i(P,N).length>0&&(S=!1)}return S},l=(w,S)=>{n[w]=!0,i(w,S)},c=(w,S)=>{n[w]&&i(w,S)},u=()=>{Object.keys(t).forEach(w=>{e[w]=[],n[w]=!1}),r.value=0},h=Q(()=>Object.values(e).every(w=>w.length===0)),p=Q(()=>Object.values(e).some(w=>w.length>0));return{errors:e,touched:n,isSubmitting:s,submitCount:r,isValid:h,hasErrors:p,validateField:i,validateAll:o,handleBlur:l,handleChange:c,resetValidation:u,getFieldError:w=>{var S;return n[w]&&((S=e[w])==null?void 0:S[0])},isFieldValid:w=>{var S;return n[w]&&((S=e[w])==null?void 0:S.length)===0}}}const GO={customerInfo:{name:["required",{minLength:2}],phone:["required","phone"],email:["required","email"],address:[]}},QO={key:0,class:"required-mark"},JO={class:"input-container"},YO={key:0,class:"input-icon"},XO=["type","value","placeholder","required","disabled"],ZO=["value","placeholder","required","disabled","rows"],eN={key:3,class:"validation-icon valid"},tN={key:4,class:"validation-icon invalid"},nN={key:0,class:"error-message"},sN={__name:"AnimatedInput",props:{modelValue:[String,Number],label:String,placeholder:String,type:{type:String,default:"text"},icon:String,required:Boolean,disabled:Boolean,error:String,isValid:Boolean,showValidation:{type:Boolean,default:!0},rows:{type:Number,default:4}},emits:["update:modelValue","focus","blur"],setup(t,{emit:e}){const n=t,s=e,r=oe(null),i=oe(!1),o=`input-${Math.random().toString(36).substr(2,9)}`,l=Q(()=>n.modelValue!==""&&n.modelValue!==null&&n.modelValue!==void 0),c=p=>{s("update:modelValue",p.target.value)},u=p=>{i.value=!0,s("focus",p)},h=p=>{i.value=!1,s("blur",p)};return(p,m)=>(D(),$("div",{class:Ve(["input-wrapper",{focused:i.value,"has-value":l.value,"has-error":t.error,"is-valid":t.isValid}])},[t.label?(D(),$("label",{key:0,for:o,class:"input-label"},[ue(F(t.label)+" ",1),t.required?(D(),$("span",QO,"*")):pe("",!0)])):pe("",!0),d("div",JO,[t.icon?(D(),$("span",YO,F(t.icon),1)):pe("",!0),t.type!=="textarea"?(D(),$("input",{key:1,id:o,ref_key:"inputRef",ref:r,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,class:"input-field",onInput:c,onFocus:u,onBlur:h},null,40,XO)):(D(),$("textarea",{key:2,id:o,ref_key:"inputRef",ref:r,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,rows:t.rows,class:"input-field textarea",onInput:c,onFocus:u,onBlur:h},null,40,ZO)),t.isValid&&t.showValidation?(D(),$("span",eN,"")):pe("",!0),t.error&&t.showValidation?(D(),$("span",tN,"!")):pe("",!0)]),se(Bt,{name:"slide-fade"},{default:de(()=>[t.error?(D(),$("span",nN,F(t.error),1)):pe("",!0)]),_:1}),m[0]||(m[0]=d("div",{class:"focus-line"},null,-1))],2))}},pa=Je(sN,[["__scopeId","data-v-934e784b"]]),rN={class:"details-step"},iN={class:"form-row"},oN={class:"form-grid"},aN={class:"form-row"},lN={__name:"StepDetails",setup(t,{expose:e}){const n=vn(),s=KO(GO.customerInfo),r=Ds({name:"",phone:"",email:"",address:""});return ni(()=>{n.customerInfo.name&&(r.name=n.customerInfo.name),n.customerInfo.phone&&(r.phone=n.customerInfo.phone),n.customerInfo.email&&(r.email=n.customerInfo.email),n.customerInfo.address&&(r.address=n.customerInfo.address)}),hn(r,i=>{n.setCustomerInfo(i)},{deep:!0}),e({validate:()=>s.validateAll(r)}),(i,o)=>(D(),$("div",rN,[o[8]||(o[8]=d("h3",{class:"step-title"}," ",-1)),o[9]||(o[9]=d("p",{class:"step-description"},"    ",-1)),d("form",{onSubmit:o[7]||(o[7]=Rn(()=>{},["prevent"])),class:"details-form"},[d("div",iN,[se(pa,{modelValue:r.name,"onUpdate:modelValue":o[0]||(o[0]=l=>r.name=l),label:" ",placeholder:"  ",icon:"",required:"",error:Oe(s).getFieldError("name"),"is-valid":Oe(s).isFieldValid("name"),onBlur:o[1]||(o[1]=l=>Oe(s).handleBlur("name",r.name))},null,8,["modelValue","error","is-valid"])]),d("div",oN,[se(pa,{modelValue:r.phone,"onUpdate:modelValue":o[2]||(o[2]=l=>r.phone=l),label:"",placeholder:"050-0000000",type:"tel",icon:"",required:"",error:Oe(s).getFieldError("phone"),"is-valid":Oe(s).isFieldValid("phone"),onBlur:o[3]||(o[3]=l=>Oe(s).handleBlur("phone",r.phone))},null,8,["modelValue","error","is-valid"]),se(pa,{modelValue:r.email,"onUpdate:modelValue":o[4]||(o[4]=l=>r.email=l),label:"",placeholder:"you@example.com",type:"email",icon:"",required:"",error:Oe(s).getFieldError("email"),"is-valid":Oe(s).isFieldValid("email"),onBlur:o[5]||(o[5]=l=>Oe(s).handleBlur("email",r.email))},null,8,["modelValue","error","is-valid"])]),d("div",aN,[se(pa,{modelValue:r.address,"onUpdate:modelValue":o[6]||(o[6]=l=>r.address=l),label:"  ()",placeholder:",  ",icon:""},null,8,["modelValue"])])],32),o[10]||(o[10]=d("div",{class:"form-tips"},[d("div",{class:"tip"},[d("span",{class:"tip-icon"},""),d("span",{class:"tip-text"},"   24    ")])],-1))]))}},cN=Je(lN,[["__scopeId","data-v-9e664487"]]),uN={class:"review-step"},dN={class:"review-sections"},hN={class:"review-section"},fN={class:"section-header"},pN={class:"section-content"},mN={class:"info-row"},gN={class:"info-value"},_N={class:"info-row"},yN={class:"info-value"},vN={class:"info-row"},bN={class:"info-value"},EN={key:0,class:"info-row"},wN={class:"info-value"},TN={class:"review-section"},IN={class:"section-header"},AN={class:"section-content"},SN={class:"item-emoji"},CN={class:"item-details"},RN={class:"item-name"},kN={class:"item-meta"},PN={class:"item-qty"},VN={class:"item-price"},DN={class:"review-section"},ON={class:"section-content"},NN={class:"form-field"},xN={class:"form-field"},MN={class:"total-section"},LN={class:"total-row"},$N={class:"total-row total-final"},FN={class:"total-price"},UN={__name:"StepReview",emits:["edit-step"],setup(t){const e=vn(),n=Q(()=>e.customerInfo),s=Q(()=>e.cart),r=Q(()=>e.cartItemCount),i=Q(()=>e.cartTotal),o=Q({get:()=>e.orderDate,set:c=>e.orderDate=c}),l=Q({get:()=>e.specialRequests,set:c=>e.specialRequests=c});return(c,u)=>(D(),$("div",uN,[u[17]||(u[17]=d("h3",{class:"step-title"}," ",-1)),u[18]||(u[18]=d("p",{class:"step-description"},"    ",-1)),d("div",dN,[d("div",hN,[d("div",fN,[u[4]||(u[4]=d("span",{class:"section-icon"},"",-1)),u[5]||(u[5]=d("h4",null," ",-1)),d("button",{class:"edit-btn",onClick:u[0]||(u[0]=h=>c.$emit("edit-step",2))},"")]),d("div",pN,[d("div",mN,[u[6]||(u[6]=d("span",{class:"info-label"},":",-1)),d("span",gN,F(n.value.name),1)]),d("div",_N,[u[7]||(u[7]=d("span",{class:"info-label"},":",-1)),d("span",yN,F(n.value.phone),1)]),d("div",vN,[u[8]||(u[8]=d("span",{class:"info-label"},":",-1)),d("span",bN,F(n.value.email),1)]),n.value.address?(D(),$("div",EN,[u[9]||(u[9]=d("span",{class:"info-label"},":",-1)),d("span",wN,F(n.value.address),1)])):pe("",!0)])]),d("div",TN,[d("div",IN,[u[10]||(u[10]=d("span",{class:"section-icon"},"",-1)),d("h4",null," ("+F(r.value)+")",1),d("button",{class:"edit-btn",onClick:u[1]||(u[1]=h=>c.$emit("edit-step",1))},"")]),d("div",AN,[se(hr,{name:"cart-item",tag:"div",class:"cart-items"},{default:de(()=>[(D(!0),$(Ce,null,We(s.value,h=>(D(),$("div",{key:h.id,class:"cart-item"},[d("span",SN,F(h.image),1),d("div",CN,[d("div",RN,F(h.name),1),d("div",kN,[d("span",PN,F(h.quantity)+" '",1),d("span",VN,""+F(h.price*h.quantity),1)])])]))),128))]),_:1})])]),d("div",DN,[u[13]||(u[13]=d("div",{class:"section-header"},[d("span",{class:"section-icon"},""),d("h4",null," ")],-1)),d("div",ON,[d("div",NN,[u[11]||(u[11]=d("label",null,"  ()",-1)),Ue(d("input",{type:"date","onUpdate:modelValue":u[2]||(u[2]=h=>o.value=h),class:"date-input"},null,512),[[Et,o.value]])]),d("div",xN,[u[12]||(u[12]=d("label",null," ",-1)),Ue(d("textarea",{"onUpdate:modelValue":u[3]||(u[3]=h=>l.value=h),rows:"3",placeholder:", ,  ...",class:"notes-input"},null,512),[[Et,l.value]])])])]),d("div",MN,[d("div",LN,[u[14]||(u[14]=d("span",null,'" :',-1)),d("span",null,""+F(i.value),1)]),d("div",$N,[u[15]||(u[15]=d("span",null,'"  ():',-1)),d("span",FN,""+F(i.value),1)]),u[16]||(u[16]=d("p",{class:"total-note"},"*     ",-1))])])]))}},BN=Je(UN,[["__scopeId","data-v-84c6076d"]]),jN={class:"success-step"},qN={class:"success-animation"},HN={class:"confetti"},zN={class:"order-reference"},WN={class:"ref-number"},KN={class:"success-actions"},GN={__name:"StepSuccess",emits:["new-order"],setup(t){const e=A_(),n=vn(),s=Q(()=>{const o=n.orderHistory[0];return(o==null?void 0:o.id)||Date.now()}),r=()=>{e.push("/")},i=o=>{const l=["#d34a6e","#ffd700","#ff8fab","#667eea","#27ae60"];return{"--delay":`${Math.random()*.5}s`,"--rotation":`${Math.random()*360}deg`,"--x-end":`${(Math.random()-.5)*200}px`,"--y-end":`${Math.random()*150+50}px`,backgroundColor:l[o%l.length]}};return(o,l)=>(D(),$("div",jN,[d("div",qN,[l[1]||(l[1]=d("div",{class:"checkmark-circle"},[d("svg",{class:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},[d("circle",{class:"checkmark-bg",cx:"26",cy:"26",r:"25",fill:"none"}),d("path",{class:"checkmark-check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})])],-1)),d("div",HN,[(D(),$(Ce,null,We(20,c=>d("span",{key:c,class:"confetti-piece",style:yn(i(c))},null,4)),64))])]),l[5]||(l[5]=d("h2",{class:"success-title"},"  ! ",-1)),l[6]||(l[6]=d("p",{class:"success-message"},[ue("    !"),d("br"),ue("    24    . ")],-1)),d("div",zN,[l[2]||(l[2]=d("span",{class:"ref-label"}," :",-1)),d("span",WN,"#"+F(s.value),1)]),d("div",KN,[se(to,{variant:"primary",onClick:l[0]||(l[0]=c=>o.$emit("new-order"))},{default:de(()=>[...l[3]||(l[3]=[ue("   ",-1)])]),_:1}),se(to,{variant:"outline",onClick:r},{default:de(()=>[...l[4]||(l[4]=[ue("    ",-1)])]),_:1})]),l[7]||(l[7]=d("div",{class:"contact-info"},[d("p",null,"?  :"),d("a",{href:"tel:0528460331",class:"contact-link"}," 052-846-0331")],-1))]))}},QN=Je(GN,[["__scopeId","data-v-68743f3e"]]),JN={class:"multi-step-form"},YN={class:"form-container"},XN={key:1,class:"form-navigation"},ZN={__name:"MultiStepForm",setup(t){const e=vn(),n=js(),s=oe(null),r=oe("forward"),i=[{title:" ",subtitle:"  ?"},{title:" ",subtitle:" "},{title:"",subtitle:" "}],o=Q(()=>e.currentStep),l=Q(()=>e.isLoading),c=Q(()=>r.value==="forward"?"slide-left":"slide-right"),u=Q(()=>{if(o.value===1)return e.cartItemCount>0;if(o.value===2){const S=e.customerInfo;return S.name&&S.phone&&S.email}return o.value===3?e.canProceedToCheckout:!0}),h=S=>{S<o.value&&(r.value="backward",e.setStep(S))},p=async()=>{var S;if(o.value===2&&((S=s.value)!=null&&S.validate)&&!s.value.validate()){n.showError("     ");return}r.value="forward",e.nextStep()},m=()=>{r.value="backward",e.prevStep()},_=async()=>{try{await e.submitOrder(),n.showSuccess("  !")}catch{n.showError("  .  .")}},w=()=>{e.resetOrder()};return(S,P)=>(D(),$("div",JN,[o.value<4?(D(),Xe(EO,{key:0,steps:i,"current-step":o.value,clickable:!0,onStepClick:h},null,8,["current-step"])):pe("",!0),d("div",YN,[se(Bt,{name:c.value,mode:"out-in"},{default:de(()=>[o.value===1?(D(),Xe(WO,{key:"step1"})):o.value===2?(D(),Xe(cN,{key:"step2",ref_key:"stepDetailsRef",ref:s},null,512)):o.value===3?(D(),Xe(BN,{key:"step3",onEditStep:h})):o.value===4?(D(),Xe(QN,{key:"step4",onNewOrder:w})):pe("",!0)]),_:1},8,["name"])]),o.value<4?(D(),$("div",XN,[o.value>1?(D(),Xe(to,{key:0,variant:"outline",onClick:m},{default:de(()=>[...P[0]||(P[0]=[ue("  ",-1)])]),_:1})):pe("",!0),P[2]||(P[2]=d("div",{class:"nav-spacer"},null,-1)),o.value<3?(D(),Xe(to,{key:1,variant:"primary",disabled:!u.value,onClick:p},{default:de(()=>[...P[1]||(P[1]=[ue("  ",-1)])]),_:1},8,["disabled"])):pe("",!0),o.value===3?(D(),Xe(to,{key:2,variant:"primary",loading:l.value,disabled:!u.value,onClick:_},{default:de(()=>[ue(F(l.value?"...":" "),1)]),_:1},8,["loading","disabled"])):pe("",!0)])):pe("",!0)]))}},ex=Je(ZN,[["__scopeId","data-v-c5a34f7a"]]),tx={class:"quote-page"},nx={__name:"Quote",setup(t){return Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]}),vn(),ni(()=>{}),(e,n)=>(D(),$("section",tx,[n[0]||(n[0]=d("div",{class:"page-header"},[d("h1",{class:"page-title"},"  "),d("p",{class:"page-subtitle"}," ,  ,    ")],-1)),se(ex),se(R_)]))}},sx=Je(nx,[["__scopeId","data-v-a173301c"]]),rx={class:"checkout-page"},ix={key:0,class:"empty-cart"},ox={key:1,class:"checkout-content"},ax={class:"progress-bar"},lx=["onClick"],cx={class:"step-number"},ux={key:0},dx={key:1},hx={class:"step-title"},fx={class:"checkout-grid"},px={class:"checkout-form"},mx={class:"form-step"},gx={class:"form-group"},_x={class:"form-group"},yx={class:"form-group"},vx=["disabled"],bx={class:"form-step"},Ex={class:"delivery-options"},wx={key:0,class:"location-selection"},Tx={class:"zone-group"},Ix={class:"locations-grid"},Ax=["value","onChange"],Sx={class:"location-name"},Cx={class:"zone-group"},Rx={class:"locations-grid"},kx=["value","onChange"],Px={class:"location-name"},Vx={class:"zone-group"},Dx={class:"locations-grid"},Ox=["value","onChange"],Nx={class:"location-name"},xx={class:"address-section"},Mx={class:"form-group"},Lx={key:0,class:"call-notice"},$x={class:"datetime-section"},Fx={class:"datetime-grid"},Ux={class:"form-group"},Bx=["min"],jx={class:"form-group"},qx={class:"form-group"},Hx={class:"step-actions"},zx=["disabled"],Wx={class:"form-step"},Kx={class:"payment-options"},Gx=["value","onChange"],Qx={class:"payment-icon"},Jx={class:"payment-content"},Yx={class:"payment-name"},Xx={class:"payment-desc"},Zx={key:0,class:"payment-instructions"},eM={class:"payment-amount"},tM=["href"],nM={class:"payment-phone"},sM={dir:"ltr"},rM={key:1,class:"cash-note"},iM={class:"step-actions"},oM=["disabled"],aM={key:0,class:"loading-spinner"},lM={key:1},cM={class:"form-step success-step"},uM={class:"success-animation"},dM={class:"confetti"},hM={class:"order-summary-card"},fM={class:"summary-row"},pM={class:"summary-row"},mM={class:"summary-row"},gM={key:0,class:"payment-reminder"},_M={class:"reminder-content"},yM=["href"],vM={class:"success-actions"},bM={key:0,class:"order-summary"},EM={class:"summary-card"},wM={class:"summary-items"},TM={class:"item-emoji"},IM={class:"item-info"},AM={class:"item-name"},SM={class:"item-qty"},CM={class:"item-price"},RM={class:"summary-totals"},kM={class:"total-row"},PM={class:"total-row"},VM={key:0,class:"free-delivery"},DM={key:1},OM={key:2,class:"call-note"},NM={key:3},xM={key:0,class:"total-row location-row"},MM={class:"location-name-small"},LM={class:"total-row final"},$M={class:"final-price"},FM={key:0,class:"plus-delivery"},UM={__name:"Checkout",setup(t){Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]});const e=vn(),n=js(),s=oe(1),r=oe(""),i=Q(()=>e.cart),o=Q(()=>e.cartTotal),l=Q(()=>e.isCartEmpty),c=Q(()=>e.paymentMethods),u=Q(()=>e.deliveryPrice),h=Q(()=>e.deliveryRequiresCall),p=Q(()=>e.orderTotal),m=Q(()=>e.selectedPaymentMethod),_=Q(()=>e.selectedLocationData),w=Q(()=>e.isLoading),S=Q(()=>e.canCompleteOrder),P=Q(()=>e.zone1Locations),N=Q(()=>e.zone2Locations),B=Q(()=>e.zone3Locations),M=Q({get:()=>e.customerInfo,set:Se=>e.setCustomerInfo(Se)}),H=Q({get:()=>e.deliveryOption,set:Se=>e.setDeliveryOption(Se)}),J=Q({get:()=>e.selectedLocation,set:Se=>e.setSelectedLocation(Se)}),ne=Q({get:()=>e.paymentMethod,set:Se=>e.setPaymentMethod(Se)}),k=Q({get:()=>e.orderDate,set:Se=>{e.orderDate=Se}}),T=Q({get:()=>e.orderTime,set:Se=>{e.orderTime=Se}}),v=Q({get:()=>e.specialRequests,set:Se=>{e.specialRequests=Se}}),C=[{id:1,title:""},{id:2,title:""},{id:3,title:""}],R=Q(()=>new Date().toISOString().split("T")[0]),I=Q(()=>M.value.name&&M.value.phone),y=Q(()=>H.value==="pickup"?!0:H.value==="delivery"?J.value&&M.value.address:!1),G=()=>{s.value<4&&s.value++},be=()=>{s.value>1&&s.value--},Te=Se=>{Se<s.value&&(s.value=Se)},fe=async()=>{try{const Se=await e.submitOrder();r.value=Se.id,s.value=4;const x=e.getWhatsAppLink();window.open(x,"_blank"),n.showSuccess("  !")}catch{n.showError("  .  .")}},Ie=()=>{e.resetOrder(),s.value=1},st=()=>{n.openCartDrawer()},Tt=Se=>{const x=["#d34a6e","#ffd700","#ff8fab","#667eea","#27ae60"];return{"--delay":`${Math.random()*.5}s`,"--rotation":`${Math.random()*360}deg`,"--x-end":`${(Math.random()-.5)*200}px`,"--y-end":`${Math.random()*150+50}px`,backgroundColor:x[Se%x.length]}};return hn(l,Se=>{Se&&s.value<4&&(s.value=1)}),(Se,x)=>{var ht,It,et;const _t=nn("router-link");return D(),$("div",rx,[l.value?(D(),$("div",ix,[x[16]||(x[16]=d("span",{class:"empty-icon"},"",-1)),x[17]||(x[17]=d("h2",null," ",-1)),x[18]||(x[18]=d("p",null,"    ",-1)),se(_t,{to:"/menu",class:"browse-btn"},{default:de(()=>[...x[15]||(x[15]=[ue("  ",-1),d("span",{class:"btn-arrow"},"",-1)])]),_:1})])):(D(),$("div",ox,[x[69]||(x[69]=d("header",{class:"page-header"},[d("h1",{class:"page-title"}," "),d("p",{class:"page-subtitle"},"     ")],-1)),d("div",ax,[(D(),$(Ce,null,We(C,(O,ee)=>d("div",{key:O.id,class:Ve(["progress-step",{active:s.value===ee+1,completed:s.value>ee+1}]),onClick:te=>Te(ee+1)},[d("span",cx,[s.value>ee+1?(D(),$("span",ux,"")):(D(),$("span",dx,F(ee+1),1))]),d("span",hx,F(O.title),1)],10,lx)),64))]),d("div",fx,[d("div",px,[Ue(d("div",mx,[x[23]||(x[23]=d("h2",{class:"step-heading"},[d("span",{class:"heading-icon"},""),ue("   ")],-1)),d("div",gx,[x[19]||(x[19]=d("label",{class:"form-label"},"  *",-1)),Ue(d("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=O=>M.value.name=O),class:"form-input",placeholder:"  ",required:""},null,512),[[Et,M.value.name]])]),d("div",_x,[x[20]||(x[20]=d("label",{class:"form-label"}," *",-1)),Ue(d("input",{type:"tel","onUpdate:modelValue":x[1]||(x[1]=O=>M.value.phone=O),class:"form-input",placeholder:"050-0000000",dir:"ltr",required:""},null,512),[[Et,M.value.phone]])]),d("div",yx,[x[21]||(x[21]=d("label",{class:"form-label"},"",-1)),Ue(d("input",{type:"email","onUpdate:modelValue":x[2]||(x[2]=O=>M.value.email=O),class:"form-input",placeholder:"your@email.com",dir:"ltr"},null,512),[[Et,M.value.email]])]),d("button",{class:"next-btn",onClick:G,disabled:!I.value},[...x[22]||(x[22]=[ue("    ",-1),d("span",{class:"btn-arrow"},"",-1)])],8,vx)],512),[[Oi,s.value===1]]),Ue(d("div",bx,[x[42]||(x[42]=d("h2",{class:"step-heading"},[d("span",{class:"heading-icon"},""),ue("   ")],-1)),d("div",Ex,[d("label",{class:Ve(["delivery-option",{selected:H.value==="pickup"}])},[Ue(d("input",{type:"radio","onUpdate:modelValue":x[3]||(x[3]=O=>H.value=O),value:"pickup",onChange:x[4]||(x[4]=O=>Oe(e).setDeliveryOption("pickup"))},null,544),[[wr,H.value]]),x[24]||(x[24]=Kt('<span class="option-icon" data-v-ad3edd68></span><div class="option-content" data-v-ad3edd68><span class="option-title" data-v-ad3edd68> </span><span class="option-desc" data-v-ad3edd68>  ,  </span><span class="option-price free" data-v-ad3edd68></span></div><span class="option-check" data-v-ad3edd68></span>',3))],2),d("label",{class:Ve(["delivery-option",{selected:H.value==="delivery"}])},[Ue(d("input",{type:"radio","onUpdate:modelValue":x[5]||(x[5]=O=>H.value=O),value:"delivery",onChange:x[6]||(x[6]=O=>Oe(e).setDeliveryOption("delivery"))},null,544),[[wr,H.value]]),x[25]||(x[25]=Kt('<span class="option-icon" data-v-ad3edd68></span><div class="option-content" data-v-ad3edd68><span class="option-title" data-v-ad3edd68>  </span><span class="option-desc" data-v-ad3edd68>  </span><span class="option-price" data-v-ad3edd68> -20</span></div><span class="option-check" data-v-ad3edd68></span>',3))],2)]),se(Bt,{name:"slide-down"},{default:de(()=>[H.value==="delivery"?(D(),$("div",wx,[x[34]||(x[34]=d("h3",{class:"section-subtitle"},"  /:",-1)),d("div",Tx,[x[27]||(x[27]=d("div",{class:"zone-header zone-1"},[d("span",{class:"zone-icon"},""),d("span",{class:"zone-title"},"  - 20")],-1)),d("div",Ix,[(D(!0),$(Ce,null,We(P.value,O=>(D(),$("label",{key:O.id,class:Ve(["location-option",{selected:J.value===O.id}])},[Ue(d("input",{type:"radio","onUpdate:modelValue":x[7]||(x[7]=ee=>J.value=ee),value:O.id,onChange:ee=>Oe(e).setSelectedLocation(O.id)},null,40,Ax),[[wr,J.value]]),d("span",Sx,F(O.name),1),x[26]||(x[26]=d("span",{class:"location-check"},"",-1))],2))),128))])]),d("div",Cx,[x[29]||(x[29]=d("div",{class:"zone-header zone-2"},[d("span",{class:"zone-icon"},""),d("span",{class:"zone-title"},"  - 40")],-1)),d("div",Rx,[(D(!0),$(Ce,null,We(N.value,O=>(D(),$("label",{key:O.id,class:Ve(["location-option",{selected:J.value===O.id}])},[Ue(d("input",{type:"radio","onUpdate:modelValue":x[8]||(x[8]=ee=>J.value=ee),value:O.id,onChange:ee=>Oe(e).setSelectedLocation(O.id)},null,40,kx),[[wr,J.value]]),d("span",Px,F(O.name),1),x[28]||(x[28]=d("span",{class:"location-check"},"",-1))],2))),128))])]),d("div",Vx,[x[31]||(x[31]=d("div",{class:"zone-header zone-3"},[d("span",{class:"zone-icon"},""),d("span",{class:"zone-title"},"  -   ")],-1)),d("div",Dx,[(D(!0),$(Ce,null,We(B.value,O=>(D(),$("label",{key:O.id,class:Ve(["location-option",{selected:J.value===O.id}])},[Ue(d("input",{type:"radio","onUpdate:modelValue":x[9]||(x[9]=ee=>J.value=ee),value:O.id,onChange:ee=>Oe(e).setSelectedLocation(O.id)},null,40,Ox),[[wr,J.value]]),d("span",Nx,F(O.name),1),x[30]||(x[30]=d("span",{class:"location-check"},"",-1))],2))),128))])]),d("div",xx,[d("div",Mx,[x[32]||(x[32]=d("label",{class:"form-label"},"  ( ) *",-1)),Ue(d("input",{type:"text","onUpdate:modelValue":x[10]||(x[10]=O=>M.value.address=O),class:"form-input",placeholder:":   15,  3"},null,512),[[Et,M.value.address]])])]),se(Bt,{name:"fade"},{default:de(()=>[h.value?(D(),$("div",Lx,[...x[33]||(x[33]=[d("span",{class:"notice-icon"},"",-1),d("div",{class:"notice-content"},[d("strong",null," !"),d("p",null,"         .")],-1)])])):pe("",!0)]),_:1})])):pe("",!0)]),_:1}),d("div",$x,[x[38]||(x[38]=d("h3",{class:"section-subtitle"},"  ?",-1)),d("div",Fx,[d("div",Ux,[x[35]||(x[35]=d("label",{class:"form-label"},"",-1)),Ue(d("input",{type:"date","onUpdate:modelValue":x[11]||(x[11]=O=>k.value=O),class:"form-input",min:R.value},null,8,Bx),[[Et,k.value]])]),d("div",jx,[x[37]||(x[37]=d("label",{class:"form-label"}," ",-1)),Ue(d("select",{"onUpdate:modelValue":x[12]||(x[12]=O=>T.value=O),class:"form-input"},[...x[36]||(x[36]=[Kt('<option value="" data-v-ad3edd68> </option><option value="09:00-11:00" data-v-ad3edd68>09:00-11:00</option><option value="11:00-13:00" data-v-ad3edd68>11:00-13:00</option><option value="13:00-15:00" data-v-ad3edd68>13:00-15:00</option><option value="15:00-17:00" data-v-ad3edd68>15:00-17:00</option><option value="17:00-19:00" data-v-ad3edd68>17:00-19:00</option><option value="19:00-21:00" data-v-ad3edd68>19:00-21:00</option>',7)])],512),[[Zu,T.value]])])])]),d("div",qx,[x[39]||(x[39]=d("label",{class:"form-label"}," ",-1)),Ue(d("textarea",{"onUpdate:modelValue":x[13]||(x[13]=O=>v.value=O),class:"form-input form-textarea",placeholder:" , ,  ...",rows:"3"},null,512),[[Et,v.value]])]),d("div",Hx,[d("button",{class:"back-btn",onClick:be},[...x[40]||(x[40]=[d("span",{class:"btn-arrow"},"",-1),ue("  ",-1)])]),d("button",{class:"next-btn",onClick:G,disabled:!y.value},[...x[41]||(x[41]=[ue("   ",-1),d("span",{class:"btn-arrow"},"",-1)])],8,zx)])],512),[[Oi,s.value===2]]),Ue(d("div",Wx,[x[50]||(x[50]=d("h2",{class:"step-heading"},[d("span",{class:"heading-icon"},""),ue("    ")],-1)),d("div",Kx,[(D(!0),$(Ce,null,We(c.value,O=>(D(),$("label",{key:O.id,class:Ve(["payment-option",{selected:ne.value===O.id}])},[Ue(d("input",{type:"radio","onUpdate:modelValue":x[14]||(x[14]=ee=>ne.value=ee),value:O.id,onChange:ee=>Oe(e).setPaymentMethod(O.id)},null,40,Gx),[[wr,ne.value]]),d("span",Qx,F(O.icon),1),d("div",Jx,[d("span",Yx,F(O.name),1),d("span",Xx,F(O.description),1)]),x[43]||(x[43]=d("span",{class:"payment-check"},"",-1))],2))),128))]),se(Bt,{name:"fade"},{default:de(()=>[m.value?(D(),$("div",Zx,[d("div",{class:Ve(["instructions-card",ne.value])},[d("h4",null,[d("span",null,F(m.value.icon),1),ue("   - "+F(m.value.name),1)]),d("p",null,F(m.value.instructions),1),m.value.link?(D(),$(Ce,{key:0},[d("div",eM,[x[44]||(x[44]=ue("  : ",-1)),d("strong",null,""+F(p.value)+F(h.value?" + ":""),1)]),d("a",{href:m.value.link,target:"_blank",class:"payment-link-btn"},[d("span",null,"   -"+F(m.value.name),1),x[45]||(x[45]=d("span",{class:"btn-arrow"},"",-1))],8,tM),d("p",nM,[x[46]||(x[46]=ue("    : ",-1)),d("strong",sM,F(m.value.phone),1)])],64)):pe("",!0),ne.value==="cash"?(D(),$("div",rM,[...x[47]||(x[47]=[d("span",{class:"note-icon"},"",-1),d("span",null,"     ",-1)])])):pe("",!0)],2)])):pe("",!0)]),_:1}),d("div",iM,[d("button",{class:"back-btn",onClick:be},[...x[48]||(x[48]=[d("span",{class:"btn-arrow"},"",-1),ue("  ",-1)])]),d("button",{class:"submit-btn",onClick:fe,disabled:!S.value||w.value},[w.value?(D(),$("span",aM)):(D(),$("span",lM,[...x[49]||(x[49]=[ue("    ",-1),d("span",{class:"btn-icon"},"",-1)])]))],8,oM)])],512),[[Oi,s.value===3]]),Ue(d("div",cM,[d("div",uM,[x[51]||(x[51]=d("div",{class:"success-circle"},[d("span",{class:"success-check"},"")],-1)),d("div",dM,[(D(),$(Ce,null,We(20,O=>d("span",{key:O,class:"confetti-piece",style:yn(Tt(O))},null,4)),64))])]),x[60]||(x[60]=d("h2",{class:"success-title"},"  ! ",-1)),x[61]||(x[61]=d("p",{class:"success-message"},[ue("    !"),d("br"),ue("    . ")],-1)),d("div",hM,[d("div",fM,[x[52]||(x[52]=d("span",null," :",-1)),d("strong",null,F(r.value),1)]),d("div",pM,[x[53]||(x[53]=d("span",null,'" :',-1)),d("strong",null,""+F(p.value)+F(h.value?" + ":""),1)]),d("div",mM,[x[54]||(x[54]=d("span",null," :",-1)),d("strong",null,F((ht=m.value)==null?void 0:ht.name),1)])]),ne.value!=="cash"?(D(),$("div",gM,[x[57]||(x[57]=d("span",{class:"reminder-icon"},"",-1)),d("div",_M,[x[55]||(x[55]=d("strong",null,"  !",-1)),x[56]||(x[56]=d("p",null,"     ",-1)),d("a",{href:(It=m.value)==null?void 0:It.link,target:"_blank",class:"reminder-btn"},"  -"+F((et=m.value)==null?void 0:et.name),9,yM)])])):pe("",!0),d("div",vM,[se(_t,{to:"/menu",class:"new-order-btn",onClick:Ie},{default:de(()=>[...x[58]||(x[58]=[ue("   ",-1)])]),_:1}),se(_t,{to:"/",class:"home-btn"},{default:de(()=>[...x[59]||(x[59]=[ue("   ",-1)])]),_:1})]),x[62]||(x[62]=d("div",{class:"contact-footer"},[d("p",null,"?  :"),d("a",{href:"tel:0528460331",class:"contact-link"}," 052-846-0331")],-1))],512),[[Oi,s.value===4]])]),s.value<4?(D(),$("div",bM,[d("div",EM,[x[67]||(x[67]=d("h3",{class:"summary-title"},[d("span",null,""),ue("   ")],-1)),d("div",wM,[(D(!0),$(Ce,null,We(i.value,O=>(D(),$("div",{key:O.id,class:"summary-item"},[d("span",TM,F(O.image),1),d("div",IM,[d("span",AM,F(O.name),1),d("span",SM,"x"+F(O.quantity),1)]),d("span",CM,""+F(O.price*O.quantity),1)]))),128))]),d("div",RM,[d("div",kM,[x[63]||(x[63]=d("span",null,'" ',-1)),d("span",null,""+F(o.value),1)]),d("div",PM,[x[64]||(x[64]=d("span",null,"",-1)),H.value==="pickup"?(D(),$("span",VM,"")):u.value>0?(D(),$("span",DM,""+F(u.value),1)):h.value?(D(),$("span",OM," ")):(D(),$("span",NM,"-"))]),_.value&&H.value==="delivery"?(D(),$("div",xM,[x[65]||(x[65]=d("span",null,"",-1)),d("span",MM,F(_.value.name),1)])):pe("",!0),d("div",LM,[x[66]||(x[66]=d("span",null,'" ',-1)),d("span",$M,[ue(" "+F(p.value)+" ",1),h.value?(D(),$("span",FM,"+")):pe("",!0)])])]),d("button",{class:"edit-cart-btn",onClick:st},"  ")]),x[68]||(x[68]=Kt('<div class="trust-badges" data-v-ad3edd68><div class="badge" data-v-ad3edd68><span class="badge-icon" data-v-ad3edd68></span><span data-v-ad3edd68>   </span></div><div class="badge" data-v-ad3edd68><span class="badge-icon" data-v-ad3edd68></span><span data-v-ad3edd68> </span></div><div class="badge" data-v-ad3edd68><span class="badge-icon" data-v-ad3edd68></span><span data-v-ad3edd68> </span></div></div>',1))])):pe("",!0)])]))])}}},BM=Je(UM,[["__scopeId","data-v-ad3edd68"]]),jM={class:"admin-page"},qM={key:0,class:"login-screen"},HM={class:"login-card"},zM={class:"form-group"},WM={class:"form-group"},KM=["disabled"],GM={key:0,class:"loading-spinner small"},QM={key:1},JM={key:0,class:"login-error"},YM={key:1,class:"admin-dashboard"},XM={class:"admin-header"},ZM={class:"header-right"},eL={class:"orders-count"},tL={class:"header-left"},nL={class:"user-email"},sL=["disabled"],rL={class:"stats-grid"},iL={class:"stat-card"},oL={class:"stat-content"},aL={class:"stat-value"},lL={class:"stat-card"},cL={class:"stat-content"},uL={class:"stat-value"},dL={class:"stat-card"},hL={class:"stat-content"},fL={class:"stat-value"},pL={class:"stat-card"},mL={class:"stat-content"},gL={class:"stat-value"},_L={class:"filters-bar"},yL={class:"filter-tabs"},vL=["onClick"],bL={class:"filter-icon"},EL={class:"filter-label"},wL={class:"filter-count"},TL={class:"search-box"},IL={class:"orders-list"},AL={key:0,class:"loading-state"},SL={key:1,class:"empty-state"},CL={class:"order-header"},RL={class:"order-id"},kL={class:"id-value"},PL={class:"order-time"},VL={class:"order-customer"},DL={class:"customer-name"},OL=["href"],NL=["href"],xL={class:"order-delivery"},ML={key:0,class:"delivery-badge pickup"},LL={key:1,class:"delivery-badge delivery"},$L={key:0},FL={key:1},UL={key:2,class:"delivery-address"},BL={class:"order-items"},jL={class:"item-emoji"},qL={class:"item-name"},HL={class:"item-qty"},zL={class:"item-price"},WL={key:0,class:"order-notes"},KL={class:"notes-text"},GL={key:1,class:"order-datetime"},QL={key:0,class:"datetime-item"},JL={key:1,class:"datetime-item"},YL={class:"order-footer"},XL={class:"order-total"},ZL={class:"total-value"},e4={class:"payment-info"},t4={class:"payment-method"},n4={class:"status-actions"},s4=["value","onChange"],r4=["value","onChange"],i4={__name:"Admin",setup(t){const e=oe(!1),n=oe(!1),s=oe(""),r=oe(""),i=oe(""),o=oe(""),l=oe([]),c=oe(!1),u=oe("all"),h=oe("");let p=null;const m=[{value:"all",label:"",icon:""},{value:"pending",label:"",icon:""},{value:"confirmed",label:"",icon:""},{value:"preparing",label:"",icon:""},{value:"ready",label:"",icon:""},{value:"delivered",label:"",icon:""},{value:"cancelled",label:"",icon:""}],_=Q(()=>{let I=l.value;if(u.value!=="all"&&(I=I.filter(y=>y.status===u.value)),h.value){const y=h.value.toLowerCase();I=I.filter(G=>{var be,Te,fe,Ie,st;return((Te=(be=G.customer)==null?void 0:be.name)==null?void 0:Te.toLowerCase().includes(y))||((Ie=(fe=G.customer)==null?void 0:fe.phone)==null?void 0:Ie.includes(y))||((st=G.orderId)==null?void 0:st.toLowerCase().includes(y))})}return I}),w=Q(()=>l.value.filter(I=>I.status==="pending")),S=Q(()=>l.value.filter(I=>I.status==="preparing")),P=Q(()=>{const I=new Date().toDateString();return l.value.filter(y=>{var be,Te,fe;return(((fe=(Te=(be=y.createdAt)==null?void 0:be.toDate)==null?void 0:Te.call(be))==null?void 0:fe.toDateString())||"")===I&&y.status==="delivered"})}),N=Q(()=>{const I=new Date().toDateString();return l.value.filter(y=>{var be,Te,fe;return(((fe=(Te=(be=y.createdAt)==null?void 0:be.toDate)==null?void 0:Te.call(be))==null?void 0:fe.toDateString())||"")===I&&y.paymentStatus==="paid"}).reduce((y,G)=>y+(G.total||0),0)});async function B(){if(!(!s.value||!r.value)){n.value=!0,i.value="";try{await Hk(Fc,s.value,r.value)}catch(I){switch(console.error("Login error:",I),I.code){case"auth/invalid-email":i.value="   ";break;case"auth/user-not-found":i.value="  ";break;case"auth/wrong-password":i.value=" ";break;case"auth/invalid-credential":i.value="  ";break;default:i.value=" .  ."}}finally{n.value=!1}}}async function M(){try{await Gk(Fc),e.value=!1,o.value="",l.value=[],s.value="",r.value=""}catch(I){console.error("Logout error:",I)}}async function H(){c.value=!0;try{l.value=await uV()}catch(I){console.error("Failed to load orders:",I)}finally{c.value=!1}}async function J(I,y){try{await dV(I,y);const G=l.value.find(be=>be.id===I);G&&(G.status=y)}catch(G){console.error("Failed to update status:",G)}}async function ne(I,y){try{await hV(I,y);const G=l.value.find(be=>be.id===I);G&&(G.paymentStatus=y)}catch(G){console.error("Failed to update payment status:",G)}}function k(I){return I==="all"?l.value.length:l.value.filter(y=>y.status===I).length}function T(I){return{pending:"",confirmed:"",preparing:"",ready:"",delivered:"",cancelled:""}[I]||I}function v(I){return{bit:" Bit",paybox:" PayBox",cash:" "}[I]||I}function C(I){return{pending:" ",awaiting:"",paid:" "}[I]||I}function R(I){if(!I)return"";const y=I.toDate?I.toDate():new Date(I);return new Intl.DateTimeFormat("he-IL",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}).format(y)}return ni(()=>{p=Kk(Fc,I=>{I?(e.value=!0,o.value=I.email,H()):(e.value=!1,o.value="")})}),Wu(()=>{p&&p()}),(I,y)=>(D(),$("div",jM,[e.value?(D(),$("div",YM,[d("header",XM,[d("div",ZM,[y[7]||(y[7]=d("h1",{class:"admin-title"},"  ",-1)),d("span",eL,F(l.value.length)+" ",1)]),d("div",tL,[d("span",nL,F(o.value),1),d("button",{class:"refresh-btn",onClick:H,disabled:c.value},[d("span",{class:Ve({spinning:c.value})},"",2),y[8]||(y[8]=ue("  ",-1))],8,sL),d("button",{class:"logout-btn",onClick:M},"")])]),d("div",rL,[d("div",iL,[y[10]||(y[10]=d("span",{class:"stat-icon"},"",-1)),d("div",oL,[d("span",aL,F(w.value.length),1),y[9]||(y[9]=d("span",{class:"stat-label"},"",-1))])]),d("div",lL,[y[12]||(y[12]=d("span",{class:"stat-icon"},"",-1)),d("div",cL,[d("span",uL,F(S.value.length),1),y[11]||(y[11]=d("span",{class:"stat-label"},"",-1))])]),d("div",dL,[y[14]||(y[14]=d("span",{class:"stat-icon"},"",-1)),d("div",hL,[d("span",fL,F(P.value.length),1),y[13]||(y[13]=d("span",{class:"stat-label"}," ",-1))])]),d("div",pL,[y[16]||(y[16]=d("span",{class:"stat-icon"},"",-1)),d("div",mL,[d("span",gL,""+F(N.value),1),y[15]||(y[15]=d("span",{class:"stat-label"}," ",-1))])])]),d("div",_L,[d("div",yL,[(D(),$(Ce,null,We(m,G=>d("button",{key:G.value,class:Ve(["filter-tab",{active:u.value===G.value}]),onClick:be=>u.value=G.value},[d("span",bL,F(G.icon),1),d("span",EL,F(G.label),1),d("span",wL,F(k(G.value)),1)],10,vL)),64))]),d("div",TL,[Ue(d("input",{type:"text","onUpdate:modelValue":y[2]||(y[2]=G=>h.value=G),placeholder:"    ...",class:"search-input"},null,512),[[Et,h.value]]),y[17]||(y[17]=d("span",{class:"search-icon"},"",-1))])]),d("div",IL,[c.value?(D(),$("div",AL,[...y[18]||(y[18]=[d("span",{class:"loading-spinner"},null,-1),d("p",null," ...",-1)])])):_.value.length===0?(D(),$("div",SL,[...y[19]||(y[19]=[d("span",{class:"empty-icon"},"",-1),d("h3",null," ",-1),d("p",null,"    ",-1)])])):(D(),Xe(hr,{key:2,name:"order-list",tag:"div",class:"orders-container"},{default:de(()=>[(D(!0),$(Ce,null,We(_.value,G=>{var be,Te,fe,Ie,st,Tt,Se,x,_t,ht,It,et,O,ee;return D(),$("div",{key:G.id,class:Ve(["order-card",[`status-${G.status}`]])},[d("div",CL,[d("div",RL,[y[20]||(y[20]=d("span",{class:"id-label"},"",-1)),d("span",kL,"#"+F(G.orderId||G.id.slice(-6)),1)]),d("div",PL,F(R(G.createdAt)),1),d("div",{class:Ve(["order-status",G.status])},F(T(G.status)),3)]),d("div",VL,[d("div",DL,[y[21]||(y[21]=d("span",{class:"icon"},"",-1)),ue(" "+F((be=G.customer)==null?void 0:be.name),1)]),d("a",{href:`tel:${(Te=G.customer)==null?void 0:Te.phone}`,class:"customer-phone"},[y[22]||(y[22]=d("span",{class:"icon"},"",-1)),ue(" "+F((fe=G.customer)==null?void 0:fe.phone),1)],8,OL),d("a",{href:`https://wa.me/972${(st=(Ie=G.customer)==null?void 0:Ie.phone)==null?void 0:st.replace(/^0/,"")}`,target:"_blank",class:"whatsapp-link"},"   ",8,NL)]),d("div",xL,[((Tt=G.delivery)==null?void 0:Tt.option)==="pickup"?(D(),$("span",ML,"    ")):(D(),$("span",LL,[ue("   - "+F((x=(Se=G.delivery)==null?void 0:Se.location)==null?void 0:x.name)+" ",1),(_t=G.delivery)!=null&&_t.price?(D(),$("span",$L,"("+F((ht=G.delivery)==null?void 0:ht.price)+")",1)):(It=G.delivery)!=null&&It.requiresCall?(D(),$("span",FL,"( )")):pe("",!0)])),(et=G.customer)!=null&&et.address?(D(),$("span",UL,"  "+F((O=G.customer)==null?void 0:O.address),1)):pe("",!0)]),d("div",BL,[(D(!0),$(Ce,null,We(G.items,te=>(D(),$("div",{key:te.id,class:"order-item"},[d("span",jL,F(te.image),1),d("span",qL,F(te.name),1),d("span",HL,"x"+F(te.quantity),1),d("span",zL,""+F(te.price*te.quantity),1)]))),128))]),G.specialRequests?(D(),$("div",WL,[y[23]||(y[23]=d("span",{class:"notes-icon"},"",-1)),d("span",KL,F(G.specialRequests),1)])):pe("",!0),G.date||G.time?(D(),$("div",GL,[G.date?(D(),$("span",QL,"  "+F(G.date),1)):pe("",!0),G.time?(D(),$("span",JL,"  "+F(G.time),1)):pe("",!0)])):pe("",!0),d("div",YL,[d("div",XL,[y[24]||(y[24]=d("span",{class:"total-label"},'":',-1)),d("span",ZL,""+F(G.total),1)]),d("div",e4,[d("span",t4,F(v((ee=G.payment)==null?void 0:ee.method)),1),d("span",{class:Ve(["payment-status",G.paymentStatus])},F(C(G.paymentStatus)),3)]),d("div",n4,[d("select",{value:G.status,onChange:te=>J(G.id,te.target.value),class:"status-select"},[...y[25]||(y[25]=[d("option",{value:"pending"},"",-1),d("option",{value:"confirmed"},"",-1),d("option",{value:"preparing"},"",-1),d("option",{value:"ready"},"",-1),d("option",{value:"delivered"},"",-1),d("option",{value:"cancelled"},"",-1)])],40,s4),d("select",{value:G.paymentStatus,onChange:te=>ne(G.id,te.target.value),class:"payment-select"},[...y[26]||(y[26]=[d("option",{value:"pending"}," ",-1),d("option",{value:"awaiting"}," ",-1),d("option",{value:"paid"},"",-1)])],40,r4)])])],2)}),128))]),_:1}))])])):(D(),$("div",qM,[d("div",HM,[y[5]||(y[5]=d("h1",{class:"login-title"},"  ",-1)),y[6]||(y[6]=d("p",{class:"login-subtitle"},"   ",-1)),d("div",zM,[y[3]||(y[3]=d("label",{class:"form-label"},"",-1)),Ue(d("input",{type:"email","onUpdate:modelValue":y[0]||(y[0]=G=>s.value=G),class:"form-input",placeholder:"admin@margalitot.co.il",dir:"ltr",onKeyup:uo(B,["enter"])},null,544),[[Et,s.value]])]),d("div",WM,[y[4]||(y[4]=d("label",{class:"form-label"},"",-1)),Ue(d("input",{type:"password","onUpdate:modelValue":y[1]||(y[1]=G=>r.value=G),class:"form-input",placeholder:"",dir:"ltr",onKeyup:uo(B,["enter"])},null,544),[[Et,r.value]])]),d("button",{class:"login-btn",onClick:B,disabled:!s.value||!r.value||n.value},[n.value?(D(),$("span",GM)):(D(),$("span",QM,""))],8,KM),i.value?(D(),$("p",JM,F(i.value),1)):pe("",!0)])]))]))}},o4=Je(i4,[["__scopeId","data-v-19872220"]]),a4={class:"my-orders-page"},l4={key:0,class:"phone-search"},c4={class:"search-card"},u4={class:"form-group"},d4=["disabled"],h4={key:0,class:"loading-spinner small"},f4={key:1},p4={key:1,class:"orders-section"},m4={class:"section-header"},g4={class:"header-info"},_4={class:"phone-display"},y4={class:"orders-count"},v4={key:0,class:"loading-state"},b4={key:1,class:"empty-state"},E4={key:2,class:"orders-list"},w4={class:"order-header"},T4={class:"order-id"},I4={class:"id-value"},A4={class:"status-icon"},S4={class:"order-date"},C4={class:"order-items"},R4={class:"item-emoji"},k4={class:"item-name"},P4={class:"item-qty"},V4={class:"item-price"},D4={class:"order-delivery"},O4={key:0,class:"delivery-badge pickup"},N4={key:1,class:"delivery-badge delivery"},x4={key:0,class:"requested-date"},M4={key:0},L4={key:1},$4={class:"order-footer"},F4={class:"order-total"},U4={class:"total-value"},B4={class:"payment-info"},j4={class:"payment-method"},q4=["onClick"],H4={class:"new-order-cta"},z4={__name:"MyOrders",setup(t){Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]});const e=A_(),n=vn(),s=oe(""),r=oe([]),i=oe(!1),o=oe(!1),l=Q(()=>{const P=s.value.replace(/\D/g,"");return P.length>=9&&P.length<=10});async function c(){if(l.value){i.value=!0,o.value=!0;try{const P=s.value.replace(/\D/g,""),N=P.startsWith("0")?P:`0${P}`;r.value=await cV(N)}catch(P){console.error("Failed to fetch orders:",P),r.value=[]}finally{i.value=!1}}}function u(){o.value=!1,r.value=[]}function h(P){n.clearCart(),P.items.forEach(N=>{n.addToCart(N,N.quantity)}),e.push("/checkout")}function p(P){return{pending:"",confirmed:"",preparing:"",ready:"",delivered:"",cancelled:""}[P]||""}function m(P){return{pending:" ",confirmed:"",preparing:"",ready:" /",delivered:"",cancelled:""}[P]||P}function _(P){return{bit:" Bit",paybox:" PayBox",cash:" "}[P]||P}function w(P){return{pending:" ",awaiting:" ",paid:" "}[P]||P}function S(P){if(!P)return"";const N=P.toDate?P.toDate():new Date(P);return new Intl.DateTimeFormat("he-IL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(N)}return(P,N)=>{const B=nn("router-link");return D(),$("div",a4,[N[12]||(N[12]=d("header",{class:"page-header"},[d("h1",{class:"page-title"},"  "),d("p",{class:"page-subtitle"},"  ")],-1)),o.value?(D(),$("div",p4,[d("div",m4,[d("div",g4,[d("span",_4," "+F(s.value),1),d("span",y4,F(r.value.length)+" ",1)]),d("button",{class:"change-phone-btn",onClick:u}," ")]),i.value?(D(),$("div",v4,[...N[4]||(N[4]=[d("span",{class:"loading-spinner"},null,-1),d("p",null," ...",-1)])])):r.value.length===0?(D(),$("div",b4,[N[6]||(N[6]=d("span",{class:"empty-icon"},"",-1)),N[7]||(N[7]=d("h3",null,"  ",-1)),N[8]||(N[8]=d("p",null,"     ",-1)),se(B,{to:"/menu",class:"order-btn"},{default:de(()=>[...N[5]||(N[5]=[ue("    ",-1)])]),_:1})])):(D(),$("div",E4,[(D(!0),$(Ce,null,We(r.value,M=>{var H,J,ne,k,T;return D(),$("div",{key:M.id,class:Ve(["order-card",[`status-${M.status}`]])},[d("div",w4,[d("div",T4,[N[9]||(N[9]=d("span",{class:"id-label"},"",-1)),d("span",I4,"#"+F(M.orderId||((H=M.id)==null?void 0:H.slice(-6))),1)]),d("div",{class:Ve(["order-status",M.status])},[d("span",A4,F(p(M.status)),1),ue(" "+F(m(M.status)),1)],2)]),d("div",S4," "+F(S(M.createdAt)),1),d("div",C4,[(D(!0),$(Ce,null,We(M.items,v=>(D(),$("div",{key:v.id,class:"order-item"},[d("span",R4,F(v.image),1),d("span",k4,F(v.name),1),d("span",P4,"x"+F(v.quantity),1),d("span",V4,""+F(v.price*v.quantity),1)]))),128))]),d("div",D4,[((J=M.delivery)==null?void 0:J.option)==="pickup"?(D(),$("span",O4,"    ")):(D(),$("span",N4,"   - "+F((k=(ne=M.delivery)==null?void 0:ne.location)==null?void 0:k.name),1))]),M.date||M.time?(D(),$("div",x4,[M.date?(D(),$("span",M4," "+F(M.date),1)):pe("",!0),M.time?(D(),$("span",L4," "+F(M.time),1)):pe("",!0)])):pe("",!0),d("div",$4,[d("div",F4,[N[10]||(N[10]=d("span",{class:"total-label"},'":',-1)),d("span",U4,""+F(M.total),1)]),d("div",B4,[d("span",j4,F(_((T=M.payment)==null?void 0:T.method)),1),d("span",{class:Ve(["payment-status",M.paymentStatus])},F(w(M.paymentStatus)),3)])]),d("button",{class:"reorder-btn",onClick:v=>h(M)},"  ",8,q4)],2)}),128))])),d("div",H4,[se(B,{to:"/menu",class:"new-order-btn"},{default:de(()=>[...N[11]||(N[11]=[ue("    ",-1)])]),_:1})])])):(D(),$("div",l4,[d("div",c4,[N[2]||(N[2]=d("h2",null,"   ",-1)),N[3]||(N[3]=d("p",null,"   ",-1)),d("div",u4,[Ue(d("input",{type:"tel","onUpdate:modelValue":N[0]||(N[0]=M=>s.value=M),class:"form-input",placeholder:"050-0000000",dir:"ltr",onKeyup:uo(c,["enter"])},null,544),[[Et,s.value]])]),d("button",{class:"search-btn",onClick:c,disabled:!l.value||i.value},[i.value?(D(),$("span",h4)):(D(),$("span",f4,[...N[1]||(N[1]=[ue("   ",-1),d("span",{class:"btn-icon"},"",-1)])]))],8,d4)])]))])}}},W4=Je(z4,[["__scopeId","data-v-9c08693d"]]),K4={class:"workshops-page"},G4={class:"age-groups-section"},Q4={class:"age-groups-grid"},J4={class:"contact-section"},Y4={class:"contact-card"},X4={class:"form-row"},Z4={class:"form-group"},e3={class:"form-group"},t3={class:"form-row"},n3={class:"form-group"},s3={class:"form-group"},r3={class:"form-group"},i3=["disabled"],o3={key:0,class:"loading-spinner small"},a3={key:1},l3={class:"whatsapp-alternative"},c3=["href"],u3={__name:"BakingWorkshops",setup(t){Ln({title:" |  -    ",meta:[{name:"description",content:"  -  ,  , , ,   ,  .   ."}]});const e=oe({parentName:"",phone:"",childName:"",ageGroup:"",notes:""}),n=oe(!1),s=oe(!1),r=Q(()=>{let l=" ,      ";return e.value.ageGroup&&(l+=`  ${e.value.ageGroup}`),`https://wa.me/972528460331?text=${encodeURIComponent(l)}`});function i(l){var u;const c={toddlers:"3.5-6",kids:"6-9",tweens:"9-12"};e.value.ageGroup=c[l],(u=document.querySelector(".contact-section"))==null||u.scrollIntoView({behavior:"smooth"})}async function o(){if(!(!e.value.parentName||!e.value.phone)){n.value=!0;try{let l=` *   *

`;l+=`  : ${e.value.parentName}
`,l+=` : ${e.value.phone}
`,e.value.childName&&(l+=`  /: ${e.value.childName}
`),e.value.ageGroup&&(l+=`  : ${e.value.ageGroup}
`),e.value.notes&&(l+=`
 :
${e.value.notes}
`);const c=`https://wa.me/972528460331?text=${encodeURIComponent(l)}`;window.open(c,"_blank"),s.value=!0,e.value={parentName:"",phone:"",childName:"",ageGroup:"",notes:""}}catch(l){console.error("Failed to submit inquiry:",l)}finally{n.value=!1}}}return(l,c)=>(D(),$("div",K4,[c[31]||(c[31]=Kt('<section class="hero-section" data-v-dcb18337><div class="hero-content" data-v-dcb18337><span class="hero-icon" data-v-dcb18337></span><h1 class="hero-title" data-v-dcb18337>  </h1><p class="hero-subtitle" data-v-dcb18337>     !<br data-v-dcb18337>   ,    </p></div><div class="hero-decoration" data-v-dcb18337><span class="floating-emoji e1" data-v-dcb18337></span><span class="floating-emoji e2" data-v-dcb18337></span><span class="floating-emoji e3" data-v-dcb18337></span><span class="floating-emoji e4" data-v-dcb18337></span></div></section>',1)),d("section",G4,[c[14]||(c[14]=d("h2",{class:"section-title"},"  ",-1)),c[15]||(c[15]=d("p",{class:"section-subtitle"},"      ",-1)),d("div",Q4,[d("div",{class:"age-card",onClick:c[0]||(c[0]=u=>i("toddlers"))},[...c[11]||(c[11]=[Kt('<div class="age-icon" data-v-dcb18337></div><div class="age-range" data-v-dcb18337>3.5-6</div><h3 class="age-title" data-v-dcb18337> </h3><p class="age-description" data-v-dcb18337>   ,  ,     </p><ul class="age-features" data-v-dcb18337><li data-v-dcb18337>  </li><li data-v-dcb18337>  </li><li data-v-dcb18337>  </li><li data-v-dcb18337>   </li></ul><div class="age-meta" data-v-dcb18337><span class="duration" data-v-dcb18337> 60 </span><span class="group-size" data-v-dcb18337>  8 </span></div><button class="age-btn" data-v-dcb18337> </button>',7)])]),d("div",{class:"age-card featured",onClick:c[1]||(c[1]=u=>i("kids"))},[...c[12]||(c[12]=[Kt('<div class="featured-badge" data-v-dcb18337>  </div><div class="age-icon" data-v-dcb18337></div><div class="age-range" data-v-dcb18337>6-9</div><h3 class="age-title" data-v-dcb18337> </h3><p class="age-description" data-v-dcb18337>   ,    </p><ul class="age-features" data-v-dcb18337><li data-v-dcb18337>  </li><li data-v-dcb18337>  </li><li data-v-dcb18337>   </li><li data-v-dcb18337>   </li></ul><div class="age-meta" data-v-dcb18337><span class="duration" data-v-dcb18337> 75 </span><span class="group-size" data-v-dcb18337>  10 </span></div><button class="age-btn" data-v-dcb18337> </button>',8)])]),d("div",{class:"age-card",onClick:c[2]||(c[2]=u=>i("tweens"))},[...c[13]||(c[13]=[Kt('<div class="age-icon" data-v-dcb18337></div><div class="age-range" data-v-dcb18337>9-12</div><h3 class="age-title" data-v-dcb18337> </h3><p class="age-description" data-v-dcb18337> ,     </p><ul class="age-features" data-v-dcb18337><li data-v-dcb18337>  </li><li data-v-dcb18337>  </li><li data-v-dcb18337>  </li><li data-v-dcb18337>  </li></ul><div class="age-meta" data-v-dcb18337><span class="duration" data-v-dcb18337> 90 </span><span class="group-size" data-v-dcb18337>  10 </span></div><button class="age-btn" data-v-dcb18337> </button>',7)])])])]),c[32]||(c[32]=Kt('<section class="included-section" data-v-dcb18337><h2 class="section-title" data-v-dcb18337>  ?</h2><div class="included-grid" data-v-dcb18337><div class="included-item" data-v-dcb18337><span class="included-icon" data-v-dcb18337></span><h4 data-v-dcb18337> </h4><p data-v-dcb18337>    </p></div><div class="included-item" data-v-dcb18337><span class="included-icon" data-v-dcb18337></span><h4 data-v-dcb18337> </h4><p data-v-dcb18337>    </p></div><div class="included-item" data-v-dcb18337><span class="included-icon" data-v-dcb18337></span><h4 data-v-dcb18337> </h4><p data-v-dcb18337>      </p></div><div class="included-item" data-v-dcb18337><span class="included-icon" data-v-dcb18337></span><h4 data-v-dcb18337> </h4><p data-v-dcb18337>,   !</p></div></div></section>',1)),d("section",J4,[d("div",Y4,[c[26]||(c[26]=d("h2",null,"  ?",-1)),c[27]||(c[27]=d("p",null,"      ",-1)),d("form",{class:"contact-form",onSubmit:Rn(o,["prevent"])},[d("div",X4,[d("div",Z4,[c[16]||(c[16]=d("label",{class:"form-label"}," ",-1)),Ue(d("input",{type:"text","onUpdate:modelValue":c[3]||(c[3]=u=>e.value.parentName=u),class:"form-input",placeholder:" ",required:""},null,512),[[Et,e.value.parentName]])]),d("div",e3,[c[17]||(c[17]=d("label",{class:"form-label"},"",-1)),Ue(d("input",{type:"tel","onUpdate:modelValue":c[4]||(c[4]=u=>e.value.phone=u),class:"form-input",placeholder:"050-0000000",dir:"ltr",required:""},null,512),[[Et,e.value.phone]])])]),d("div",t3,[d("div",n3,[c[18]||(c[18]=d("label",{class:"form-label"}," /",-1)),Ue(d("input",{type:"text","onUpdate:modelValue":c[5]||(c[5]=u=>e.value.childName=u),class:"form-input",placeholder:" /"},null,512),[[Et,e.value.childName]])]),d("div",s3,[c[20]||(c[20]=d("label",{class:"form-label"},"",-1)),Ue(d("select",{"onUpdate:modelValue":c[6]||(c[6]=u=>e.value.ageGroup=u),class:"form-input"},[...c[19]||(c[19]=[d("option",{value:""},"  ",-1),d("option",{value:"3.5-6"},"3.5-6 -  ",-1),d("option",{value:"6-9"},"6-9 -  ",-1),d("option",{value:"9-12"},"9-12 -  ",-1)])],512),[[Zu,e.value.ageGroup]])])]),d("div",r3,[c[21]||(c[21]=d("label",{class:"form-label"},"",-1)),Ue(d("textarea",{"onUpdate:modelValue":c[7]||(c[7]=u=>e.value.notes=u),class:"form-input form-textarea",placeholder:",  ...",rows:"3"},null,512),[[Et,e.value.notes]])]),d("button",{type:"submit",class:"submit-btn",disabled:n.value},[n.value?(D(),$("span",o3)):(D(),$("span",a3,[...c[22]||(c[22]=[ue("  ",-1),d("span",{class:"btn-icon"},"",-1)])]))],8,i3)],32),d("div",l3,[c[24]||(c[24]=d("span",null,"   :",-1)),d("a",{href:r.value,target:"_blank",class:"whatsapp-btn"},[...c[23]||(c[23]=[d("span",{class:"wa-icon"},"",-1),ue("  ",-1)])],8,c3),c[25]||(c[25]=d("a",{href:"tel:0528460331",class:"phone-btn"},[d("span",{class:"phone-icon"},""),ue(" 052-846-0331 ")],-1))])])]),(D(),Xe(_l,{to:"body"},[se(Bt,{name:"fade"},{default:de(()=>[s.value?(D(),$("div",{key:0,class:"success-modal-overlay",onClick:c[10]||(c[10]=u=>s.value=!1)},[d("div",{class:"success-modal",onClick:c[9]||(c[9]=Rn(()=>{},["stop"]))},[c[28]||(c[28]=d("span",{class:"success-icon"},"",-1)),c[29]||(c[29]=d("h3",null," !",-1)),c[30]||(c[30]=d("p",null,"      .",-1)),d("button",{class:"close-btn",onClick:c[8]||(c[8]=u=>s.value=!1)},"")])])):pe("",!0)]),_:1})]))]))}},d3=Je(u3,[["__scopeId","data-v-dcb18337"]]),h3=[{path:"/",name:"home",component:oD},{path:"/menu",name:"menu",component:pD},{path:"/menu/:categoryId",name:"menu-category",component:MD,props:!0},{path:"/gallery",name:"gallery",component:aO},{path:"/about",name:"about",component:cO},{path:"/quote",name:"quote",component:sx},{path:"/checkout",name:"checkout",component:BM},{path:"/admin",name:"admin",component:o4},{path:"/my-orders",name:"my-orders",component:W4},{path:"/workshops",name:"workshops",component:d3},{path:"/:pathMatch(.*)*",redirect:"/"}],f3=lI({history:LT(),routes:h3,scrollBehavior(t,e,n){return n||{top:0,behavior:"smooth"}}}),Jl=ow(d2),p3=oT();Jl.use(mw());Jl.use(f3);Jl.use(p3);Jl.mount("#app");
